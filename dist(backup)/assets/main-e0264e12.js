var Bw=Object.defineProperty;var Uw=(t,e,n)=>e in t?Bw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var li=(t,e,n)=>(Uw(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ad(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const ze={},rs=[],kn=()=>{},qw=()=>!1,$w=/^on[^a-z]/,yu=t=>$w.test(t),ld=t=>t.startsWith("onUpdate:"),st=Object.assign,ud=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Hw=Object.prototype.hasOwnProperty,Le=(t,e)=>Hw.call(t,e),we=Array.isArray,is=t=>ca(t)==="[object Map]",bu=t=>ca(t)==="[object Set]",gg=t=>ca(t)==="[object Date]",Ne=t=>typeof t=="function",Je=t=>typeof t=="string",xo=t=>typeof t=="symbol",Ve=t=>t!==null&&typeof t=="object",vy=t=>Ve(t)&&Ne(t.then)&&Ne(t.catch),yy=Object.prototype.toString,ca=t=>yy.call(t),Vw=t=>ca(t).slice(8,-1),by=t=>ca(t)==="[object Object]",cd=t=>Je(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,El=ad(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_u=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},zw=/-(\w)/g,Jn=_u(t=>t.replace(zw,(e,n)=>n?n.toUpperCase():"")),Kw=/\B([A-Z])/g,Mi=_u(t=>t.replace(Kw,"-$1").toLowerCase()),wu=_u(t=>t.charAt(0).toUpperCase()+t.slice(1)),sf=_u(t=>t?`on${wu(t)}`:""),Do=(t,e)=>!Object.is(t,e),Tl=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Dl=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Ll=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Ww=t=>{const e=Je(t)?Number(t):NaN;return isNaN(e)?t:e};let mg;const Zf=()=>mg||(mg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ss(t){if(we(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Je(r)?Xw(r):ss(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(Je(t))return t;if(Ve(t))return t}}const Gw=/;(?![^(]*\))/g,Qw=/:([^]+)/,Yw=/\/\*[^]*?\*\//g;function Xw(t){const e={};return t.replace(Yw,"").split(Gw).forEach(n=>{if(n){const r=n.split(Qw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Un(t){let e="";if(Je(t))e=t;else if(we(t))for(let n=0;n<t.length;n++){const r=Un(t[n]);r&&(e+=r+" ")}else if(Ve(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Jw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Zw=ad(Jw);function _y(t){return!!t||t===""}function eE(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=ps(t[r],e[r]);return n}function ps(t,e){if(t===e)return!0;let n=gg(t),r=gg(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=xo(t),r=xo(e),n||r)return t===e;if(n=we(t),r=we(e),n||r)return n&&r?eE(t,e):!1;if(n=Ve(t),r=Ve(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!ps(t[o],e[o]))return!1}}return String(t)===String(e)}function tE(t,e){return t.findIndex(n=>ps(n,e))}const Yi=t=>Je(t)?t:t==null?"":we(t)||Ve(t)&&(t.toString===yy||!Ne(t.toString))?JSON.stringify(t,wy,2):String(t),wy=(t,e)=>e&&e.__v_isRef?wy(t,e.value):is(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:bu(e)?{[`Set(${e.size})`]:[...e.values()]}:Ve(e)&&!we(e)&&!by(e)?String(e):e;let an;class Ey{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=an,!e&&an&&(this.index=(an.scopes||(an.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=an;try{return an=this,e()}finally{an=n}}}on(){an=this}off(){an=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function nE(t){return new Ey(t)}function rE(t,e=an){e&&e.active&&e.effects.push(t)}function Ty(){return an}function iE(t){an&&an.cleanups.push(t)}const fd=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Ay=t=>(t.w&Wr)>0,Iy=t=>(t.n&Wr)>0,sE=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Wr},oE=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];Ay(i)&&!Iy(i)?i.delete(t):e[n++]=i,i.w&=~Wr,i.n&=~Wr}e.length=n}},eh=new WeakMap;let fo=0,Wr=1;const th=30;let In;const Ii=Symbol(""),nh=Symbol("");class hd{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,rE(this,r)}run(){if(!this.active)return this.fn();let e=In,n=qr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=In,In=this,qr=!0,Wr=1<<++fo,fo<=th?sE(this):vg(this),this.fn()}finally{fo<=th&&oE(this),Wr=1<<--fo,In=this.parent,qr=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){In===this?this.deferStop=!0:this.active&&(vg(this),this.onStop&&this.onStop(),this.active=!1)}}function vg(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let qr=!0;const Sy=[];function Ns(){Sy.push(qr),qr=!1}function Rs(){const t=Sy.pop();qr=t===void 0?!0:t}function nn(t,e,n){if(qr&&In){let r=eh.get(t);r||eh.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=fd()),Oy(i)}}function Oy(t,e){let n=!1;fo<=th?Iy(t)||(t.n|=Wr,n=!Ay(t)):n=!t.has(In),n&&(t.add(In),In.deps.push(t))}function vr(t,e,n,r,i,s){const o=eh.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&we(t)){const l=Number(r);o.forEach((u,c)=>{(c==="length"||c>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":we(t)?cd(n)&&a.push(o.get("length")):(a.push(o.get(Ii)),is(t)&&a.push(o.get(nh)));break;case"delete":we(t)||(a.push(o.get(Ii)),is(t)&&a.push(o.get(nh)));break;case"set":is(t)&&a.push(o.get(Ii));break}if(a.length===1)a[0]&&rh(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);rh(fd(l))}}function rh(t,e){const n=we(t)?t:[...t];for(const r of n)r.computed&&yg(r);for(const r of n)r.computed||yg(r)}function yg(t,e){(t!==In||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const aE=ad("__proto__,__v_isRef,__isVue"),ky=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(xo)),lE=dd(),uE=dd(!1,!0),cE=dd(!0),bg=fE();function fE(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=je(this);for(let s=0,o=this.length;s<o;s++)nn(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(je)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Ns();const r=je(this)[e].apply(this,n);return Rs(),r}}),t}function hE(t){const e=je(this);return nn(e,"has",t),e.hasOwnProperty(t)}function dd(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?kE:xy:e?Py:Ry).get(r))return r;const o=we(r);if(!t){if(o&&Le(bg,i))return Reflect.get(bg,i,s);if(i==="hasOwnProperty")return hE}const a=Reflect.get(r,i,s);return(xo(i)?ky.has(i):aE(i))||(t||nn(r,"get",i),e)?a:Tt(a)?o&&cd(i)?a:a.value:Ve(a)?t?md(a):$t(a):a}}const dE=Cy(),pE=Cy(!0);function Cy(t=!1){return function(n,r,i,s){let o=n[r];if(gs(o)&&Tt(o)&&!Tt(i))return!1;if(!t&&(!Ml(i)&&!gs(i)&&(o=je(o),i=je(i)),!we(n)&&Tt(o)&&!Tt(i)))return o.value=i,!0;const a=we(n)&&cd(r)?Number(r)<n.length:Le(n,r),l=Reflect.set(n,r,i,s);return n===je(s)&&(a?Do(i,o)&&vr(n,"set",r,i):vr(n,"add",r,i)),l}}function gE(t,e){const n=Le(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&vr(t,"delete",e,void 0),r}function mE(t,e){const n=Reflect.has(t,e);return(!xo(e)||!ky.has(e))&&nn(t,"has",e),n}function vE(t){return nn(t,"iterate",we(t)?"length":Ii),Reflect.ownKeys(t)}const Ny={get:lE,set:dE,deleteProperty:gE,has:mE,ownKeys:vE},yE={get:cE,set(t,e){return!0},deleteProperty(t,e){return!0}},bE=st({},Ny,{get:uE,set:pE}),pd=t=>t,Eu=t=>Reflect.getPrototypeOf(t);function el(t,e,n=!1,r=!1){t=t.__v_raw;const i=je(t),s=je(e);n||(e!==s&&nn(i,"get",e),nn(i,"get",s));const{has:o}=Eu(i),a=r?pd:n?yd:Lo;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function tl(t,e=!1){const n=this.__v_raw,r=je(n),i=je(t);return e||(t!==i&&nn(r,"has",t),nn(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function nl(t,e=!1){return t=t.__v_raw,!e&&nn(je(t),"iterate",Ii),Reflect.get(t,"size",t)}function _g(t){t=je(t);const e=je(this);return Eu(e).has.call(e,t)||(e.add(t),vr(e,"add",t,t)),this}function wg(t,e){e=je(e);const n=je(this),{has:r,get:i}=Eu(n);let s=r.call(n,t);s||(t=je(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Do(e,o)&&vr(n,"set",t,e):vr(n,"add",t,e),this}function Eg(t){const e=je(this),{has:n,get:r}=Eu(e);let i=n.call(e,t);i||(t=je(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&vr(e,"delete",t,void 0),s}function Tg(){const t=je(this),e=t.size!==0,n=t.clear();return e&&vr(t,"clear",void 0,void 0),n}function rl(t,e){return function(r,i){const s=this,o=s.__v_raw,a=je(o),l=e?pd:t?yd:Lo;return!t&&nn(a,"iterate",Ii),o.forEach((u,c)=>r.call(i,l(u),l(c),s))}}function il(t,e,n){return function(...r){const i=this.__v_raw,s=je(i),o=is(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=i[t](...r),c=n?pd:e?yd:Lo;return!e&&nn(s,"iterate",l?nh:Ii),{next(){const{value:h,done:f}=u.next();return f?{value:h,done:f}:{value:a?[c(h[0]),c(h[1])]:c(h),done:f}},[Symbol.iterator](){return this}}}}function Cr(t){return function(...e){return t==="delete"?!1:this}}function _E(){const t={get(s){return el(this,s)},get size(){return nl(this)},has:tl,add:_g,set:wg,delete:Eg,clear:Tg,forEach:rl(!1,!1)},e={get(s){return el(this,s,!1,!0)},get size(){return nl(this)},has:tl,add:_g,set:wg,delete:Eg,clear:Tg,forEach:rl(!1,!0)},n={get(s){return el(this,s,!0)},get size(){return nl(this,!0)},has(s){return tl.call(this,s,!0)},add:Cr("add"),set:Cr("set"),delete:Cr("delete"),clear:Cr("clear"),forEach:rl(!0,!1)},r={get(s){return el(this,s,!0,!0)},get size(){return nl(this,!0)},has(s){return tl.call(this,s,!0)},add:Cr("add"),set:Cr("set"),delete:Cr("delete"),clear:Cr("clear"),forEach:rl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=il(s,!1,!1),n[s]=il(s,!0,!1),e[s]=il(s,!1,!0),r[s]=il(s,!0,!0)}),[t,n,e,r]}const[wE,EE,TE,AE]=_E();function gd(t,e){const n=e?t?AE:TE:t?EE:wE;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Le(n,i)&&i in r?n:r,i,s)}const IE={get:gd(!1,!1)},SE={get:gd(!1,!0)},OE={get:gd(!0,!1)},Ry=new WeakMap,Py=new WeakMap,xy=new WeakMap,kE=new WeakMap;function CE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function NE(t){return t.__v_skip||!Object.isExtensible(t)?0:CE(Vw(t))}function $t(t){return gs(t)?t:vd(t,!1,Ny,IE,Ry)}function RE(t){return vd(t,!1,bE,SE,Py)}function md(t){return vd(t,!0,yE,OE,xy)}function vd(t,e,n,r,i){if(!Ve(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=NE(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function os(t){return gs(t)?os(t.__v_raw):!!(t&&t.__v_isReactive)}function gs(t){return!!(t&&t.__v_isReadonly)}function Ml(t){return!!(t&&t.__v_isShallow)}function Dy(t){return os(t)||gs(t)}function je(t){const e=t&&t.__v_raw;return e?je(e):t}function Ly(t){return Dl(t,"__v_skip",!0),t}const Lo=t=>Ve(t)?$t(t):t,yd=t=>Ve(t)?md(t):t;function My(t){qr&&In&&(t=je(t),Oy(t.dep||(t.dep=fd())))}function jy(t,e){t=je(t);const n=t.dep;n&&rh(n)}function Tt(t){return!!(t&&t.__v_isRef===!0)}function pt(t){return Fy(t,!1)}function PE(t){return Fy(t,!0)}function Fy(t,e){return Tt(t)?t:new xE(t,e)}class xE{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:je(e),this._value=n?e:Lo(e)}get value(){return My(this),this._value}set value(e){const n=this.__v_isShallow||Ml(e)||gs(e);e=n?e:je(e),Do(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Lo(e),jy(this))}}function Vt(t){return Tt(t)?t.value:t}const DE={get:(t,e,n)=>Vt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Tt(i)&&!Tt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function By(t){return os(t)?t:new Proxy(t,DE)}class LE{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new hd(e,()=>{this._dirty||(this._dirty=!0,jy(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=je(this);return My(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ME(t,e,n=!1){let r,i;const s=Ne(t);return s?(r=t,i=kn):(r=t.get,i=t.set),new LE(r,i,s||!i,n)}function $r(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){Tu(s,e,n)}return i}function vn(t,e,n,r){if(Ne(t)){const s=$r(t,e,n,r);return s&&vy(s)&&s.catch(o=>{Tu(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(vn(t[s],e,n,r));return i}function Tu(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){$r(l,null,10,[t,o,a]);return}}jE(t,n,i,r)}function jE(t,e,n,r=!0){console.error(t)}let Mo=!1,ih=!1;const Pt=[];let $n=0;const as=[];let ur=null,mi=0;const Uy=Promise.resolve();let bd=null;function jo(t){const e=bd||Uy;return t?e.then(this?t.bind(this):t):e}function FE(t){let e=$n+1,n=Pt.length;for(;e<n;){const r=e+n>>>1;Fo(Pt[r])<t?e=r+1:n=r}return e}function _d(t){(!Pt.length||!Pt.includes(t,Mo&&t.allowRecurse?$n+1:$n))&&(t.id==null?Pt.push(t):Pt.splice(FE(t.id),0,t),qy())}function qy(){!Mo&&!ih&&(ih=!0,bd=Uy.then(Hy))}function BE(t){const e=Pt.indexOf(t);e>$n&&Pt.splice(e,1)}function UE(t){we(t)?as.push(...t):(!ur||!ur.includes(t,t.allowRecurse?mi+1:mi))&&as.push(t),qy()}function Ag(t,e=Mo?$n+1:0){for(;e<Pt.length;e++){const n=Pt[e];n&&n.pre&&(Pt.splice(e,1),e--,n())}}function $y(t){if(as.length){const e=[...new Set(as)];if(as.length=0,ur){ur.push(...e);return}for(ur=e,ur.sort((n,r)=>Fo(n)-Fo(r)),mi=0;mi<ur.length;mi++)ur[mi]();ur=null,mi=0}}const Fo=t=>t.id==null?1/0:t.id,qE=(t,e)=>{const n=Fo(t)-Fo(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Hy(t){ih=!1,Mo=!0,Pt.sort(qE);const e=kn;try{for($n=0;$n<Pt.length;$n++){const n=Pt[$n];n&&n.active!==!1&&$r(n,null,14)}}finally{$n=0,Pt.length=0,$y(),Mo=!1,bd=null,(Pt.length||as.length)&&Hy()}}function $E(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ze;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=r[c]||ze;f&&(i=n.map(d=>Je(d)?d.trim():d)),h&&(i=n.map(Ll))}let a,l=r[a=sf(e)]||r[a=sf(Jn(e))];!l&&s&&(l=r[a=sf(Mi(e))]),l&&vn(l,t,6,i);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,vn(u,t,6,i)}}function Vy(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Ne(t)){const l=u=>{const c=Vy(u,e,!0);c&&(a=!0,st(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Ve(t)&&r.set(t,null),null):(we(s)?s.forEach(l=>o[l]=null):st(o,s),Ve(t)&&r.set(t,o),o)}function Au(t,e){return!t||!yu(e)?!1:(e=e.slice(2).replace(/Once$/,""),Le(t,e[0].toLowerCase()+e.slice(1))||Le(t,Mi(e))||Le(t,e))}let At=null,Iu=null;function jl(t){const e=At;return At=t,Iu=t&&t.type.__scopeId||null,e}function HE(t){Iu=t}function VE(){Iu=null}function Bo(t,e=At,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Mg(-1);const s=jl(e);let o;try{o=t(...i)}finally{jl(s),r._d&&Mg(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function of(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:h,data:f,setupState:d,ctx:p,inheritAttrs:g}=t;let b,m;const v=jl(t);try{if(n.shapeFlag&4){const y=i||r;b=qn(c.call(y,y,h,s,d,f,p)),m=l}else{const y=e;b=qn(y.length>1?y(s,{attrs:l,slots:a,emit:u}):y(s,null)),m=e.props?l:zE(l)}}catch(y){wo.length=0,Tu(y,t,1),b=ut(bn)}let _=b;if(m&&g!==!1){const y=Object.keys(m),{shapeFlag:E}=_;y.length&&E&7&&(o&&y.some(ld)&&(m=KE(m,o)),_=Gr(_,m))}return n.dirs&&(_=Gr(_),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),b=_,jl(v),b}const zE=t=>{let e;for(const n in t)(n==="class"||n==="style"||yu(n))&&((e||(e={}))[n]=t[n]);return e},KE=(t,e)=>{const n={};for(const r in t)(!ld(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function WE(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Ig(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const f=c[h];if(o[f]!==r[f]&&!Au(u,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Ig(r,o,u):!0:!!o;return!1}function Ig(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Au(n,s))return!0}return!1}function GE({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const QE=t=>t.__isSuspense;function YE(t,e){e&&e.pendingBranch?we(t)?e.effects.push(...t):e.effects.push(t):UE(t)}function XE(t,e){return wd(t,null,e)}const sl={};function Cn(t,e,n){return wd(t,e,n)}function wd(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=ze){var a;const l=Ty()===((a=dt)==null?void 0:a.scope)?dt:null;let u,c=!1,h=!1;if(Tt(t)?(u=()=>t.value,c=Ml(t)):os(t)?(u=()=>t,r=!0):we(t)?(h=!0,c=t.some(y=>os(y)||Ml(y)),u=()=>t.map(y=>{if(Tt(y))return y.value;if(os(y))return bi(y);if(Ne(y))return $r(y,l,2)})):Ne(t)?e?u=()=>$r(t,l,2):u=()=>{if(!(l&&l.isUnmounted))return f&&f(),vn(t,l,3,[d])}:u=kn,e&&r){const y=u;u=()=>bi(y())}let f,d=y=>{f=v.onStop=()=>{$r(y,l,4)}},p;if(qo)if(d=kn,e?n&&vn(e,l,3,[u(),h?[]:void 0,d]):u(),i==="sync"){const y=VT();p=y.__watcherHandles||(y.__watcherHandles=[])}else return kn;let g=h?new Array(t.length).fill(sl):sl;const b=()=>{if(v.active)if(e){const y=v.run();(r||c||(h?y.some((E,k)=>Do(E,g[k])):Do(y,g)))&&(f&&f(),vn(e,l,3,[y,g===sl?void 0:h&&g[0]===sl?[]:g,d]),g=y)}else v.run()};b.allowRecurse=!!e;let m;i==="sync"?m=b:i==="post"?m=()=>Jt(b,l&&l.suspense):(b.pre=!0,l&&(b.id=l.uid),m=()=>_d(b));const v=new hd(u,m);e?n?b():g=v.run():i==="post"?Jt(v.run.bind(v),l&&l.suspense):v.run();const _=()=>{v.stop(),l&&l.scope&&ud(l.scope.effects,v)};return p&&p.push(_),_}function JE(t,e,n){const r=this.proxy,i=Je(t)?t.includes(".")?zy(r,t):()=>r[t]:t.bind(r,r);let s;Ne(e)?s=e:(s=e.handler,n=e);const o=dt;ms(this);const a=wd(i,s.bind(r),n);return o?ms(o):Si(),a}function zy(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function bi(t,e){if(!Ve(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Tt(t))bi(t.value,e);else if(we(t))for(let n=0;n<t.length;n++)bi(t[n],e);else if(bu(t)||is(t))t.forEach(n=>{bi(n,e)});else if(by(t))for(const n in t)bi(t[n],e);return t}function HM(t,e){const n=At;if(n===null)return t;const r=xu(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,u=ze]=e[s];o&&(Ne(o)&&(o={mounted:o,updated:o}),o.deep&&bi(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function ui(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Ns(),vn(l,n,8,[t.el,a,t,e]),Rs())}}function ZE(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ku(()=>{t.isMounted=!0}),Cu(()=>{t.isUnmounting=!0}),t}const fn=[Function,Array],Ky={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:fn,onEnter:fn,onAfterEnter:fn,onEnterCancelled:fn,onBeforeLeave:fn,onLeave:fn,onAfterLeave:fn,onLeaveCancelled:fn,onBeforeAppear:fn,onAppear:fn,onAfterAppear:fn,onAppearCancelled:fn},eT={name:"BaseTransition",props:Ky,setup(t,{slots:e}){const n=Pu(),r=ZE();let i;return()=>{const s=e.default&&Gy(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const g of s)if(g.type!==bn){o=g;break}}const a=je(t),{mode:l}=a;if(r.isLeaving)return af(o);const u=Sg(o);if(!u)return af(o);const c=sh(u,a,r,n);oh(u,c);const h=n.subTree,f=h&&Sg(h);let d=!1;const{getTransitionKey:p}=u.type;if(p){const g=p();i===void 0?i=g:g!==i&&(i=g,d=!0)}if(f&&f.type!==bn&&(!vi(u,f)||d)){const g=sh(f,a,r,n);if(oh(f,g),l==="out-in")return r.isLeaving=!0,g.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},af(o);l==="in-out"&&u.type!==bn&&(g.delayLeave=(b,m,v)=>{const _=Wy(r,f);_[String(f.key)]=f,b._leaveCb=()=>{m(),b._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=v})}return o}}},tT=eT;function Wy(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function sh(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:h,onLeave:f,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:g,onAppear:b,onAfterAppear:m,onAppearCancelled:v}=e,_=String(t.key),y=Wy(n,t),E=(I,R)=>{I&&vn(I,r,9,R)},k=(I,R)=>{const O=R[1];E(I,R),we(I)?I.every(T=>T.length<=1)&&O():I.length<=1&&O()},S={mode:s,persisted:o,beforeEnter(I){let R=a;if(!n.isMounted)if(i)R=g||a;else return;I._leaveCb&&I._leaveCb(!0);const O=y[_];O&&vi(t,O)&&O.el._leaveCb&&O.el._leaveCb(),E(R,[I])},enter(I){let R=l,O=u,T=c;if(!n.isMounted)if(i)R=b||l,O=m||u,T=v||c;else return;let A=!1;const C=I._enterCb=D=>{A||(A=!0,D?E(T,[I]):E(O,[I]),S.delayedLeave&&S.delayedLeave(),I._enterCb=void 0)};R?k(R,[I,C]):C()},leave(I,R){const O=String(t.key);if(I._enterCb&&I._enterCb(!0),n.isUnmounting)return R();E(h,[I]);let T=!1;const A=I._leaveCb=C=>{T||(T=!0,R(),C?E(p,[I]):E(d,[I]),I._leaveCb=void 0,y[O]===t&&delete y[O])};y[O]=t,f?k(f,[I,A]):A()},clone(I){return sh(I,e,n,r)}};return S}function af(t){if(Su(t))return t=Gr(t),t.children=null,t}function Sg(t){return Su(t)?t.children?t.children[0]:void 0:t}function oh(t,e){t.shapeFlag&6&&t.component?oh(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Gy(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===pn?(o.patchFlag&128&&i++,r=r.concat(Gy(o.children,e,a))):(e||o.type!==bn)&&r.push(a!=null?Gr(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function fa(t,e){return Ne(t)?(()=>st({name:t.name},e,{setup:t}))():t}const bo=t=>!!t.type.__asyncLoader,Su=t=>t.type.__isKeepAlive;function Qy(t,e){Xy(t,"a",e)}function Yy(t,e){Xy(t,"da",e)}function Xy(t,e,n=dt){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Ou(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Su(i.parent.vnode)&&nT(r,e,n,i),i=i.parent}}function nT(t,e,n,r){const i=Ou(e,t,r,!0);Jy(()=>{ud(r[e],i)},n)}function Ou(t,e,n=dt,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Ns(),ms(n);const a=vn(e,n,t,o);return Si(),Rs(),a});return r?i.unshift(s):i.push(s),s}}const Ar=t=>(e,n=dt)=>(!qo||t==="sp")&&Ou(t,(...r)=>e(...r),n),rT=Ar("bm"),ku=Ar("m"),iT=Ar("bu"),sT=Ar("u"),Cu=Ar("bum"),Jy=Ar("um"),oT=Ar("sp"),aT=Ar("rtg"),lT=Ar("rtc");function uT(t,e=dt){Ou("ec",t,e)}const Ed="components";function cT(t,e){return e0(Ed,t,!0,e)||t}const Zy=Symbol.for("v-ndc");function fT(t){return Je(t)?e0(Ed,t,!1)||t:t||Zy}function e0(t,e,n=!0,r=!1){const i=At||dt;if(i){const s=i.type;if(t===Ed){const a=qT(s,!1);if(a&&(a===e||a===Jn(e)||a===wu(Jn(e))))return s}const o=Og(i[t]||s[t],e)||Og(i.appContext[t],e);return!o&&r?s:o}}function Og(t,e){return t&&(t[e]||t[Jn(e)]||t[wu(Jn(e))])}function VM(t,e,n,r){let i;const s=n&&n[r];if(we(t)||Je(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(Ve(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];i[a]=e(t[u],u,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function zM(t,e,n={},r,i){if(At.isCE||At.parent&&bo(At.parent)&&At.parent.isCE)return e!=="default"&&(n.name=e),ut("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),Qe();const o=s&&t0(s(n)),a=Ul(pn,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function t0(t){return t.some(e=>ql(e)?!(e.type===bn||e.type===pn&&!t0(e.children)):!0)?t:null}const ah=t=>t?h0(t)?xu(t)||t.proxy:ah(t.parent):null,_o=st(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ah(t.parent),$root:t=>ah(t.root),$emit:t=>t.emit,$options:t=>Td(t),$forceUpdate:t=>t.f||(t.f=()=>_d(t.update)),$nextTick:t=>t.n||(t.n=jo.bind(t.proxy)),$watch:t=>JE.bind(t)}),lf=(t,e)=>t!==ze&&!t.__isScriptSetup&&Le(t,e),hT={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(lf(r,e))return o[e]=1,r[e];if(i!==ze&&Le(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&Le(u,e))return o[e]=3,s[e];if(n!==ze&&Le(n,e))return o[e]=4,n[e];lh&&(o[e]=0)}}const c=_o[e];let h,f;if(c)return e==="$attrs"&&nn(t,"get",e),c(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==ze&&Le(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,Le(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return lf(i,e)?(i[e]=n,!0):r!==ze&&Le(r,e)?(r[e]=n,!0):Le(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==ze&&Le(t,o)||lf(e,o)||(a=s[0])&&Le(a,o)||Le(r,o)||Le(_o,o)||Le(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Le(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function kg(t){return we(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let lh=!0;function dT(t){const e=Td(t),n=t.proxy,r=t.ctx;lh=!1,e.beforeCreate&&Cg(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:f,beforeUpdate:d,updated:p,activated:g,deactivated:b,beforeDestroy:m,beforeUnmount:v,destroyed:_,unmounted:y,render:E,renderTracked:k,renderTriggered:S,errorCaptured:I,serverPrefetch:R,expose:O,inheritAttrs:T,components:A,directives:C,filters:D}=e;if(u&&pT(u,r,null),o)for(const Y in o){const ie=o[Y];Ne(ie)&&(r[Y]=ie.bind(n))}if(i){const Y=i.call(n,n);Ve(Y)&&(t.data=$t(Y))}if(lh=!0,s)for(const Y in s){const ie=s[Y],X=Ne(ie)?ie.bind(n,n):Ne(ie.get)?ie.get.bind(n,n):kn,F=!Ne(ie)&&Ne(ie.set)?ie.set.bind(n):kn,N=Ht({get:X,set:F});Object.defineProperty(r,Y,{enumerable:!0,configurable:!0,get:()=>N.value,set:j=>N.value=j})}if(a)for(const Y in a)n0(a[Y],r,n,Y);if(l){const Y=Ne(l)?l.call(n):l;Reflect.ownKeys(Y).forEach(ie=>{Al(ie,Y[ie])})}c&&Cg(c,t,"c");function Q(Y,ie){we(ie)?ie.forEach(X=>Y(X.bind(n))):ie&&Y(ie.bind(n))}if(Q(rT,h),Q(ku,f),Q(iT,d),Q(sT,p),Q(Qy,g),Q(Yy,b),Q(uT,I),Q(lT,k),Q(aT,S),Q(Cu,v),Q(Jy,y),Q(oT,R),we(O))if(O.length){const Y=t.exposed||(t.exposed={});O.forEach(ie=>{Object.defineProperty(Y,ie,{get:()=>n[ie],set:X=>n[ie]=X})})}else t.exposed||(t.exposed={});E&&t.render===kn&&(t.render=E),T!=null&&(t.inheritAttrs=T),A&&(t.components=A),C&&(t.directives=C)}function pT(t,e,n=kn){we(t)&&(t=uh(t));for(const r in t){const i=t[r];let s;Ve(i)?"default"in i?s=yn(i.from||r,i.default,!0):s=yn(i.from||r):s=yn(i),Tt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Cg(t,e,n){vn(we(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function n0(t,e,n,r){const i=r.includes(".")?zy(n,r):()=>n[r];if(Je(t)){const s=e[t];Ne(s)&&Cn(i,s)}else if(Ne(t))Cn(i,t.bind(n));else if(Ve(t))if(we(t))t.forEach(s=>n0(s,e,n,r));else{const s=Ne(t.handler)?t.handler.bind(n):e[t.handler];Ne(s)&&Cn(i,s,t)}}function Td(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(u=>Fl(l,u,o,!0)),Fl(l,e,o)),Ve(e)&&s.set(e,l),l}function Fl(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Fl(t,s,n,!0),i&&i.forEach(o=>Fl(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=gT[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const gT={data:Ng,props:Rg,emits:Rg,methods:ho,computed:ho,beforeCreate:qt,created:qt,beforeMount:qt,mounted:qt,beforeUpdate:qt,updated:qt,beforeDestroy:qt,beforeUnmount:qt,destroyed:qt,unmounted:qt,activated:qt,deactivated:qt,errorCaptured:qt,serverPrefetch:qt,components:ho,directives:ho,watch:vT,provide:Ng,inject:mT};function Ng(t,e){return e?t?function(){return st(Ne(t)?t.call(this,this):t,Ne(e)?e.call(this,this):e)}:e:t}function mT(t,e){return ho(uh(t),uh(e))}function uh(t){if(we(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function qt(t,e){return t?[...new Set([].concat(t,e))]:e}function ho(t,e){return t?st(Object.create(null),t,e):e}function Rg(t,e){return t?we(t)&&we(e)?[...new Set([...t,...e])]:st(Object.create(null),kg(t),kg(e??{})):e}function vT(t,e){if(!t)return e;if(!e)return t;const n=st(Object.create(null),t);for(const r in e)n[r]=qt(t[r],e[r]);return n}function r0(){return{app:null,config:{isNativeTag:qw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let yT=0;function bT(t,e){return function(r,i=null){Ne(r)||(r=st({},r)),i!=null&&!Ve(i)&&(i=null);const s=r0(),o=new Set;let a=!1;const l=s.app={_uid:yT++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Od,get config(){return s.config},set config(u){},use(u,...c){return o.has(u)||(u&&Ne(u.install)?(o.add(u),u.install(l,...c)):Ne(u)&&(o.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,h){if(!a){const f=ut(r,i);return f.appContext=s,c&&e?e(f,u):t(f,u,h),a=!0,l._container=u,u.__vue_app__=l,xu(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l},runWithContext(u){Bl=l;try{return u()}finally{Bl=null}}};return l}}let Bl=null;function Al(t,e){if(dt){let n=dt.provides;const r=dt.parent&&dt.parent.provides;r===n&&(n=dt.provides=Object.create(r)),n[t]=e}}function yn(t,e,n=!1){const r=dt||At;if(r||Bl){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Bl._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ne(e)?e.call(r&&r.proxy):e}}function _T(t,e,n,r=!1){const i={},s={};Dl(s,Ru,1),t.propsDefaults=Object.create(null),i0(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:RE(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function wT(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=je(i),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let f=c[h];if(Au(t.emitsOptions,f))continue;const d=e[f];if(l)if(Le(s,f))d!==s[f]&&(s[f]=d,u=!0);else{const p=Jn(f);i[p]=ch(l,a,p,d,t,!1)}else d!==s[f]&&(s[f]=d,u=!0)}}}else{i0(t,e,i,s)&&(u=!0);let c;for(const h in a)(!e||!Le(e,h)&&((c=Mi(h))===h||!Le(e,c)))&&(l?n&&(n[h]!==void 0||n[c]!==void 0)&&(i[h]=ch(l,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!Le(e,h))&&(delete s[h],u=!0)}u&&vr(t,"set","$attrs")}function i0(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(El(l))continue;const u=e[l];let c;i&&Le(i,c=Jn(l))?!s||!s.includes(c)?n[c]=u:(a||(a={}))[c]=u:Au(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=je(n),u=a||ze;for(let c=0;c<s.length;c++){const h=s[c];n[h]=ch(i,l,h,u[h],t,!Le(u,h))}}return o}function ch(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Le(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ne(l)){const{propsDefaults:u}=i;n in u?r=u[n]:(ms(i),r=u[n]=l.call(null,e),Si())}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Mi(n))&&(r=!0))}return r}function s0(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Ne(t)){const c=h=>{l=!0;const[f,d]=s0(h,e,!0);st(o,f),d&&a.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return Ve(t)&&r.set(t,rs),rs;if(we(s))for(let c=0;c<s.length;c++){const h=Jn(s[c]);Pg(h)&&(o[h]=ze)}else if(s)for(const c in s){const h=Jn(c);if(Pg(h)){const f=s[c],d=o[h]=we(f)||Ne(f)?{type:f}:st({},f);if(d){const p=Lg(Boolean,d.type),g=Lg(String,d.type);d[0]=p>-1,d[1]=g<0||p<g,(p>-1||Le(d,"default"))&&a.push(h)}}}const u=[o,a];return Ve(t)&&r.set(t,u),u}function Pg(t){return t[0]!=="$"}function xg(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function Dg(t,e){return xg(t)===xg(e)}function Lg(t,e){return we(e)?e.findIndex(n=>Dg(n,t)):Ne(e)&&Dg(e,t)?0:-1}const o0=t=>t[0]==="_"||t==="$stable",Ad=t=>we(t)?t.map(qn):[qn(t)],ET=(t,e,n)=>{if(e._n)return e;const r=Bo((...i)=>Ad(e(...i)),n);return r._c=!1,r},a0=(t,e,n)=>{const r=t._ctx;for(const i in t){if(o0(i))continue;const s=t[i];if(Ne(s))e[i]=ET(i,s,r);else if(s!=null){const o=Ad(s);e[i]=()=>o}}},l0=(t,e)=>{const n=Ad(e);t.slots.default=()=>n},TT=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=je(e),Dl(e,"_",n)):a0(e,t.slots={})}else t.slots={},e&&l0(t,e);Dl(t.slots,Ru,1)},AT=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=ze;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(st(i,e),!n&&a===1&&delete i._):(s=!e.$stable,a0(e,i)),o=e}else e&&(l0(t,e),o={default:1});if(s)for(const a in i)!o0(a)&&!(a in o)&&delete i[a]};function fh(t,e,n,r,i=!1){if(we(t)){t.forEach((f,d)=>fh(f,e&&(we(e)?e[d]:e),n,r,i));return}if(bo(r)&&!i)return;const s=r.shapeFlag&4?xu(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,u=e&&e.r,c=a.refs===ze?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==l&&(Je(u)?(c[u]=null,Le(h,u)&&(h[u]=null)):Tt(u)&&(u.value=null)),Ne(l))$r(l,a,12,[o,c]);else{const f=Je(l),d=Tt(l);if(f||d){const p=()=>{if(t.f){const g=f?Le(h,l)?h[l]:c[l]:l.value;i?we(g)&&ud(g,s):we(g)?g.includes(s)||g.push(s):f?(c[l]=[s],Le(h,l)&&(h[l]=c[l])):(l.value=[s],t.k&&(c[t.k]=l.value))}else f?(c[l]=o,Le(h,l)&&(h[l]=o)):d&&(l.value=o,t.k&&(c[t.k]=o))};o?(p.id=-1,Jt(p,n)):p()}}}const Jt=YE;function IT(t){return ST(t)}function ST(t,e){const n=Zf();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:f,setScopeId:d=kn,insertStaticContent:p}=t,g=(M,B,z,re=null,se=null,ae=null,G=!1,W=null,te=!!B.dynamicChildren)=>{if(M===B)return;M&&!vi(M,B)&&(re=x(M),j(M,se,ae,!0),M=null),B.patchFlag===-2&&(te=!1,B.dynamicChildren=null);const{type:Z,ref:ne,shapeFlag:ue}=B;switch(Z){case Nu:b(M,B,z,re);break;case bn:m(M,B,z,re);break;case uf:M==null&&v(B,z,re,G);break;case pn:A(M,B,z,re,se,ae,G,W,te);break;default:ue&1?E(M,B,z,re,se,ae,G,W,te):ue&6?C(M,B,z,re,se,ae,G,W,te):(ue&64||ue&128)&&Z.process(M,B,z,re,se,ae,G,W,te,$)}ne!=null&&se&&fh(ne,M&&M.ref,ae,B||M,!B)},b=(M,B,z,re)=>{if(M==null)r(B.el=a(B.children),z,re);else{const se=B.el=M.el;B.children!==M.children&&u(se,B.children)}},m=(M,B,z,re)=>{M==null?r(B.el=l(B.children||""),z,re):B.el=M.el},v=(M,B,z,re)=>{[M.el,M.anchor]=p(M.children,B,z,re,M.el,M.anchor)},_=({el:M,anchor:B},z,re)=>{let se;for(;M&&M!==B;)se=f(M),r(M,z,re),M=se;r(B,z,re)},y=({el:M,anchor:B})=>{let z;for(;M&&M!==B;)z=f(M),i(M),M=z;i(B)},E=(M,B,z,re,se,ae,G,W,te)=>{G=G||B.type==="svg",M==null?k(B,z,re,se,ae,G,W,te):R(M,B,se,ae,G,W,te)},k=(M,B,z,re,se,ae,G,W)=>{let te,Z;const{type:ne,props:ue,shapeFlag:ce,transition:de,dirs:_e}=M;if(te=M.el=o(M.type,ae,ue&&ue.is,ue),ce&8?c(te,M.children):ce&16&&I(M.children,te,null,re,se,ae&&ne!=="foreignObject",G,W),_e&&ui(M,null,re,"created"),S(te,M,M.scopeId,G,re),ue){for(const me in ue)me!=="value"&&!El(me)&&s(te,me,null,ue[me],ae,M.children,re,se,L);"value"in ue&&s(te,"value",null,ue.value),(Z=ue.onVnodeBeforeMount)&&Fn(Z,re,M)}_e&&ui(M,null,re,"beforeMount");const Ie=(!se||se&&!se.pendingBranch)&&de&&!de.persisted;Ie&&de.beforeEnter(te),r(te,B,z),((Z=ue&&ue.onVnodeMounted)||Ie||_e)&&Jt(()=>{Z&&Fn(Z,re,M),Ie&&de.enter(te),_e&&ui(M,null,re,"mounted")},se)},S=(M,B,z,re,se)=>{if(z&&d(M,z),re)for(let ae=0;ae<re.length;ae++)d(M,re[ae]);if(se){let ae=se.subTree;if(B===ae){const G=se.vnode;S(M,G,G.scopeId,G.slotScopeIds,se.parent)}}},I=(M,B,z,re,se,ae,G,W,te=0)=>{for(let Z=te;Z<M.length;Z++){const ne=M[Z]=W?Dr(M[Z]):qn(M[Z]);g(null,ne,B,z,re,se,ae,G,W)}},R=(M,B,z,re,se,ae,G)=>{const W=B.el=M.el;let{patchFlag:te,dynamicChildren:Z,dirs:ne}=B;te|=M.patchFlag&16;const ue=M.props||ze,ce=B.props||ze;let de;z&&ci(z,!1),(de=ce.onVnodeBeforeUpdate)&&Fn(de,z,B,M),ne&&ui(B,M,z,"beforeUpdate"),z&&ci(z,!0);const _e=se&&B.type!=="foreignObject";if(Z?O(M.dynamicChildren,Z,W,z,re,_e,ae):G||ie(M,B,W,null,z,re,_e,ae,!1),te>0){if(te&16)T(W,B,ue,ce,z,re,se);else if(te&2&&ue.class!==ce.class&&s(W,"class",null,ce.class,se),te&4&&s(W,"style",ue.style,ce.style,se),te&8){const Ie=B.dynamicProps;for(let me=0;me<Ie.length;me++){const He=Ie[me],Te=ue[He],Ze=ce[He];(Ze!==Te||He==="value")&&s(W,He,Te,Ze,se,M.children,z,re,L)}}te&1&&M.children!==B.children&&c(W,B.children)}else!G&&Z==null&&T(W,B,ue,ce,z,re,se);((de=ce.onVnodeUpdated)||ne)&&Jt(()=>{de&&Fn(de,z,B,M),ne&&ui(B,M,z,"updated")},re)},O=(M,B,z,re,se,ae,G)=>{for(let W=0;W<B.length;W++){const te=M[W],Z=B[W],ne=te.el&&(te.type===pn||!vi(te,Z)||te.shapeFlag&70)?h(te.el):z;g(te,Z,ne,null,re,se,ae,G,!0)}},T=(M,B,z,re,se,ae,G)=>{if(z!==re){if(z!==ze)for(const W in z)!El(W)&&!(W in re)&&s(M,W,z[W],null,G,B.children,se,ae,L);for(const W in re){if(El(W))continue;const te=re[W],Z=z[W];te!==Z&&W!=="value"&&s(M,W,Z,te,G,B.children,se,ae,L)}"value"in re&&s(M,"value",z.value,re.value)}},A=(M,B,z,re,se,ae,G,W,te)=>{const Z=B.el=M?M.el:a(""),ne=B.anchor=M?M.anchor:a("");let{patchFlag:ue,dynamicChildren:ce,slotScopeIds:de}=B;de&&(W=W?W.concat(de):de),M==null?(r(Z,z,re),r(ne,z,re),I(B.children,z,ne,se,ae,G,W,te)):ue>0&&ue&64&&ce&&M.dynamicChildren?(O(M.dynamicChildren,ce,z,se,ae,G,W),(B.key!=null||se&&B===se.subTree)&&u0(M,B,!0)):ie(M,B,z,ne,se,ae,G,W,te)},C=(M,B,z,re,se,ae,G,W,te)=>{B.slotScopeIds=W,M==null?B.shapeFlag&512?se.ctx.activate(B,z,re,G,te):D(B,z,re,se,ae,G,te):q(M,B,te)},D=(M,B,z,re,se,ae,G)=>{const W=M.component=MT(M,re,se);if(Su(M)&&(W.ctx.renderer=$),jT(W),W.asyncDep){if(se&&se.registerDep(W,Q),!M.el){const te=W.subTree=ut(bn);m(null,te,B,z)}return}Q(W,M,B,z,se,ae,G)},q=(M,B,z)=>{const re=B.component=M.component;if(WE(M,B,z))if(re.asyncDep&&!re.asyncResolved){Y(re,B,z);return}else re.next=B,BE(re.update),re.update();else B.el=M.el,re.vnode=B},Q=(M,B,z,re,se,ae,G)=>{const W=()=>{if(M.isMounted){let{next:ne,bu:ue,u:ce,parent:de,vnode:_e}=M,Ie=ne,me;ci(M,!1),ne?(ne.el=_e.el,Y(M,ne,G)):ne=_e,ue&&Tl(ue),(me=ne.props&&ne.props.onVnodeBeforeUpdate)&&Fn(me,de,ne,_e),ci(M,!0);const He=of(M),Te=M.subTree;M.subTree=He,g(Te,He,h(Te.el),x(Te),M,se,ae),ne.el=He.el,Ie===null&&GE(M,He.el),ce&&Jt(ce,se),(me=ne.props&&ne.props.onVnodeUpdated)&&Jt(()=>Fn(me,de,ne,_e),se)}else{let ne;const{el:ue,props:ce}=B,{bm:de,m:_e,parent:Ie}=M,me=bo(B);if(ci(M,!1),de&&Tl(de),!me&&(ne=ce&&ce.onVnodeBeforeMount)&&Fn(ne,Ie,B),ci(M,!0),ue&&fe){const He=()=>{M.subTree=of(M),fe(ue,M.subTree,M,se,null)};me?B.type.__asyncLoader().then(()=>!M.isUnmounted&&He()):He()}else{const He=M.subTree=of(M);g(null,He,z,re,M,se,ae),B.el=He.el}if(_e&&Jt(_e,se),!me&&(ne=ce&&ce.onVnodeMounted)){const He=B;Jt(()=>Fn(ne,Ie,He),se)}(B.shapeFlag&256||Ie&&bo(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&M.a&&Jt(M.a,se),M.isMounted=!0,B=z=re=null}},te=M.effect=new hd(W,()=>_d(Z),M.scope),Z=M.update=()=>te.run();Z.id=M.uid,ci(M,!0),Z()},Y=(M,B,z)=>{B.component=M;const re=M.vnode.props;M.vnode=B,M.next=null,wT(M,B.props,re,z),AT(M,B.children,z),Ns(),Ag(),Rs()},ie=(M,B,z,re,se,ae,G,W,te=!1)=>{const Z=M&&M.children,ne=M?M.shapeFlag:0,ue=B.children,{patchFlag:ce,shapeFlag:de}=B;if(ce>0){if(ce&128){F(Z,ue,z,re,se,ae,G,W,te);return}else if(ce&256){X(Z,ue,z,re,se,ae,G,W,te);return}}de&8?(ne&16&&L(Z,se,ae),ue!==Z&&c(z,ue)):ne&16?de&16?F(Z,ue,z,re,se,ae,G,W,te):L(Z,se,ae,!0):(ne&8&&c(z,""),de&16&&I(ue,z,re,se,ae,G,W,te))},X=(M,B,z,re,se,ae,G,W,te)=>{M=M||rs,B=B||rs;const Z=M.length,ne=B.length,ue=Math.min(Z,ne);let ce;for(ce=0;ce<ue;ce++){const de=B[ce]=te?Dr(B[ce]):qn(B[ce]);g(M[ce],de,z,null,se,ae,G,W,te)}Z>ne?L(M,se,ae,!0,!1,ue):I(B,z,re,se,ae,G,W,te,ue)},F=(M,B,z,re,se,ae,G,W,te)=>{let Z=0;const ne=B.length;let ue=M.length-1,ce=ne-1;for(;Z<=ue&&Z<=ce;){const de=M[Z],_e=B[Z]=te?Dr(B[Z]):qn(B[Z]);if(vi(de,_e))g(de,_e,z,null,se,ae,G,W,te);else break;Z++}for(;Z<=ue&&Z<=ce;){const de=M[ue],_e=B[ce]=te?Dr(B[ce]):qn(B[ce]);if(vi(de,_e))g(de,_e,z,null,se,ae,G,W,te);else break;ue--,ce--}if(Z>ue){if(Z<=ce){const de=ce+1,_e=de<ne?B[de].el:re;for(;Z<=ce;)g(null,B[Z]=te?Dr(B[Z]):qn(B[Z]),z,_e,se,ae,G,W,te),Z++}}else if(Z>ce)for(;Z<=ue;)j(M[Z],se,ae,!0),Z++;else{const de=Z,_e=Z,Ie=new Map;for(Z=_e;Z<=ce;Z++){const et=B[Z]=te?Dr(B[Z]):qn(B[Z]);et.key!=null&&Ie.set(et.key,Z)}let me,He=0;const Te=ce-_e+1;let Ze=!1,ti=0;const nr=new Array(Te);for(Z=0;Z<Te;Z++)nr[Z]=0;for(Z=de;Z<=ue;Z++){const et=M[Z];if(He>=Te){j(et,se,ae,!0);continue}let Bt;if(et.key!=null)Bt=Ie.get(et.key);else for(me=_e;me<=ce;me++)if(nr[me-_e]===0&&vi(et,B[me])){Bt=me;break}Bt===void 0?j(et,se,ae,!0):(nr[Bt-_e]=Z+1,Bt>=ti?ti=Bt:Ze=!0,g(et,B[Bt],z,null,se,ae,G,W,te),He++)}const Sr=Ze?OT(nr):rs;for(me=Sr.length-1,Z=Te-1;Z>=0;Z--){const et=_e+Z,Bt=B[et],rr=et+1<ne?B[et+1].el:re;nr[Z]===0?g(null,Bt,z,rr,se,ae,G,W,te):Ze&&(me<0||Z!==Sr[me]?N(Bt,z,rr,2):me--)}}},N=(M,B,z,re,se=null)=>{const{el:ae,type:G,transition:W,children:te,shapeFlag:Z}=M;if(Z&6){N(M.component.subTree,B,z,re);return}if(Z&128){M.suspense.move(B,z,re);return}if(Z&64){G.move(M,B,z,$);return}if(G===pn){r(ae,B,z);for(let ue=0;ue<te.length;ue++)N(te[ue],B,z,re);r(M.anchor,B,z);return}if(G===uf){_(M,B,z);return}if(re!==2&&Z&1&&W)if(re===0)W.beforeEnter(ae),r(ae,B,z),Jt(()=>W.enter(ae),se);else{const{leave:ue,delayLeave:ce,afterLeave:de}=W,_e=()=>r(ae,B,z),Ie=()=>{ue(ae,()=>{_e(),de&&de()})};ce?ce(ae,_e,Ie):Ie()}else r(ae,B,z)},j=(M,B,z,re=!1,se=!1)=>{const{type:ae,props:G,ref:W,children:te,dynamicChildren:Z,shapeFlag:ne,patchFlag:ue,dirs:ce}=M;if(W!=null&&fh(W,null,z,M,!0),ne&256){B.ctx.deactivate(M);return}const de=ne&1&&ce,_e=!bo(M);let Ie;if(_e&&(Ie=G&&G.onVnodeBeforeUnmount)&&Fn(Ie,B,M),ne&6)K(M.component,z,re);else{if(ne&128){M.suspense.unmount(z,re);return}de&&ui(M,null,B,"beforeUnmount"),ne&64?M.type.remove(M,B,z,se,$,re):Z&&(ae!==pn||ue>0&&ue&64)?L(Z,B,z,!1,!0):(ae===pn&&ue&384||!se&&ne&16)&&L(te,B,z),re&&U(M)}(_e&&(Ie=G&&G.onVnodeUnmounted)||de)&&Jt(()=>{Ie&&Fn(Ie,B,M),de&&ui(M,null,B,"unmounted")},z)},U=M=>{const{type:B,el:z,anchor:re,transition:se}=M;if(B===pn){J(z,re);return}if(B===uf){y(M);return}const ae=()=>{i(z),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(M.shapeFlag&1&&se&&!se.persisted){const{leave:G,delayLeave:W}=se,te=()=>G(z,ae);W?W(M.el,ae,te):te()}else ae()},J=(M,B)=>{let z;for(;M!==B;)z=f(M),i(M),M=z;i(B)},K=(M,B,z)=>{const{bum:re,scope:se,update:ae,subTree:G,um:W}=M;re&&Tl(re),se.stop(),ae&&(ae.active=!1,j(G,M,B,z)),W&&Jt(W,B),Jt(()=>{M.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve())},L=(M,B,z,re=!1,se=!1,ae=0)=>{for(let G=ae;G<M.length;G++)j(M[G],B,z,re,se)},x=M=>M.shapeFlag&6?x(M.component.subTree):M.shapeFlag&128?M.suspense.next():f(M.anchor||M.el),V=(M,B,z)=>{M==null?B._vnode&&j(B._vnode,null,null,!0):g(B._vnode||null,M,B,null,null,null,z),Ag(),$y(),B._vnode=M},$={p:g,um:j,m:N,r:U,mt:D,mc:I,pc:ie,pbc:O,n:x,o:t};let ee,fe;return e&&([ee,fe]=e($)),{render:V,hydrate:ee,createApp:bT(V,ee)}}function ci({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function u0(t,e,n=!1){const r=t.children,i=e.children;if(we(r)&&we(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Dr(i[s]),a.el=o.el),n||u0(o,a)),a.type===Nu&&(a.el=o.el)}}function OT(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<u?s=a+1:o=a;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const kT=t=>t.__isTeleport,pn=Symbol.for("v-fgt"),Nu=Symbol.for("v-txt"),bn=Symbol.for("v-cmt"),uf=Symbol.for("v-stc"),wo=[];let Sn=null;function Qe(t=!1){wo.push(Sn=t?null:[])}function CT(){wo.pop(),Sn=wo[wo.length-1]||null}let Uo=1;function Mg(t){Uo+=t}function c0(t){return t.dynamicChildren=Uo>0?Sn||rs:null,CT(),Uo>0&&Sn&&Sn.push(t),t}function lt(t,e,n,r,i,s){return c0(Vn(t,e,n,r,i,s,!0))}function Ul(t,e,n,r,i){return c0(ut(t,e,n,r,i,!0))}function ql(t){return t?t.__v_isVNode===!0:!1}function vi(t,e){return t.type===e.type&&t.key===e.key}const Ru="__vInternal",f0=({key:t})=>t??null,Il=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Je(t)||Tt(t)||Ne(t)?{i:At,r:t,k:e,f:!!n}:t:null);function Vn(t,e=null,n=null,r=0,i=null,s=t===pn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&f0(e),ref:e&&Il(e),scopeId:Iu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:At};return a?(Id(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Je(n)?8:16),Uo>0&&!o&&Sn&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Sn.push(l),l}const ut=NT;function NT(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===Zy)&&(t=bn),ql(t)){const a=Gr(t,e,!0);return n&&Id(a,n),Uo>0&&!s&&Sn&&(a.shapeFlag&6?Sn[Sn.indexOf(t)]=a:Sn.push(a)),a.patchFlag|=-2,a}if($T(t)&&(t=t.__vccOpts),e){e=RT(e);let{class:a,style:l}=e;a&&!Je(a)&&(e.class=Un(a)),Ve(l)&&(Dy(l)&&!we(l)&&(l=st({},l)),e.style=ss(l))}const o=Je(t)?1:QE(t)?128:kT(t)?64:Ve(t)?4:Ne(t)?2:0;return Vn(t,e,n,r,i,o,s,!0)}function RT(t){return t?Dy(t)||Ru in t?st({},t):t:null}function Gr(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?xT(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&f0(a),ref:e&&e.ref?n&&i?we(i)?i.concat(Il(e)):[i,Il(e)]:Il(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==pn?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Gr(t.ssContent),ssFallback:t.ssFallback&&Gr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function PT(t=" ",e=0){return ut(Nu,null,t,e)}function cr(t="",e=!1){return e?(Qe(),Ul(bn,null,t)):ut(bn,null,t)}function qn(t){return t==null||typeof t=="boolean"?ut(bn):we(t)?ut(pn,null,t.slice()):typeof t=="object"?Dr(t):ut(Nu,null,String(t))}function Dr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Gr(t)}function Id(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(we(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Id(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Ru in e)?e._ctx=At:i===3&&At&&(At.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ne(e)?(e={default:e,_ctx:At},n=32):(e=String(e),r&64?(n=16,e=[PT(e)]):n=8);t.children=e,t.shapeFlag|=n}function xT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Un([e.class,r.class]));else if(i==="style")e.style=ss([e.style,r.style]);else if(yu(i)){const s=e[i],o=r[i];o&&s!==o&&!(we(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Fn(t,e,n,r=null){vn(t,e,7,[n,r])}const DT=r0();let LT=0;function MT(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||DT,s={uid:LT++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ey(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:s0(r,i),emitsOptions:Vy(r,i),emit:null,emitted:null,propsDefaults:ze,inheritAttrs:r.inheritAttrs,ctx:ze,data:ze,props:ze,attrs:ze,slots:ze,refs:ze,setupState:ze,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=$E.bind(null,s),t.ce&&t.ce(s),s}let dt=null;const Pu=()=>dt||At;let Sd,Xi,jg="__VUE_INSTANCE_SETTERS__";(Xi=Zf()[jg])||(Xi=Zf()[jg]=[]),Xi.push(t=>dt=t),Sd=t=>{Xi.length>1?Xi.forEach(e=>e(t)):Xi[0](t)};const ms=t=>{Sd(t),t.scope.on()},Si=()=>{dt&&dt.scope.off(),Sd(null)};function h0(t){return t.vnode.shapeFlag&4}let qo=!1;function jT(t,e=!1){qo=e;const{props:n,children:r}=t.vnode,i=h0(t);_T(t,n,i,e),TT(t,r);const s=i?FT(t,e):void 0;return qo=!1,s}function FT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Ly(new Proxy(t.ctx,hT));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?UT(t):null;ms(t),Ns();const s=$r(r,t,0,[t.props,i]);if(Rs(),Si(),vy(s)){if(s.then(Si,Si),e)return s.then(o=>{Fg(t,o,e)}).catch(o=>{Tu(o,t,0)});t.asyncDep=s}else Fg(t,s,e)}else d0(t,e)}function Fg(t,e,n){Ne(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ve(e)&&(t.setupState=By(e)),d0(t,n)}let Bg;function d0(t,e,n){const r=t.type;if(!t.render){if(!e&&Bg&&!r.render){const i=r.template||Td(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=st(st({isCustomElement:s,delimiters:a},o),l);r.render=Bg(i,u)}}t.render=r.render||kn}ms(t),Ns(),dT(t),Rs(),Si()}function BT(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return nn(t,"get","$attrs"),e[n]}}))}function UT(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return BT(t)},slots:t.slots,emit:t.emit,expose:e}}function xu(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(By(Ly(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in _o)return _o[n](t)},has(e,n){return n in e||n in _o}}))}function qT(t,e=!0){return Ne(t)?t.displayName||t.name:t.name||e&&t.__name}function $T(t){return Ne(t)&&"__vccOpts"in t}const Ht=(t,e)=>ME(t,e,qo);function Du(t,e,n){const r=arguments.length;return r===2?Ve(e)&&!we(e)?ql(e)?ut(t,null,[e]):ut(t,e):ut(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ql(n)&&(n=[n]),ut(t,e,n))}const HT=Symbol.for("v-scx"),VT=()=>yn(HT),Od="3.3.4",zT="http://www.w3.org/2000/svg",yi=typeof document<"u"?document:null,Ug=yi&&yi.createElement("template"),KT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?yi.createElementNS(zT,t):yi.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>yi.createTextNode(t),createComment:t=>yi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>yi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Ug.innerHTML=r?`<svg>${t}</svg>`:t;const a=Ug.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function WT(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function GT(t,e,n){const r=t.style,i=Je(n);if(n&&!i){if(e&&!Je(e))for(const s in e)n[s]==null&&hh(r,s,"");for(const s in n)hh(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const qg=/\s*!important$/;function hh(t,e,n){if(we(n))n.forEach(r=>hh(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=QT(t,e);qg.test(n)?t.setProperty(Mi(r),n.replace(qg,""),"important"):t[r]=n}}const $g=["Webkit","Moz","ms"],cf={};function QT(t,e){const n=cf[e];if(n)return n;let r=Jn(e);if(r!=="filter"&&r in t)return cf[e]=r;r=wu(r);for(let i=0;i<$g.length;i++){const s=$g[i]+r;if(s in t)return cf[e]=s}return e}const Hg="http://www.w3.org/1999/xlink";function YT(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Hg,e.slice(6,e.length)):t.setAttributeNS(Hg,e,n);else{const s=Zw(e);n==null||s&&!_y(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function XT(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const u=a==="OPTION"?t.getAttribute("value"):t.value,c=n??"";u!==c&&(t.value=c),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=_y(n):n==null&&u==="string"?(n="",l=!0):u==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Mr(t,e,n,r){t.addEventListener(e,n,r)}function JT(t,e,n,r){t.removeEventListener(e,n,r)}function ZT(t,e,n,r,i=null){const s=t._vei||(t._vei={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=eA(e);if(r){const u=s[e]=rA(r,i);Mr(t,a,u,l)}else o&&(JT(t,a,o,l),s[e]=void 0)}}const Vg=/(?:Once|Passive|Capture)$/;function eA(t){let e;if(Vg.test(t)){e={};let r;for(;r=t.match(Vg);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Mi(t.slice(2)),e]}let ff=0;const tA=Promise.resolve(),nA=()=>ff||(tA.then(()=>ff=0),ff=Date.now());function rA(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;vn(iA(r,n.value),e,5,[r])};return n.value=t,n.attached=nA(),n}function iA(t,e){if(we(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const zg=/^on[a-z]/,sA=(t,e,n,r,i=!1,s,o,a,l)=>{e==="class"?WT(t,r,i):e==="style"?GT(t,n,r):yu(e)?ld(e)||ZT(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):oA(t,e,r,i))?XT(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),YT(t,e,r,i))};function oA(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&zg.test(e)&&Ne(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||zg.test(e)&&Je(n)?!1:e in t}const Nr="transition",Js="animation",$o=(t,{slots:e})=>Du(tT,aA(t),e);$o.displayName="Transition";const p0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};$o.props=st({},Ky,p0);const fi=(t,e=[])=>{we(t)?t.forEach(n=>n(...e)):t&&t(...e)},Kg=t=>t?we(t)?t.some(e=>e.length>1):t.length>1:!1;function aA(t){const e={};for(const A in t)A in p0||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=t,p=lA(i),g=p&&p[0],b=p&&p[1],{onBeforeEnter:m,onEnter:v,onEnterCancelled:_,onLeave:y,onLeaveCancelled:E,onBeforeAppear:k=m,onAppear:S=v,onAppearCancelled:I=_}=e,R=(A,C,D)=>{hi(A,C?c:a),hi(A,C?u:o),D&&D()},O=(A,C)=>{A._isLeaving=!1,hi(A,h),hi(A,d),hi(A,f),C&&C()},T=A=>(C,D)=>{const q=A?S:v,Q=()=>R(C,A,D);fi(q,[C,Q]),Wg(()=>{hi(C,A?l:s),Rr(C,A?c:a),Kg(q)||Gg(C,r,g,Q)})};return st(e,{onBeforeEnter(A){fi(m,[A]),Rr(A,s),Rr(A,o)},onBeforeAppear(A){fi(k,[A]),Rr(A,l),Rr(A,u)},onEnter:T(!1),onAppear:T(!0),onLeave(A,C){A._isLeaving=!0;const D=()=>O(A,C);Rr(A,h),fA(),Rr(A,f),Wg(()=>{A._isLeaving&&(hi(A,h),Rr(A,d),Kg(y)||Gg(A,r,b,D))}),fi(y,[A,D])},onEnterCancelled(A){R(A,!1),fi(_,[A])},onAppearCancelled(A){R(A,!0),fi(I,[A])},onLeaveCancelled(A){O(A),fi(E,[A])}})}function lA(t){if(t==null)return null;if(Ve(t))return[hf(t.enter),hf(t.leave)];{const e=hf(t);return[e,e]}}function hf(t){return Ww(t)}function Rr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function hi(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function Wg(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let uA=0;function Gg(t,e,n,r){const i=t._endId=++uA,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=cA(t,e);if(!o)return r();const u=o+"end";let c=0;const h=()=>{t.removeEventListener(u,f),s()},f=d=>{d.target===t&&++c>=l&&h()};setTimeout(()=>{c<l&&h()},a+1),t.addEventListener(u,f)}function cA(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${Nr}Delay`),s=r(`${Nr}Duration`),o=Qg(i,s),a=r(`${Js}Delay`),l=r(`${Js}Duration`),u=Qg(a,l);let c=null,h=0,f=0;e===Nr?o>0&&(c=Nr,h=o,f=s.length):e===Js?u>0&&(c=Js,h=u,f=l.length):(h=Math.max(o,u),c=h>0?o>u?Nr:Js:null,f=c?c===Nr?s.length:l.length:0);const d=c===Nr&&/\b(transform|all)(,|$)/.test(r(`${Nr}Property`).toString());return{type:c,timeout:h,propCount:f,hasTransform:d}}function Qg(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Yg(n)+Yg(t[r])))}function Yg(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function fA(){return document.body.offsetHeight}const vs=t=>{const e=t.props["onUpdate:modelValue"]||!1;return we(e)?n=>Tl(e,n):e};function hA(t){t.target.composing=!0}function Xg(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const KM={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=vs(i);const s=r||i.props&&i.props.type==="number";Mr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Ll(a)),t._assign(a)}),n&&Mr(t,"change",()=>{t.value=t.value.trim()}),e||(Mr(t,"compositionstart",hA),Mr(t,"compositionend",Xg),Mr(t,"change",Xg))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t._assign=vs(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&Ll(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},WM={created(t,{value:e},n){t.checked=ps(e,n.props.value),t._assign=vs(n),Mr(t,"change",()=>{t._assign(Ho(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=vs(r),e!==n&&(t.checked=ps(e,r.props.value))}},GM={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=bu(e);Mr(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Ll(Ho(o)):Ho(o));t._assign(t.multiple?i?new Set(s):s:s[0])}),t._assign=vs(r)},mounted(t,{value:e}){Jg(t,e)},beforeUpdate(t,e,n){t._assign=vs(n)},updated(t,{value:e}){Jg(t,e)}};function Jg(t,e){const n=t.multiple;if(!(n&&!we(e)&&!bu(e))){for(let r=0,i=t.options.length;r<i;r++){const s=t.options[r],o=Ho(s);if(n)we(e)?s.selected=tE(e,o)>-1:s.selected=e.has(o);else if(ps(Ho(s),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ho(t){return"_value"in t?t._value:t.value}const dA=["ctrl","shift","alt","meta"],pA={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>dA.some(n=>t[`${n}Key`]&&!e.includes(n))},Xt=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const s=pA[e[i]];if(s&&s(n,e))return}return t(n,...r)},gA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},mA=(t,e)=>n=>{if(!("key"in n))return;const r=Mi(n.key);if(e.some(i=>i===r||gA[i]===r))return t(n)},vA=st({patchProp:sA},KT);let Zg;function yA(){return Zg||(Zg=IT(vA))}const bA=(...t)=>{const e=yA().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=_A(r);if(!i)return;const s=e._component;!Ne(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function _A(t){return Je(t)?document.querySelector(t):t}const kd=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},wA={},EA={class:"loader"},TA=Vn("span",null,[Vn("i",{class:"fa-solid fa-spinner"})],-1),AA=[TA];function IA(t,e){return Qe(),lt("div",EA,AA)}const SA=kd(wA,[["render",IA]]),OA=""+new URL("loka.dev-light-db9eaf19.png",import.meta.url).href,kA=""+new URL("emt-a5eecabf.png",import.meta.url).href;function $l(t){return Ty()?(iE(t),!0):!1}function g0(t){let e=!1,n;const r=nE(!0);return(...i)=>(e||(n=r.run(()=>t(...i)),e=!0),n)}function m0(t){return typeof t=="function"?t():Vt(t)}const dh=typeof window<"u",em=()=>+Date.now();function CA(t,e=1e3,n={}){const{immediate:r=!0,immediateCallback:i=!1}=n;let s=null;const o=pt(!1);function a(){s&&(clearInterval(s),s=null)}function l(){o.value=!1,a()}function u(){const c=m0(e);c<=0||(o.value=!0,i&&t(),a(),s=setInterval(t,c))}if(r&&dh&&u(),Tt(e)||typeof e=="function"){const c=Cn(e,()=>{o.value&&dh&&u()});$l(c)}return $l(l),{isActive:o,pause:l,resume:u}}function Eo(t){var e;const n=m0(t);return(e=n==null?void 0:n.$el)!=null?e:n}const Cd=dh?window:void 0;function NA(){const t=pt(!1);return Pu()&&ku(()=>{t.value=!0}),t}function RA(t){const e=NA();return Ht(()=>(e.value,!!t()))}function PA(t,e={}){const{immediate:n=!0,window:r=Cd}=e,i=pt(!1);let s=0,o=null;function a(c){if(!i.value||!r)return;const h=c-s;t({delta:h,timestamp:c}),s=c,o=r.requestAnimationFrame(a)}function l(){!i.value&&r&&(i.value=!0,o=r.requestAnimationFrame(a))}function u(){i.value=!1,o!=null&&r&&(r.cancelAnimationFrame(o),o=null)}return n&&l(),$l(u),{isActive:md(i),pause:u,resume:l}}var tm=Object.getOwnPropertySymbols,xA=Object.prototype.hasOwnProperty,DA=Object.prototype.propertyIsEnumerable,LA=(t,e)=>{var n={};for(var r in t)xA.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&tm)for(var r of tm(t))e.indexOf(r)<0&&DA.call(t,r)&&(n[r]=t[r]);return n};function MA(t,e,n={}){const r=n,{window:i=Cd}=r,s=LA(r,["window"]);let o;const a=RA(()=>i&&"ResizeObserver"in i),l=()=>{o&&(o.disconnect(),o=void 0)},u=Ht(()=>Array.isArray(t)?t.map(f=>Eo(f)):[Eo(t)]),c=Cn(u,f=>{if(l(),a.value&&i){o=new ResizeObserver(e);for(const d of f)d&&o.observe(d,s)}},{immediate:!0,flush:"post",deep:!0}),h=()=>{l(),c()};return $l(h),{isSupported:a,stop:h}}function QM(t,e={width:0,height:0},n={}){const{window:r=Cd,box:i="content-box"}=n,s=Ht(()=>{var l,u;return(u=(l=Eo(t))==null?void 0:l.namespaceURI)==null?void 0:u.includes("svg")}),o=pt(e.width),a=pt(e.height);return MA(t,([l])=>{const u=i==="border-box"?l.borderBoxSize:i==="content-box"?l.contentBoxSize:l.devicePixelContentBoxSize;if(r&&s.value){const c=Eo(t);if(c){const h=r.getComputedStyle(c);o.value=parseFloat(h.width),a.value=parseFloat(h.height)}}else if(u){const c=Array.isArray(u)?u:[u];o.value=c.reduce((h,{inlineSize:f})=>h+f,0),a.value=c.reduce((h,{blockSize:f})=>h+f,0)}else o.value=l.contentRect.width,a.value=l.contentRect.height},n),Cn(()=>Eo(t),l=>{o.value=l?e.width:0,a.value=l?e.height:0}),{width:o,height:a}}var jA=Object.defineProperty,nm=Object.getOwnPropertySymbols,FA=Object.prototype.hasOwnProperty,BA=Object.prototype.propertyIsEnumerable,rm=(t,e,n)=>e in t?jA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,UA=(t,e)=>{for(var n in e||(e={}))FA.call(e,n)&&rm(t,n,e[n]);if(nm)for(var n of nm(e))BA.call(e,n)&&rm(t,n,e[n]);return t};function fr(t={}){const{controls:e=!1,offset:n=0,immediate:r=!0,interval:i="requestAnimationFrame",callback:s}=t,o=pt(em()+n),a=()=>o.value=em()+n,l=s?()=>{a(),s(o.value)}:a,u=i==="requestAnimationFrame"?PA(l,{immediate:r}):CA(l,i,{immediate:r});return e?UA({timestamp:o},u):o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},qA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,d=u&63;l||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new $A;const f=s<<2|a>>4;if(r.push(f),u!==64){const d=a<<4&240|u>>2;if(r.push(d),h!==64){const p=u<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $A extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HA=function(t){const e=v0(t);return y0.encodeByteArray(e,!0)},Hl=function(t){return HA(t).replace(/\./g,"")},b0=function(t){try{return y0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=()=>VA().__FIREBASE_DEFAULTS__,KA=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&b0(t[1]);return e&&JSON.parse(e)},Lu=()=>{try{return zA()||KA()||WA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_0=t=>{var e,n;return(n=(e=Lu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},GA=t=>{const e=_0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},w0=()=>{var t;return(t=Lu())===null||t===void 0?void 0:t.config},E0=t=>{var e;return(e=Lu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Hl(JSON.stringify(n)),Hl(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function YM(){var t;const e=(t=Lu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZA(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A0(){try{return typeof indexedDB=="object"}catch{return!1}}function I0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function eI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="FirebaseError";class Dn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tI,Object.setPrototypeOf(this,Dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ji.prototype.create)}}class ji{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?nI(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Dn(i,a,r)}}function nI(t,e){return t.replace(rI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const rI=/\{\$([^}]+)}/g;function iI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(im(s)&&im(o)){if(!Vo(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function im(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function sI(t,e){const n=new oI(t,e);return n.subscribe.bind(n)}class oI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=df),i.error===void 0&&(i.error=df),i.complete===void 0&&(i.complete=df);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function df(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=1e3,uI=2,cI=4*60*60*1e3,fI=.5;function sm(t,e=lI,n=uI){const r=e*Math.pow(n,t),i=Math.round(fI*r*(Math.random()-.5)*2);return Math.min(cI,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t){return t&&t._delegate?t._delegate:t}class Nn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new QA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pI(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dI(t){return t===gi?void 0:t}function pI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Me||(Me={}));const mI={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},vI=Me.INFO,yI={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},bI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=yI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mu{constructor(e){this.name=e,this._logLevel=vI,this._logHandler=bI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const _I=(t,e)=>e.some(n=>t instanceof n);let om,am;function wI(){return om||(om=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EI(){return am||(am=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S0=new WeakMap,ph=new WeakMap,O0=new WeakMap,pf=new WeakMap,Nd=new WeakMap;function TI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&S0.set(n,t)}).catch(()=>{}),Nd.set(e,t),e}function AI(t){if(ph.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ph.set(t,e)}let gh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ph.get(t);if(e==="objectStoreNames")return t.objectStoreNames||O0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function II(t){gh=t(gh)}function SI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gf(this),e,...n);return O0.set(r,e.sort?e.sort():[e]),Hr(r)}:EI().includes(t)?function(...e){return t.apply(gf(this),e),Hr(S0.get(this))}:function(...e){return Hr(t.apply(gf(this),e))}}function OI(t){return typeof t=="function"?SI(t):(t instanceof IDBTransaction&&AI(t),_I(t,wI())?new Proxy(t,gh):t)}function Hr(t){if(t instanceof IDBRequest)return TI(t);if(pf.has(t))return pf.get(t);const e=OI(t);return e!==t&&(pf.set(t,e),Nd.set(e,t)),e}const gf=t=>Nd.get(t);function kI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Hr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Hr(o.result),l.oldVersion,l.newVersion,Hr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const CI=["get","getKey","getAll","getAllKeys","count"],NI=["put","add","delete","clear"],mf=new Map;function lm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mf.get(e))return mf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=NI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||CI.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return mf.set(e,s),s}II(t=>({...t,get:(e,n,r)=>lm(e,n)||t.get(e,n,r),has:(e,n)=>!!lm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mh="@firebase/app",um="0.9.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new Mu("@firebase/app"),xI="@firebase/app-compat",DI="@firebase/analytics-compat",LI="@firebase/analytics",MI="@firebase/app-check-compat",jI="@firebase/app-check",FI="@firebase/auth",BI="@firebase/auth-compat",UI="@firebase/database",qI="@firebase/database-compat",$I="@firebase/functions",HI="@firebase/functions-compat",VI="@firebase/installations",zI="@firebase/installations-compat",KI="@firebase/messaging",WI="@firebase/messaging-compat",GI="@firebase/performance",QI="@firebase/performance-compat",YI="@firebase/remote-config",XI="@firebase/remote-config-compat",JI="@firebase/storage",ZI="@firebase/storage-compat",eS="@firebase/firestore",tS="@firebase/firestore-compat",nS="firebase",rS="9.22.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="[DEFAULT]",iS={[mh]:"fire-core",[xI]:"fire-core-compat",[LI]:"fire-analytics",[DI]:"fire-analytics-compat",[jI]:"fire-app-check",[MI]:"fire-app-check-compat",[FI]:"fire-auth",[BI]:"fire-auth-compat",[UI]:"fire-rtdb",[qI]:"fire-rtdb-compat",[$I]:"fire-fn",[HI]:"fire-fn-compat",[VI]:"fire-iid",[zI]:"fire-iid-compat",[KI]:"fire-fcm",[WI]:"fire-fcm-compat",[GI]:"fire-perf",[QI]:"fire-perf-compat",[YI]:"fire-rc",[XI]:"fire-rc-compat",[JI]:"fire-gcs",[ZI]:"fire-gcs-compat",[eS]:"fire-fst",[tS]:"fire-fst-compat","fire-js":"fire-js",[nS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=new Map,yh=new Map;function sS(t,e){try{t.container.addComponent(e)}catch(n){Ci.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zn(t){const e=t.name;if(yh.has(e))return Ci.debug(`There were multiple attempts to register component ${e}.`),!1;yh.set(e,t);for(const n of Vl.values())sS(n,t);return!0}function Fi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Vr=new ji("app","Firebase",oS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=rS;function k0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vr.create("bad-app-name",{appName:String(i)});if(n||(n=w0()),!n)throw Vr.create("no-options");const s=Vl.get(i);if(s){if(Vo(n,s.options)&&Vo(r,s.config))return s;throw Vr.create("duplicate-app",{appName:i})}const o=new gI(i);for(const l of yh.values())o.addComponent(l);const a=new aS(n,r,o);return Vl.set(i,a),a}function Rd(t=vh){const e=Vl.get(t);if(!e&&t===vh&&w0())return k0();if(!e)throw Vr.create("no-app",{appName:t});return e}function _n(t,e,n){var r;let i=(r=iS[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ci.warn(a.join(" "));return}Zn(new Nn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="firebase-heartbeat-database",uS=1,zo="firebase-heartbeat-store";let vf=null;function C0(){return vf||(vf=kI(lS,uS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(zo)}}}).catch(t=>{throw Vr.create("idb-open",{originalErrorMessage:t.message})})),vf}async function cS(t){try{return await(await C0()).transaction(zo).objectStore(zo).get(N0(t))}catch(e){if(e instanceof Dn)Ci.warn(e.message);else{const n=Vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ci.warn(n.message)}}}async function cm(t,e){try{const r=(await C0()).transaction(zo,"readwrite");await r.objectStore(zo).put(e,N0(t)),await r.done}catch(n){if(n instanceof Dn)Ci.warn(n.message);else{const r=Vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ci.warn(r.message)}}}function N0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=1024,hS=30*24*60*60*1e3;class dS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fm();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=hS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=fm(),{heartbeatsToSend:n,unsentEntries:r}=pS(this._heartbeatsCache.heartbeats),i=Hl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function fm(){return new Date().toISOString().substring(0,10)}function pS(t,e=fS){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),hm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A0()?I0().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await cS(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return cm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return cm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function hm(t){return Hl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t){Zn(new Nn("platform-logger",e=>new RI(e),"PRIVATE")),Zn(new Nn("heartbeat",e=>new dS(e),"PRIVATE")),_n(mh,um,t),_n(mh,um,"esm2017"),_n("fire-js","")}mS("");var vS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pe,Pd=Pd||{},Ae=vS||self;function ju(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function da(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function yS(t){return Object.prototype.hasOwnProperty.call(t,yf)&&t[yf]||(t[yf]=++bS)}var yf="closure_uid_"+(1e9*Math.random()>>>0),bS=0;function _S(t,e,n){return t.call.apply(t.bind,arguments)}function wS(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Dt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Dt=_S:Dt=wS,Dt.apply(null,arguments)}function ol(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function mt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Jr(){this.s=this.s,this.o=this.o}var ES=0;Jr.prototype.s=!1;Jr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ES!=0)&&yS(this)};Jr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const R0=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function xd(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function dm(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ju(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Lt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Lt.prototype.h=function(){this.defaultPrevented=!0};var TS=function(){if(!Ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ae.addEventListener("test",()=>{},e),Ae.removeEventListener("test",()=>{},e)}catch{}return t}();function Ko(t){return/^[\s\xa0]*$/.test(t)}function Fu(){var t=Ae.navigator;return t&&(t=t.userAgent)?t:""}function Hn(t){return Fu().indexOf(t)!=-1}function Dd(t){return Dd[" "](t),t}Dd[" "]=function(){};function AS(t,e){var n=mO;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var IS=Hn("Opera"),ys=Hn("Trident")||Hn("MSIE"),P0=Hn("Edge"),bh=P0||ys,x0=Hn("Gecko")&&!(Fu().toLowerCase().indexOf("webkit")!=-1&&!Hn("Edge"))&&!(Hn("Trident")||Hn("MSIE"))&&!Hn("Edge"),SS=Fu().toLowerCase().indexOf("webkit")!=-1&&!Hn("Edge");function D0(){var t=Ae.document;return t?t.documentMode:void 0}var _h;e:{var bf="",_f=function(){var t=Fu();if(x0)return/rv:([^\);]+)(\)|;)/.exec(t);if(P0)return/Edge\/([\d\.]+)/.exec(t);if(ys)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(SS)return/WebKit\/(\S+)/.exec(t);if(IS)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(_f&&(bf=_f?_f[1]:""),ys){var wf=D0();if(wf!=null&&wf>parseFloat(bf)){_h=String(wf);break e}}_h=bf}var wh;if(Ae.document&&ys){var pm=D0();wh=pm||parseInt(_h,10)||void 0}else wh=void 0;var OS=wh;function Wo(t,e){if(Lt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(x0){e:{try{Dd(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:kS[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Wo.$.h.call(this)}}mt(Wo,Lt);var kS={2:"touch",3:"pen",4:"mouse"};Wo.prototype.h=function(){Wo.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var pa="closure_listenable_"+(1e6*Math.random()|0),CS=0;function NS(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++CS,this.fa=this.ia=!1}function Bu(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Ld(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function RS(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function L0(t){const e={};for(const n in t)e[n]=t[n];return e}const gm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M0(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<gm.length;s++)n=gm[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Uu(t){this.src=t,this.g={},this.h=0}Uu.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Th(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new NS(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Eh(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=R0(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Bu(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Th(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Md="closure_lm_"+(1e6*Math.random()|0),Ef={};function j0(t,e,n,r,i){if(r&&r.once)return B0(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)j0(t,e[s],n,r,i);return null}return n=Bd(n),t&&t[pa]?t.O(e,n,da(r)?!!r.capture:!!r,i):F0(t,e,n,!1,r,i)}function F0(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=da(i)?!!i.capture:!!i,a=Fd(t);if(a||(t[Md]=a=new Uu(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=PS(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)TS||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(q0(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function PS(){function t(n){return e.call(t.src,t.listener,n)}const e=xS;return t}function B0(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)B0(t,e[s],n,r,i);return null}return n=Bd(n),t&&t[pa]?t.P(e,n,da(r)?!!r.capture:!!r,i):F0(t,e,n,!0,r,i)}function U0(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)U0(t,e[s],n,r,i);else r=da(r)?!!r.capture:!!r,n=Bd(n),t&&t[pa]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Th(s,n,r,i),-1<n&&(Bu(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Fd(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Th(e,n,r,i)),(n=-1<t?e[t]:null)&&jd(n))}function jd(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[pa])Eh(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(q0(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Fd(e))?(Eh(n,t),n.h==0&&(n.src=null,e[Md]=null)):Bu(t)}}}function q0(t){return t in Ef?Ef[t]:Ef[t]="on"+t}function xS(t,e){if(t.fa)t=!0;else{e=new Wo(e,this);var n=t.listener,r=t.la||t.src;t.ia&&jd(t),t=n.call(r,e)}return t}function Fd(t){return t=t[Md],t instanceof Uu?t:null}var Tf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bd(t){return typeof t=="function"?t:(t[Tf]||(t[Tf]=function(e){return t.handleEvent(e)}),t[Tf])}function gt(){Jr.call(this),this.i=new Uu(this),this.S=this,this.J=null}mt(gt,Jr);gt.prototype[pa]=!0;gt.prototype.removeEventListener=function(t,e,n,r){U0(this,t,e,n,r)};function It(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Lt(e,t);else if(e instanceof Lt)e.target=e.target||t;else{var i=e;e=new Lt(r,t),M0(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=al(o,r,!0,e)&&i}if(o=e.g=t,i=al(o,r,!0,e)&&i,i=al(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=al(o,r,!1,e)&&i}gt.prototype.N=function(){if(gt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bu(n[r]);delete t.g[e],t.h--}}this.J=null};gt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};gt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function al(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Eh(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Ud=Ae.JSON.stringify;class DS{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function LS(){var t=qd;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class MS{constructor(){this.h=this.g=null}add(e,n){const r=$0.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var $0=new DS(()=>new jS,t=>t.reset());class jS{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function FS(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function BS(t){Ae.setTimeout(()=>{throw t},0)}let Go,Qo=!1,qd=new MS,H0=()=>{const t=Ae.Promise.resolve(void 0);Go=()=>{t.then(US)}};var US=()=>{for(var t;t=LS();){try{t.h.call(t.g)}catch(n){BS(n)}var e=$0;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Qo=!1};function qu(t,e){gt.call(this),this.h=t||1,this.g=e||Ae,this.j=Dt(this.qb,this),this.l=Date.now()}mt(qu,gt);pe=qu.prototype;pe.ga=!1;pe.T=null;pe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),It(this,"tick"),this.ga&&($d(this),this.start()))}};pe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function $d(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}pe.N=function(){qu.$.N.call(this),$d(this),delete this.g};function Hd(t,e,n){if(typeof t=="function")n&&(t=Dt(t,n));else if(t&&typeof t.handleEvent=="function")t=Dt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ae.setTimeout(t,e||0)}function V0(t){t.g=Hd(()=>{t.g=null,t.i&&(t.i=!1,V0(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class qS extends Jr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:V0(this)}N(){super.N(),this.g&&(Ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yo(t){Jr.call(this),this.h=t,this.g={}}mt(Yo,Jr);var mm=[];function z0(t,e,n,r){Array.isArray(n)||(n&&(mm[0]=n.toString()),n=mm);for(var i=0;i<n.length;i++){var s=j0(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function K0(t){Ld(t.g,function(e,n){this.g.hasOwnProperty(n)&&jd(e)},t),t.g={}}Yo.prototype.N=function(){Yo.$.N.call(this),K0(this)};Yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function $u(){this.g=!0}$u.prototype.Ea=function(){this.g=!1};function $S(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function HS(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function ns(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+zS(t,n)+(r?" "+r:"")})}function VS(t,e){t.info(function(){return"TIMEOUT: "+e})}$u.prototype.info=function(){};function zS(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Ud(n)}catch{return e}}var Bi={},vm=null;function Hu(){return vm=vm||new gt}Bi.Ta="serverreachability";function W0(t){Lt.call(this,Bi.Ta,t)}mt(W0,Lt);function Xo(t){const e=Hu();It(e,new W0(e))}Bi.STAT_EVENT="statevent";function G0(t,e){Lt.call(this,Bi.STAT_EVENT,t),this.stat=e}mt(G0,Lt);function zt(t){const e=Hu();It(e,new G0(e,t))}Bi.Ua="timingevent";function Q0(t,e){Lt.call(this,Bi.Ua,t),this.size=e}mt(Q0,Lt);function ga(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ae.setTimeout(function(){t()},e)}var Vu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Y0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Vd(){}Vd.prototype.h=null;function ym(t){return t.h||(t.h=t.i())}function X0(){}var ma={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function zd(){Lt.call(this,"d")}mt(zd,Lt);function Kd(){Lt.call(this,"c")}mt(Kd,Lt);var Ah;function zu(){}mt(zu,Vd);zu.prototype.g=function(){return new XMLHttpRequest};zu.prototype.i=function(){return{}};Ah=new zu;function va(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Yo(this),this.P=KS,t=bh?125:void 0,this.V=new qu(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new J0}function J0(){this.i=null,this.g="",this.h=!1}var KS=45e3,Ih={},zl={};pe=va.prototype;pe.setTimeout=function(t){this.P=t};function Sh(t,e,n){t.L=1,t.v=Wu(yr(e)),t.s=n,t.S=!0,Z0(t,null)}function Z0(t,e){t.G=Date.now(),ya(t),t.A=yr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),ab(n.i,"t",r),t.C=0,n=t.l.J,t.h=new J0,t.g=kb(t.l,n?e:null,!t.s),0<t.O&&(t.M=new qS(Dt(t.Pa,t,t.g),t.O)),z0(t.U,t.g,"readystatechange",t.nb),e=t.I?L0(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Xo(),$S(t.j,t.u,t.A,t.m,t.W,t.s)}pe.nb=function(t){t=t.target;const e=this.M;e&&zn(t)==3?e.l():this.Pa(t)};pe.Pa=function(t){try{if(t==this.g)e:{const c=zn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||bh||this.g&&(this.h.h||this.g.ja()||Em(this.g)))){this.J||c!=4||e==7||(e==8||0>=h?Xo(3):Xo(2)),Ku(this);var n=this.g.da();this.ca=n;t:if(eb(this)){var r=Em(this.g);t="";var i=r.length,s=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),To(this);var o="";break t}this.h.i=new Ae.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,HS(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ko(a)){var u=a;break t}}u=null}if(n=u)ns(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oh(this,n);else{this.i=!1,this.o=3,zt(12),_i(this),To(this);break e}}this.S?(tb(this,c,o),bh&&this.i&&c==3&&(z0(this.U,this.V,"tick",this.mb),this.V.start())):(ns(this.j,this.m,o,null),Oh(this,o)),c==4&&_i(this),this.i&&!this.J&&(c==4?Ab(this.l,this):(this.i=!1,ya(this)))}else dO(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,zt(12)):(this.o=0,zt(13)),_i(this),To(this)}}}catch{}finally{}};function eb(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function tb(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=WS(t,n),i==zl){e==4&&(t.o=4,zt(14),r=!1),ns(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Ih){t.o=4,zt(15),ns(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ns(t.j,t.m,i,null),Oh(t,i);eb(t)&&i!=zl&&i!=Ih&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,zt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jd(e),e.M=!0,zt(11))):(ns(t.j,t.m,n,"[Invalid Chunked Response]"),_i(t),To(t))}pe.mb=function(){if(this.g){var t=zn(this.g),e=this.g.ja();this.C<e.length&&(Ku(this),tb(this,t,e),this.i&&t!=4&&ya(this))}};function WS(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?zl:(n=Number(e.substring(n,r)),isNaN(n)?Ih:(r+=1,r+n>e.length?zl:(e=e.slice(r,r+n),t.C=r+n,e)))}pe.cancel=function(){this.J=!0,_i(this)};function ya(t){t.Y=Date.now()+t.P,nb(t,t.P)}function nb(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=ga(Dt(t.lb,t),e)}function Ku(t){t.B&&(Ae.clearTimeout(t.B),t.B=null)}pe.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(VS(this.j,this.A),this.L!=2&&(Xo(),zt(17)),_i(this),this.o=2,To(this)):nb(this,this.Y-t)};function To(t){t.l.H==0||t.J||Ab(t.l,t)}function _i(t){Ku(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,$d(t.V),K0(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Oh(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||kh(n.i,t))){if(!t.K&&kh(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Gl(n),Yu(n);else break e;Xd(n),zt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=ga(Dt(n.ib,n),6e3));if(1>=cb(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else wi(n,11)}else if((t.K||n.g==t)&&Gl(n),!Ko(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=t.g;if(d){const p=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Wd(s,s.h),s.h=null))}if(r.F){const g=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,Ke(r.I,r.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Ob(r,r.J?r.pa:null,r.Y),o.K){fb(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Ku(a),ya(a)),r.g=o}else Eb(r);0<n.j.length&&Xu(n)}else u[0]!="stop"&&u[0]!="close"||wi(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?wi(n,7):Yd(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Xo(4)}catch{}}function GS(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(ju(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function QS(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ju(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function rb(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ju(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=QS(t),r=GS(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var ib=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YS(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Oi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Oi){this.h=t.h,Kl(this,t.j),this.s=t.s,this.g=t.g,Wl(this,t.m),this.l=t.l;var e=t.i,n=new Jo;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),bm(this,n),this.o=t.o}else t&&(e=String(t).match(ib))?(this.h=!1,Kl(this,e[1]||"",!0),this.s=po(e[2]||""),this.g=po(e[3]||"",!0),Wl(this,e[4]),this.l=po(e[5]||"",!0),bm(this,e[6]||"",!0),this.o=po(e[7]||"")):(this.h=!1,this.i=new Jo(null,this.h))}Oi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(go(e,_m,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(go(e,_m,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(go(n,n.charAt(0)=="/"?ZS:JS,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",go(n,tO)),t.join("")};function yr(t){return new Oi(t)}function Kl(t,e,n){t.j=n?po(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Wl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function bm(t,e,n){e instanceof Jo?(t.i=e,nO(t.i,t.h)):(n||(e=go(e,eO)),t.i=new Jo(e,t.h))}function Ke(t,e,n){t.i.set(e,n)}function Wu(t){return Ke(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function po(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function go(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,XS),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function XS(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var _m=/[#\/\?@]/g,JS=/[#\?:]/g,ZS=/[#\?]/g,eO=/[#\?@]/g,tO=/#/g;function Jo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Zr(t){t.g||(t.g=new Map,t.h=0,t.i&&YS(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}pe=Jo.prototype;pe.add=function(t,e){Zr(this),this.i=null,t=xs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function sb(t,e){Zr(t),e=xs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ob(t,e){return Zr(t),e=xs(t,e),t.g.has(e)}pe.forEach=function(t,e){Zr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};pe.ta=function(){Zr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};pe.Z=function(t){Zr(this);let e=[];if(typeof t=="string")ob(this,t)&&(e=e.concat(this.g.get(xs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};pe.set=function(t,e){return Zr(this),this.i=null,t=xs(this,t),ob(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};pe.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function ab(t,e,n){sb(t,e),0<n.length&&(t.i=null,t.g.set(xs(t,e),xd(n)),t.h+=n.length)}pe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function xs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function nO(t,e){e&&!t.j&&(Zr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(sb(this,r),ab(this,i,n))},t)),t.j=e}var rO=class{constructor(t,e){this.g=t,this.map=e}};function lb(t){this.l=t||iO,Ae.PerformanceNavigationTiming?(t=Ae.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ae.g&&Ae.g.Ka&&Ae.g.Ka()&&Ae.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var iO=10;function ub(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function cb(t){return t.h?1:t.g?t.g.size:0}function kh(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Wd(t,e){t.g?t.g.add(e):t.h=e}function fb(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}lb.prototype.cancel=function(){if(this.i=hb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function hb(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return xd(t.i)}var sO=class{stringify(t){return Ae.JSON.stringify(t,void 0)}parse(t){return Ae.JSON.parse(t,void 0)}};function oO(){this.g=new sO}function aO(t,e,n){const r=n||"";try{rb(t,function(i,s){let o=i;da(i)&&(o=Ud(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function lO(t,e){const n=new $u;if(Ae.Image){const r=new Image;r.onload=ol(ll,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ol(ll,n,r,"TestLoadImage: error",!1,e),r.onabort=ol(ll,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ol(ll,n,r,"TestLoadImage: timeout",!1,e),Ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ll(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ba(t){this.l=t.fc||null,this.j=t.ob||!1}mt(ba,Vd);ba.prototype.g=function(){return new Gu(this.l,this.j)};ba.prototype.i=function(t){return function(){return t}}({});function Gu(t,e){gt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Gd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mt(Gu,gt);var Gd=0;pe=Gu.prototype;pe.open=function(t,e){if(this.readyState!=Gd)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Zo(this)};pe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ae).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};pe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_a(this)),this.readyState=Gd};pe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Zo(this)),this.g&&(this.readyState=3,Zo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ae.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;db(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function db(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}pe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_a(this):Zo(this),this.readyState==3&&db(this)}};pe.Za=function(t){this.g&&(this.response=this.responseText=t,_a(this))};pe.Ya=function(t){this.g&&(this.response=t,_a(this))};pe.ka=function(){this.g&&_a(this)};function _a(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Zo(t)}pe.setRequestHeader=function(t,e){this.v.append(t,e)};pe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};pe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Zo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var uO=Ae.JSON.parse;function Xe(t){gt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=pb,this.L=this.M=!1}mt(Xe,gt);var pb="",cO=/^https?$/i,fO=["POST","PUT"];pe=Xe.prototype;pe.Oa=function(t){this.M=t};pe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ah.g(),this.C=this.u?ym(this.u):ym(Ah),this.g.onreadystatechange=Dt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){wm(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Ae.FormData&&t instanceof Ae.FormData,!(0<=R0(fO,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{vb(this),0<this.B&&((this.L=hO(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dt(this.ua,this)):this.A=Hd(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){wm(this,s)}};function hO(t){return ys&&typeof t.timeout=="number"&&t.ontimeout!==void 0}pe.ua=function(){typeof Pd<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,It(this,"timeout"),this.abort(8))};function wm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,gb(t),Qu(t)}function gb(t){t.F||(t.F=!0,It(t,"complete"),It(t,"error"))}pe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,It(this,"complete"),It(this,"abort"),Qu(this))};pe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qu(this,!0)),Xe.$.N.call(this)};pe.La=function(){this.s||(this.G||this.v||this.l?mb(this):this.kb())};pe.kb=function(){mb(this)};function mb(t){if(t.h&&typeof Pd<"u"&&(!t.C[1]||zn(t)!=4||t.da()!=2)){if(t.v&&zn(t)==4)Hd(t.La,0,t);else if(It(t,"readystatechange"),zn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(ib)[1]||null;!i&&Ae.self&&Ae.self.location&&(i=Ae.self.location.protocol.slice(0,-1)),r=!cO.test(i?i.toLowerCase():"")}n=r}if(n)It(t,"complete"),It(t,"success");else{t.m=6;try{var s=2<zn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",gb(t)}}finally{Qu(t)}}}}function Qu(t,e){if(t.g){vb(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||It(t,"ready");try{n.onreadystatechange=r}catch{}}}function vb(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ae.clearTimeout(t.A),t.A=null)}pe.isActive=function(){return!!this.g};function zn(t){return t.g?t.g.readyState:0}pe.da=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}};pe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};pe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),uO(e)}};function Em(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case pb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function dO(t){const e={};t=(t.g&&2<=zn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ko(t[r]))continue;var n=FS(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}RS(e,function(r){return r.join(", ")})}pe.Ia=function(){return this.m};pe.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function yb(t){let e="";return Ld(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Qd(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=yb(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ke(t,e,n))}function Zs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function bb(t){this.Ga=0,this.j=[],this.l=new $u,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zs("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zs("baseRetryDelayMs",5e3,t),this.hb=Zs("retryDelaySeedMs",1e4,t),this.eb=Zs("forwardChannelMaxRetries",2,t),this.xa=Zs("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new lb(t&&t.concurrentRequestLimit),this.Ja=new oO,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}pe=bb.prototype;pe.ra=8;pe.H=1;function Yd(t){if(_b(t),t.H==3){var e=t.W++,n=yr(t.I);if(Ke(n,"SID",t.K),Ke(n,"RID",e),Ke(n,"TYPE","terminate"),wa(t,n),e=new va(t,t.l,e),e.L=2,e.v=Wu(yr(n)),n=!1,Ae.navigator&&Ae.navigator.sendBeacon)try{n=Ae.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Ae.Image&&(new Image().src=e.v,n=!0),n||(e.g=kb(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ya(e)}Sb(t)}function Yu(t){t.g&&(Jd(t),t.g.cancel(),t.g=null)}function _b(t){Yu(t),t.u&&(Ae.clearTimeout(t.u),t.u=null),Gl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Ae.clearTimeout(t.m),t.m=null)}function Xu(t){if(!ub(t.i)&&!t.m){t.m=!0;var e=t.Na;Go||H0(),Qo||(Go(),Qo=!0),qd.add(e,t),t.C=0}}function pO(t,e){return cb(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ga(Dt(t.Na,t,e),Ib(t,t.C)),t.C++,!0)}pe.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new va(this,this.l,t);let s=this.s;if(this.U&&(s?(s=L0(s),M0(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=wb(this,i,e),n=yr(this.I),Ke(n,"RID",t),Ke(n,"CVER",22),this.F&&Ke(n,"X-HTTP-Session-Id",this.F),wa(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(yb(s)))+"&"+e:this.o&&Qd(n,this.o,s)),Wd(this.i,i),this.bb&&Ke(n,"TYPE","init"),this.P?(Ke(n,"$req",e),Ke(n,"SID","null"),i.aa=!0,Sh(i,n,null)):Sh(i,n,e),this.H=2}}else this.H==3&&(t?Tm(this,t):this.j.length==0||ub(this.i)||Tm(this))};function Tm(t,e){var n;e?n=e.m:n=t.W++;const r=yr(t.I);Ke(r,"SID",t.K),Ke(r,"RID",n),Ke(r,"AID",t.V),wa(t,r),t.o&&t.s&&Qd(r,t.o,t.s),n=new va(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=wb(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Wd(t.i,n),Sh(n,r,e)}function wa(t,e){t.na&&Ld(t.na,function(n,r){Ke(e,r,n)}),t.h&&rb({},function(n,r){Ke(e,r,n)})}function wb(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Dt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{aO(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Eb(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Go||H0(),Qo||(Go(),Qo=!0),qd.add(e,t),t.A=0}}function Xd(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ga(Dt(t.Ma,t),Ib(t,t.A)),t.A++,!0)}pe.Ma=function(){if(this.u=null,Tb(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ga(Dt(this.jb,this),t)}};pe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,zt(10),Yu(this),Tb(this))};function Jd(t){t.B!=null&&(Ae.clearTimeout(t.B),t.B=null)}function Tb(t){t.g=new va(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=yr(t.wa);Ke(e,"RID","rpc"),Ke(e,"SID",t.K),Ke(e,"AID",t.V),Ke(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ke(e,"TO",t.qa),Ke(e,"TYPE","xmlhttp"),wa(t,e),t.o&&t.s&&Qd(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Wu(yr(e)),n.s=null,n.S=!0,Z0(n,t)}pe.ib=function(){this.v!=null&&(this.v=null,Yu(this),Xd(this),zt(19))};function Gl(t){t.v!=null&&(Ae.clearTimeout(t.v),t.v=null)}function Ab(t,e){var n=null;if(t.g==e){Gl(t),Jd(t),t.g=null;var r=2}else if(kh(t.i,e))n=e.F,fb(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Hu(),It(r,new Q0(r,n)),Xu(t)}else Eb(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&pO(t,e)||r==2&&Xd(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:wi(t,5);break;case 4:wi(t,10);break;case 3:wi(t,6);break;default:wi(t,2)}}}function Ib(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function wi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Dt(t.pb,t);n||(n=new Oi("//www.google.com/images/cleardot.gif"),Ae.location&&Ae.location.protocol=="http"||Kl(n,"https"),Wu(n)),lO(n.toString(),r)}else zt(2);t.H=0,t.h&&t.h.za(e),Sb(t),_b(t)}pe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),zt(2)):(this.l.info("Failed to ping google.com"),zt(1))};function Sb(t){if(t.H=0,t.ma=[],t.h){const e=hb(t.i);(e.length!=0||t.j.length!=0)&&(dm(t.ma,e),dm(t.ma,t.j),t.i.i.length=0,xd(t.j),t.j.length=0),t.h.ya()}}function Ob(t,e,n){var r=n instanceof Oi?yr(n):new Oi(n);if(r.g!="")e&&(r.g=e+"."+r.g),Wl(r,r.m);else{var i=Ae.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Oi(null);r&&Kl(s,r),e&&(s.g=e),i&&Wl(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ke(r,n,e),Ke(r,"VER",t.ra),wa(t,r),r}function kb(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Xe(new ba({ob:!0})):new Xe(t.va),e.Oa(t.J),e}pe.isActive=function(){return!!this.h&&this.h.isActive(this)};function Cb(){}pe=Cb.prototype;pe.Ba=function(){};pe.Aa=function(){};pe.za=function(){};pe.ya=function(){};pe.isActive=function(){return!0};pe.Va=function(){};function Ql(){if(ys&&!(10<=Number(OS)))throw Error("Environmental error: no available transport.")}Ql.prototype.g=function(t,e){return new cn(t,e)};function cn(t,e){gt.call(this),this.g=new bb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ko(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ko(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ds(this)}mt(cn,gt);cn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;zt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Ob(t,null,t.Y),Xu(t)};cn.prototype.close=function(){Yd(this.g)};cn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ud(t),t=n);e.j.push(new rO(e.fb++,t)),e.H==3&&Xu(e)};cn.prototype.N=function(){this.g.h=null,delete this.j,Yd(this.g),delete this.g,cn.$.N.call(this)};function Nb(t){zd.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}mt(Nb,zd);function Rb(){Kd.call(this),this.status=1}mt(Rb,Kd);function Ds(t){this.g=t}mt(Ds,Cb);Ds.prototype.Ba=function(){It(this.g,"a")};Ds.prototype.Aa=function(t){It(this.g,new Nb(t))};Ds.prototype.za=function(t){It(this.g,new Rb)};Ds.prototype.ya=function(){It(this.g,"b")};function gO(){this.blockSize=-1}function Rn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}mt(Rn,gO);Rn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Af(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Rn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Af(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Af(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Af(this,r),i=0;break}}this.h=i,this.i+=e};Rn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function $e(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var mO={};function Zd(t){return-128<=t&&128>t?AS(t,function(e){return new $e([e|0],0>e?-1:0)}):new $e([t|0],0>t?-1:0)}function Kn(t){if(isNaN(t)||!isFinite(t))return ls;if(0>t)return Et(Kn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Ch;return new $e(e,0)}function Pb(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Et(Pb(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Kn(Math.pow(e,8)),r=ls,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Kn(Math.pow(e,s)),r=r.R(s).add(Kn(o))):(r=r.R(n),r=r.add(Kn(o)))}return r}var Ch=4294967296,ls=Zd(0),Nh=Zd(1),Am=Zd(16777216);pe=$e.prototype;pe.ea=function(){if(mn(this))return-Et(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Ch+r)*e,e*=Ch}return t};pe.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(dr(this))return"0";if(mn(this))return"-"+Et(this).toString(t);for(var e=Kn(Math.pow(t,6)),n=this,r="";;){var i=Xl(n,e).g;n=Yl(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,dr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};pe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function dr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function mn(t){return t.h==-1}pe.X=function(t){return t=Yl(this,t),mn(t)?-1:dr(t)?0:1};function Et(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new $e(n,~t.h).add(Nh)}pe.abs=function(){return mn(this)?Et(this):this};pe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new $e(n,n[n.length-1]&-2147483648?-1:0)};function Yl(t,e){return t.add(Et(e))}pe.R=function(t){if(dr(this)||dr(t))return ls;if(mn(this))return mn(t)?Et(this).R(Et(t)):Et(Et(this).R(t));if(mn(t))return Et(this.R(Et(t)));if(0>this.X(Am)&&0>t.X(Am))return Kn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,ul(n,2*r+2*i),n[2*r+2*i+1]+=s*l,ul(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ul(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ul(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new $e(n,0)};function ul(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function eo(t,e){this.g=t,this.h=e}function Xl(t,e){if(dr(e))throw Error("division by zero");if(dr(t))return new eo(ls,ls);if(mn(t))return e=Xl(Et(t),e),new eo(Et(e.g),Et(e.h));if(mn(e))return e=Xl(t,Et(e)),new eo(Et(e.g),e.h);if(30<t.g.length){if(mn(t)||mn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Nh,r=e;0>=r.X(t);)n=Im(n),r=Im(r);var i=Ji(n,1),s=Ji(r,1);for(r=Ji(r,2),n=Ji(n,2);!dr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ji(r,1),n=Ji(n,1)}return e=Yl(t,i.R(e)),new eo(i,e)}for(i=ls;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Kn(n),o=s.R(e);mn(o)||0<o.X(t);)n-=r,s=Kn(n),o=s.R(e);dr(s)&&(s=Nh),i=i.add(s),t=Yl(t,o)}return new eo(i,t)}pe.gb=function(t){return Xl(this,t).h};pe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new $e(n,this.h&t.h)};pe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new $e(n,this.h|t.h)};pe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new $e(n,this.h^t.h)};function Im(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new $e(n,t.h)}function Ji(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new $e(i,t.h)}Ql.prototype.createWebChannel=Ql.prototype.g;cn.prototype.send=cn.prototype.u;cn.prototype.open=cn.prototype.m;cn.prototype.close=cn.prototype.close;Vu.NO_ERROR=0;Vu.TIMEOUT=8;Vu.HTTP_ERROR=6;Y0.COMPLETE="complete";X0.EventType=ma;ma.OPEN="a";ma.CLOSE="b";ma.ERROR="c";ma.MESSAGE="d";gt.prototype.listen=gt.prototype.O;Xe.prototype.listenOnce=Xe.prototype.P;Xe.prototype.getLastError=Xe.prototype.Sa;Xe.prototype.getLastErrorCode=Xe.prototype.Ia;Xe.prototype.getStatus=Xe.prototype.da;Xe.prototype.getResponseJson=Xe.prototype.Wa;Xe.prototype.getResponseText=Xe.prototype.ja;Xe.prototype.send=Xe.prototype.ha;Xe.prototype.setWithCredentials=Xe.prototype.Oa;Rn.prototype.digest=Rn.prototype.l;Rn.prototype.reset=Rn.prototype.reset;Rn.prototype.update=Rn.prototype.j;$e.prototype.add=$e.prototype.add;$e.prototype.multiply=$e.prototype.R;$e.prototype.modulo=$e.prototype.gb;$e.prototype.compare=$e.prototype.X;$e.prototype.toNumber=$e.prototype.ea;$e.prototype.toString=$e.prototype.toString;$e.prototype.getBits=$e.prototype.D;$e.fromNumber=Kn;$e.fromString=Pb;var vO=function(){return new Ql},yO=function(){return Hu()},If=Vu,bO=Y0,_O=Bi,Sm={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},wO=ba,cl=X0,EO=Xe,TO=Rn,us=$e;const Om="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ls="9.22.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new Mu("@firebase/firestore");function km(){return Ni.logLevel}function ve(t,...e){if(Ni.logLevel<=Me.DEBUG){const n=e.map(ep);Ni.debug(`Firestore (${Ls}): ${t}`,...n)}}function br(t,...e){if(Ni.logLevel<=Me.ERROR){const n=e.map(ep);Ni.error(`Firestore (${Ls}): ${t}`,...n)}}function bs(t,...e){if(Ni.logLevel<=Me.WARN){const n=e.map(ep);Ni.warn(`Firestore (${Ls}): ${t}`,...n)}}function ep(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t="Unexpected state"){const e=`FIRESTORE (${Ls}) INTERNAL ASSERTION FAILED: `+t;throw br(e),new Error(e)}function Ge(t,e){t||Ee()}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class IO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class SO{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string"),new xb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new Nt(e)}}class OO{constructor(e,n,r){this.h=e,this.l=n,this.m=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class kO{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new OO(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NO{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const r=s=>{s.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,ve("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string"),this.T=n.token,new CO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=RO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function _s(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ge(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new ct(0,0))}static max(){return new Oe(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ee(),r===void 0?r=e.length-n:r>e.length-n&&Ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ea.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ea?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class We extends ea{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new We(n)}static emptyPath(){return new We([])}}const PO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends ea{construct(e,n,r){return new xt(e,n,r)}static isValidIdentifier(e){return PO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ge(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ge(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ge(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ge(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(We.fromString(e))}static fromName(e){return new be(We.fromString(e).popFirst(5))}static empty(){return new be(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new We(e.slice()))}}function xO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Oe.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new Qr(i,be.empty(),e)}function DO(t){return new Qr(t.readTime,t.key,-1)}class Qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qr(Oe.min(),be.empty(),-1)}static max(){return new Qr(Oe.max(),be.empty(),-1)}}function LO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==MO)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):he.reject(n)}static resolve(e){return new he((n,r)=>{n(e)})}static reject(e){return new he((n,r)=>{r(e)})}static waitFor(e){return new he((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=he.resolve(!1);for(const r of e)n=n.next(i=>i?he.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new he((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new he((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Ta(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>n.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}tp.ct=-1;function Ju(t){return t==null}function Jl(t){return t===0&&1/t==-1/0}function FO(t){return typeof t=="number"&&Number.isInteger(t)&&!Jl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fl(this.root,e,this.comparator,!0)}}class fl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??wt.RED,this.left=i??wt.EMPTY,this.right=s??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new wt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(t,e,n,r,i){return this}insert(t,e,n){return new wt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nm(this.data.getIterator())}getIteratorFrom(e){return new Nm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class Nm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new ln([])}unionWith(e){let n=new Mt(xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _s(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Mb("Invalid base64 string: "+i):i}}(e);return new Ft(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const BO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(Ge(!!t),typeof t=="string"){let e=0;const n=BO.exec(t);if(Ge(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ri(t){return typeof t=="string"?Ft.fromBase64String(t):Ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rp(t){const e=t.mapValue.fields.__previous_value__;return np(e)?rp(e):e}function ta(t){const e=Yr(t.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class na{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new na("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof na&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?np(t)?4:qO(t)?9007199254740991:10:Ee()}function er(t,e){if(t===e)return!0;const n=Pi(t);if(n!==Pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ta(t).isEqual(ta(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Yr(r.timestampValue),o=Yr(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ri(r.bytesValue).isEqual(Ri(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return rt(r.geoPointValue.latitude)===rt(i.geoPointValue.latitude)&&rt(r.geoPointValue.longitude)===rt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return rt(r.integerValue)===rt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=rt(r.doubleValue),o=rt(i.doubleValue);return s===o?Jl(s)===Jl(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return _s(t.arrayValue.values||[],e.arrayValue.values||[],er);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Cm(s)!==Cm(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!er(s[a],o[a])))return!1;return!0}(t,e);default:return Ee()}}function ra(t,e){return(t.values||[]).find(n=>er(n,e))!==void 0}function ws(t,e){if(t===e)return 0;const n=Pi(t),r=Pi(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=rt(i.integerValue||i.doubleValue),a=rt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Rm(t.timestampValue,e.timestampValue);case 4:return Rm(ta(t),ta(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Ri(i),a=Ri(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Fe(o[l],a[l]);if(u!==0)return u}return Fe(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Fe(rt(i.latitude),rt(s.latitude));return o!==0?o:Fe(rt(i.longitude),rt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=ws(o[l],a[l]);if(u)return u}return Fe(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===hl.mapValue&&s===hl.mapValue)return 0;if(i===hl.mapValue)return 1;if(s===hl.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=Fe(a[c],u[c]);if(h!==0)return h;const f=ws(o[a[c]],l[u[c]]);if(f!==0)return f}return Fe(a.length,u.length)}(t.mapValue,e.mapValue);default:throw Ee()}}function Rm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=Yr(t),r=Yr(e),i=Fe(n.seconds,r.seconds);return i!==0?i:Fe(n.nanos,r.nanos)}function Es(t){return Rh(t)}function Rh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Yr(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ri(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,be.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=Rh(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${Rh(r.fields[a])}`;return s+"}"}(t.mapValue):Ee();var e,n}function Pm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ph(t){return!!t&&"integerValue"in t}function ip(t){return!!t&&"arrayValue"in t}function xm(t){return!!t&&"nullValue"in t}function Dm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sl(t){return!!t&&"mapValue"in t}function Ao(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ao(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ao(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ao(n)}setAll(e){let n=xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ao(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Sl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Sl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new en(Ao(this.value))}}function jb(t){const e=[];return Ui(t.fields,(n,r)=>{const i=new xt([n]);if(Sl(r)){const s=jb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Rt(e,0,Oe.min(),Oe.min(),Oe.min(),en.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,Oe.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,Oe.min(),Oe.min(),en.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,Oe.min(),Oe.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.position=e,this.inclusive=n}}function Lm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=be.comparator(be.fromName(o.referenceValue),n.key):r=ws(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n="asc"){this.field=e,this.dir=n}}function $O(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{}class it extends Fb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VO(e,n,r):n==="array-contains"?new WO(e,r):n==="in"?new GO(e,r):n==="not-in"?new QO(e,r):n==="array-contains-any"?new YO(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zO(e,r):new KO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ws(n,this.value)):n!==null&&Pi(this.value)===Pi(n)&&this.matchesComparison(ws(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Pn extends Fb{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Pn(e,n)}matches(e){return Bb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Bb(t){return t.op==="and"}function Ub(t){return HO(t)&&Bb(t)}function HO(t){for(const e of t.filters)if(e instanceof Pn)return!1;return!0}function xh(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+Es(t.value);if(Ub(t))return t.filters.map(e=>xh(e)).join(",");{const e=t.filters.map(n=>xh(n)).join(",");return`${t.op}(${e})`}}function qb(t,e){return t instanceof it?function(n,r){return r instanceof it&&n.op===r.op&&n.field.isEqual(r.field)&&er(n.value,r.value)}(t,e):t instanceof Pn?function(n,r){return r instanceof Pn&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&qb(s,r.filters[o]),!0):!1}(t,e):void Ee()}function $b(t){return t instanceof it?function(e){return`${e.field.canonicalString()} ${e.op} ${Es(e.value)}`}(t):t instanceof Pn?function(e){return e.op.toString()+" {"+e.getFilters().map($b).join(" ,")+"}"}(t):"Filter"}class VO extends it{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class zO extends it{constructor(e,n){super(e,"in",n),this.keys=Hb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class KO extends it{constructor(e,n){super(e,"not-in",n),this.keys=Hb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Hb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>be.fromName(r.referenceValue))}class WO extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ip(n)&&ra(n.arrayValue,this.value)}}class GO extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ra(this.value.arrayValue,n)}}class QO extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(ra(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ra(this.value.arrayValue,n)}}class YO extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ip(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ra(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function jm(t,e=null,n=[],r=[],i=null,s=null,o=null){return new XO(t,e,n,r,i,s,o)}function sp(t){const e=Ce(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ju(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Es(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Es(r)).join(",")),e.dt=n}return e.dt}function op(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$O(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mm(t.startAt,e.startAt)&&Mm(t.endAt,e.endAt)}function Dh(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function JO(t,e,n,r,i,s,o,a){return new Aa(t,e,n,r,i,s,o,a)}function ap(t){return new Aa(t)}function Fm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Vb(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function lp(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function zb(t){return t.collectionGroup!==null}function cs(t){const e=Ce(t);if(e.wt===null){e.wt=[];const n=lp(e),r=Vb(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new Io(n)),e.wt.push(new Io(xt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Io(xt.keyField(),s))}}}return e.wt}function _r(t){const e=Ce(t);if(!e._t)if(e.limitType==="F")e._t=jm(e.path,e.collectionGroup,cs(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of cs(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Io(s.field,o))}const r=e.endAt?new Zl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Zl(e.startAt.position,e.startAt.inclusive):null;e._t=jm(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function Lh(t,e){e.getFirstInequalityField(),lp(t);const n=t.filters.concat([e]);return new Aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function eu(t,e,n){return new Aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zu(t,e){return op(_r(t),_r(e))&&t.limitType===e.limitType}function Kb(t){return`${sp(_r(t))}|lt:${t.limitType}`}function Mh(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>$b(r)).join(", ")}]`),Ju(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Es(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Es(r)).join(",")),`Target(${n})`}(_r(t))}; limitType=${t.limitType})`}function ec(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):be.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of cs(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=Lm(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,cs(n),r)||n.endAt&&!function(i,s,o){const a=Lm(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,cs(n),r))}(t,e)}function ZO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Wb(t){return(e,n)=>{let r=!1;for(const i of cs(t)){const s=ek(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ek(t,e,n){const r=t.field.isKeyField()?be.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?ws(a,l):Ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Lb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=new Ye(be.comparator);function wr(){return tk}const Gb=new Ye(be.comparator);function mo(...t){let e=Gb;for(const n of t)e=e.insert(n.key,n);return e}function Qb(t){let e=Gb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ei(){return So()}function Yb(){return So()}function So(){return new Ms(t=>t.toString(),(t,e)=>t.isEqual(e))}const nk=new Ye(be.comparator),rk=new Mt(be.comparator);function Re(...t){let e=rk;for(const n of t)e=e.add(n);return e}const ik=new Mt(Fe);function sk(){return ik}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jl(e)?"-0":e}}function Jb(t){return{integerValue:""+t}}function ok(t,e){return FO(e)?Jb(e):Xb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this._=void 0}}function ak(t,e,n){return t instanceof tu?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&np(i)&&(i=rp(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof ia?e_(t,e):t instanceof sa?t_(t,e):function(r,i){const s=Zb(r,i),o=Bm(s)+Bm(r.gt);return Ph(s)&&Ph(r.gt)?Jb(o):Xb(r.serializer,o)}(t,e)}function lk(t,e,n){return t instanceof ia?e_(t,e):t instanceof sa?t_(t,e):n}function Zb(t,e){return t instanceof nu?Ph(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class tu extends tc{}class ia extends tc{constructor(e){super(),this.elements=e}}function e_(t,e){const n=n_(e);for(const r of t.elements)n.some(i=>er(i,r))||n.push(r);return{arrayValue:{values:n}}}class sa extends tc{constructor(e){super(),this.elements=e}}function t_(t,e){let n=n_(e);for(const r of t.elements)n=n.filter(i=>!er(i,r));return{arrayValue:{values:n}}}class nu extends tc{constructor(e,n){super(),this.serializer=e,this.gt=n}}function Bm(t){return rt(t.integerValue||t.doubleValue)}function n_(t){return ip(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function uk(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof ia&&r instanceof ia||n instanceof sa&&r instanceof sa?_s(n.elements,r.elements,er):n instanceof nu&&r instanceof nu?er(n.gt,r.gt):n instanceof tu&&r instanceof tu}(t.transform,e.transform)}class ck{constructor(e,n){this.version=e,this.transformResults=n}}class Gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ol(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nc{}function r_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new s_(t.key,Gn.none()):new Ia(t.key,t.data,Gn.none());{const n=t.data,r=en.empty();let i=new Mt(xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ei(t.key,r,new ln(i.toArray()),Gn.none())}}function fk(t,e,n){t instanceof Ia?function(r,i,s){const o=r.value.clone(),a=qm(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ei?function(r,i,s){if(!Ol(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=qm(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(i_(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Oo(t,e,n,r){return t instanceof Ia?function(i,s,o,a){if(!Ol(i.precondition,s))return o;const l=i.value.clone(),u=$m(i.fieldTransforms,a,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof ei?function(i,s,o,a){if(!Ol(i.precondition,s))return o;const l=$m(i.fieldTransforms,a,s),u=s.data;return u.setAll(i_(i)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(i,s,o){return Ol(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function hk(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Zb(r.transform,i||null);s!=null&&(n===null&&(n=en.empty()),n.set(r.field,s))}return n||null}function Um(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&_s(n,r,(i,s)=>uk(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ia extends nc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ei extends nc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function i_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qm(t,e,n){const r=new Map;Ge(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,lk(o,a,n[i]))}return r}function $m(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ak(s,o,e))}return r}class s_ extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dk extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&fk(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Oo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Oo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Yb();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=r_(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&_s(this.mutations,e.mutations,(n,r)=>Um(n,r))&&_s(this.baseMutations,e.baseMutations,(n,r)=>Um(n,r))}}class up{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ge(e.mutations.length===r.length);let i=nk;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new up(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,xe;function vk(t){switch(t){default:return Ee();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function o_(t){if(t===void 0)return br("GRPC error has no .code"),le.UNKNOWN;switch(t){case nt.OK:return le.OK;case nt.CANCELLED:return le.CANCELLED;case nt.UNKNOWN:return le.UNKNOWN;case nt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case nt.INTERNAL:return le.INTERNAL;case nt.UNAVAILABLE:return le.UNAVAILABLE;case nt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case nt.NOT_FOUND:return le.NOT_FOUND;case nt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case nt.ABORTED:return le.ABORTED;case nt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case nt.DATA_LOSS:return le.DATA_LOSS;default:return Ee()}}(xe=nt||(nt={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return dl}static getOrCreateInstance(){return dl===null&&(dl=new cp),dl}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let dl=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new us([4294967295,4294967295],0);function Hm(t){const e=yk().encode(t),n=new TO;return n.update(e),new Uint8Array(n.digest())}function Vm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new us([n,r],0),new us([i,s],0)]}class fp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new vo(`Invalid padding: ${n}`);if(r<0)throw new vo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new vo(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=us.fromNumber(this.It)}Et(e,n,r){let i=e.add(n.multiply(us.fromNumber(r)));return i.compare(bk)===1&&(i=new us([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=Hm(e),[r,i]=Vm(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new fp(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=Hm(e),[r,i]=Vm(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class vo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rc(Oe.min(),i,new Ye(Fe),wr(),Re())}}class Sa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sa(r,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n,r,i){this.Pt=e,this.removedTargetIds=n,this.key=r,this.bt=i}}class a_{constructor(e,n){this.targetId=e,this.Vt=n}}class l_{constructor(e,n,r=Ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zm{constructor(){this.St=0,this.Dt=Wm(),this.Ct=Ft.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Re(),n=Re(),r=Re();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ee()}}),new Sa(this.Ct,this.xt,e,n,r)}Ft(){this.Nt=!1,this.Dt=Wm()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class _k{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=wr(),this.zt=Km(),this.Wt=new Ye(Fe)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const r=this.Zt(n);switch(e.state){case 0:this.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(n);break;case 3:this.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),r.$t(e.resumeToken));break;default:Ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((r,i)=>{this.te(i)&&n(i)})}ne(e){var n;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if(Dh(o))if(i===0){const a=new be(o.path);this.Yt(r,a,Rt.newNoDocument(a,Oe.min()))}else Ge(i===1);else{const a=this.ie(r);if(a!==i){const l=this.re(e,a);if(l!==0){this.ee(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,u)}(n=cp.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(u,c,h){var f,d,p,g,b,m;const v={localCacheCount:c,existenceFilterCount:h.count},_=h.unchangedNames;return _&&(v.bloomFilter={applied:u===0,hashCount:(f=_==null?void 0:_.hashCount)!==null&&f!==void 0?f:0,bitmapLength:(g=(p=(d=_==null?void 0:_.bits)===null||d===void 0?void 0:d.bitmap)===null||p===void 0?void 0:p.length)!==null&&g!==void 0?g:0,padding:(m=(b=_==null?void 0:_.bits)===null||b===void 0?void 0:b.padding)!==null&&m!==void 0?m:0}),v}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let l,u;try{l=Ri(s).toUint8Array()}catch(c){if(c instanceof Mb)return bs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw c}try{u=new fp(l,o,a)}catch(c){return bs(c instanceof vo?"BloomFilter error: ":"Applying bloom filter failed: ",c),1}return u.It===0?1:i!==n-this.oe(e.targetId,u)?2:0}oe(e,n){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&Dh(a.target)){const l=new be(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,Rt.newNoDocument(l,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let r=Re();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.se(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new rc(e,n,this.Wt,this.jt,r);return this.jt=wr(),this.zt=Km(),this.Wt=new Ye(Fe),i}Jt(e,n){if(!this.te(e))return;const r=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,r),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),r&&(this.jt=this.jt.insert(n,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new zm,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Mt(Fe),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new zm),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Km(){return new Ye(be.comparator)}function Wm(){return new Ye(be.comparator)}const wk=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Ek=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Tk=(()=>({and:"AND",or:"OR"}))();class Ak{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jh(t,e){return t.useProto3Json||Ju(e)?e:{value:e}}function ru(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ik(t,e){return ru(t,e.toTimestamp())}function Qn(t){return Ge(!!t),Oe.fromTimestamp(function(e){const n=Yr(e);return new ct(n.seconds,n.nanos)}(t))}function hp(t,e){return function(n){return new We(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function c_(t){const e=We.fromString(t);return Ge(p_(e)),e}function Fh(t,e){return hp(t.databaseId,e.path)}function Sf(t,e){const n=c_(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(f_(n))}function Bh(t,e){return hp(t.databaseId,e)}function Sk(t){const e=c_(t);return e.length===4?We.emptyPath():f_(e)}function Uh(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function f_(t){return Ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Gm(t,e,n){return{name:Fh(t,e),fields:n.value.mapValue.fields}}function Ok(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(Ge(u===void 0||typeof u=="string"),Ft.fromBase64String(u||"")):(Ge(u===void 0||u instanceof Uint8Array),Ft.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?le.UNKNOWN:o_(l.code);return new ge(u,l.message||"")}(o);n=new l_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sf(t,r.document.name),s=Qn(r.document.updateTime),o=r.document.createTime?Qn(r.document.createTime):Oe.min(),a=new en({mapValue:{fields:r.document.fields}}),l=Rt.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new kl(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Sf(t,r.document),s=r.readTime?Qn(r.readTime):Oe.min(),o=Rt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new kl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Sf(t,r.document),s=r.removedTargetIds||[];n=new kl([],s,i,null)}else{if(!("filter"in e))return Ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new mk(i,s),a=r.targetId;n=new a_(a,o)}}return n}function kk(t,e){let n;if(e instanceof Ia)n={update:Gm(t,e.key,e.value)};else if(e instanceof s_)n={delete:Fh(t,e.key)};else if(e instanceof ei)n={update:Gm(t,e.key,e.data),updateMask:jk(e.fieldMask)};else{if(!(e instanceof dk))return Ee();n={verify:Fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof tu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ia)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof sa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof nu)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw Ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Ik(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ee()}(t,e.precondition)),n}function Ck(t,e){return t&&t.length>0?(Ge(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Qn(r.updateTime):Qn(i);return s.isEqual(Oe.min())&&(s=Qn(i)),new ck(s,r.transformResults||[])}(n,e))):[]}function Nk(t,e){return{documents:[Bh(t,e.path)]}}function Rk(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Bh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Bh(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return d_(Pn.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Zi(c.field),direction:Dk(c.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=jh(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function Pk(t){let e=Sk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ge(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(c){const h=h_(c);return h instanceof Pn&&Ub(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Io(es(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,Ju(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,f=c.values||[];return new Zl(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,f=c.values||[];return new Zl(f,h)}(n.endAt)),JO(e,i,o,s,a,"F",l,u)}function xk(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function h_(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=es(e.unaryFilter.field);return it.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=es(e.unaryFilter.field);return it.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=es(e.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=es(e.unaryFilter.field);return it.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(t):t.fieldFilter!==void 0?function(e){return it.create(es(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Pn.create(e.compositeFilter.filters.map(n=>h_(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Ee()}}(e.compositeFilter.op))}(t):Ee()}function Dk(t){return wk[t]}function Lk(t){return Ek[t]}function Mk(t){return Tk[t]}function Zi(t){return{fieldPath:t.canonicalString()}}function es(t){return xt.fromServerFormat(t.fieldPath)}function d_(t){return t instanceof it?function(e){if(e.op==="=="){if(Dm(e.value))return{unaryFilter:{field:Zi(e.field),op:"IS_NAN"}};if(xm(e.value))return{unaryFilter:{field:Zi(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Dm(e.value))return{unaryFilter:{field:Zi(e.field),op:"IS_NOT_NAN"}};if(xm(e.value))return{unaryFilter:{field:Zi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zi(e.field),op:Lk(e.op),value:e.value}}}(t):t instanceof Pn?function(e){const n=e.getFilters().map(r=>d_(r));return n.length===1?n[0]:{compositeFilter:{op:Mk(e.op),filters:n}}}(t):Ee()}function jk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function p_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r,i,s=Oe.min(),o=Oe.min(),a=Ft.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.fe=e}}function Bk(t){const e=Pk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?eu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.rn=new qk}addToCollectionParentIndex(e,n){return this.rn.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(Qr.min())}updateCollectionGroup(e,n,r){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class qk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mt(We.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ts(0)}static Mn(){return new Ts(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.changes=new Ms(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?he.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Oo(r.mutation,i,ln.empty(),ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Re()){const i=Ei();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=mo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=wr();const o=So(),a=So();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof ei)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Oo(c.mutation,u,c.mutation.getFieldMask(),ct.now())):o.set(u.key,ln.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new Hk(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=So();let i=new Ye((o,a)=>o-a),s=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||ln.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||Re()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=Yb();c.forEach(f=>{if(!s.has(f)){const d=r_(n.get(f),r.get(f));d!==null&&h.set(f,d),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return he.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):he.resolve(Ei());let a=-1,l=s;return o.next(u=>he.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?he.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Re())).next(c=>({batchId:a,changes:Qb(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let i=mo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=mo();return this.indexManager.getCollectionParents(e,i).next(o=>he.forEach(o,a=>{const l=function(u,c){return new Aa(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{s=s.insert(c,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,Rt.newInvalidDocument(u)))});let o=mo();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&Oo(u.mutation,l,ln.empty(),ct.now()),ec(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return he.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var r;return this.cs.set(n.id,{id:(r=n).id,version:r.version,createTime:Qn(r.createTime)}),he.resolve()}getNamedQuery(e,n){return he.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(r){return{name:r.name,query:Bk(r.bundledQuery),readTime:Qn(r.readTime)}}(n)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.overlays=new Ye(be.comparator),this.ls=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ei();return he.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.we(e,n,s)}),he.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ls.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),he.resolve()}getOverlaysForCollection(e,n,r){const i=Ei(),s=n.length+1,o=new be(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return he.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ye((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Ei(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Ei(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return he.resolve(a)}we(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gk(n,r));let s=this.ls.get(n);s===void 0&&(s=Re(),this.ls.set(n,s)),this.ls.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this.fs=new Mt(ht.ds),this.ws=new Mt(ht._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const r=new ht(e,n);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ys(new ht(e,n))}ps(e,n){e.forEach(r=>this.removeReference(r,n))}Is(e){const n=new be(new We([])),r=new ht(n,e),i=new ht(n,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new be(new We([])),r=new ht(n,e),i=new ht(n,e+1);let s=Re();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ht(e,0),r=this.fs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ht{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return be.comparator(e.key,n.key)||Fe(e.As,n.As)}static _s(e,n){return Fe(e.As,n.As)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Mt(ht.ds)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new pk(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return he.resolve(o)}lookupMutationBatch(e,n){return he.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.bs(r),s=i<0?0:i;return he.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ht(n,0),i=new ht(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),he.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Fe);return n.forEach(i=>{const s=new ht(i,0),o=new ht(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),he.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;be.isDocumentKey(s)||(s=s.child(""));const o=new ht(new be(s),0);let a=new Mt(Fe);return this.Rs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.As)),!0)},o),he.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(r=>{const i=this.Ps(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ge(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return he.forEach(n.mutations,i=>{const s=new ht(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,n){const r=new ht(n,0),i=this.Rs.firstAfterOrEqual(r);return he.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.Ds=e,this.docs=new Ye(be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return he.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=wr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),he.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=wr();const o=n.path,a=new be(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||LO(DO(c),r)<=0||(i.has(c.key)||ec(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return he.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ee()}Cs(e,n){return he.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Qk(this)}getSize(e){return he.resolve(this.size)}}class Qk extends $k{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),he.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.persistence=e,this.xs=new Ms(n=>sp(n),op),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Ns=0,this.ks=new dp,this.targetCount=0,this.Ms=Ts.kn()}forEachTarget(e,n){return this.xs.forEach((r,i)=>n(i)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ns&&(this.Ns=n),he.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Ts(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.Fn(n),he.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),he.waitFor(s).next(()=>i)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const r=this.xs.get(n)||null;return he.resolve(r)}addMatchingKeys(e,n,r){return this.ks.gs(n,r),he.resolve()}removeMatchingKeys(e,n,r){this.ks.ps(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),he.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),he.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ks.Es(n);return he.resolve(r)}containsKey(e,n){return he.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n){this.$s={},this.overlays={},this.Os=new tp(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Yk(this),this.indexManager=new Uk,this.remoteDocumentCache=function(r){return new Gk(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new Fk(n),this.qs=new zk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Kk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.$s[e.toKey()];return r||(r=new Wk(n,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,r){ve("MemoryPersistence","Starting transaction:",e);const i=new Jk(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,n){return he.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,n)))}}class Jk extends jO{constructor(e){super(),this.currentSequenceNumber=e}}class pp{constructor(e){this.persistence=e,this.Qs=new dp,this.js=null}static zs(e){return new pp(e)}get Ws(){if(this.js)return this.js;throw Ee()}addReference(e,n,r){return this.Qs.addReference(r,n),this.Ws.delete(r.toString()),he.resolve()}removeReference(e,n,r){return this.Qs.removeReference(r,n),this.Ws.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),he.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Ws,r=>{const i=be.fromPath(r);return this.Hs(e,i).next(s=>{s||n.removeEntry(i,Oe.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(r=>{r?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return he.or([()=>he.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Fi=r,this.Bi=i}static Li(e,n){let r=Re(),i=Re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ki(e,n).next(s=>s||this.Gi(e,n,i,r)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(Fm(n))return he.resolve(null);let r=_r(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=eu(n,null,"F"),r=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Re(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ji(n,a);return this.zi(n,u,o,l.readTime)?this.Ki(e,eu(n,null,"F")):this.Wi(e,u,n,l)}))})))}Gi(e,n,r,i){return Fm(n)||i.isEqual(Oe.min())?this.Qi(e,n):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(n,s);return this.zi(n,o,r,i)?this.Qi(e,n):(km()<=Me.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mh(n)),this.Wi(e,o,n,xO(i,-1)))})}ji(e,n){let r=new Mt(Wb(e));return n.forEach((i,s)=>{ec(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,n){return km()<=Me.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Mh(n)),this.Ui.getDocumentsMatchingQuery(e,n,Qr.min())}Wi(e,n,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new Ye(Fe),this.Yi=new Ms(s=>sp(s),op),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vk(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function tC(t,e,n,r){return new eC(t,e,n,r)}async function g_(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.tr(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Re();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({er:u,removedBatchIds:o,addedBatchIds:a}))})})}function nC(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let f=he.resolve();return h.forEach(d=>{f=f.next(()=>u.getEntry(a,d)).next(p=>{const g=l.docVersions.get(d);Ge(g!==null),p.version.compareTo(g)<0&&(c.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),u.addEntry(p)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Re();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function m_(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function rC(t,e){const n=Ce(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((c,h)=>{const f=i.get(h);if(!f)return;a.push(n.Bs.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(s,c.addedDocuments,h)));let d=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?d=d.withResumeToken(Ft.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):c.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(c.resumeToken,r)),i=i.insert(h,d),function(p,g,b){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,d,c)&&a.push(n.Bs.updateTargetData(s,d))});let l=wr(),u=Re();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(iC(s,o,e.documentUpdates).next(c=>{l=c.nr,u=c.sr})),!r.isEqual(Oe.min())){const c=n.Bs.getLastRemoteSnapshotVersion(s).next(h=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return he.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ji=i,s))}function iC(t,e,n){let r=Re(),i=Re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=wr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ve("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{nr:o,sr:i}})}function sC(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oC(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Bs.getTargetData(r,e).next(s=>s?(i=s,he.resolve(i)):n.Bs.allocateTargetId(r).next(o=>(i=new Ur(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function qh(t,e,n){const r=Ce(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ta(o))throw o;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function Qm(t,e,n){const r=Ce(t);let i=Oe.min(),s=Re();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=Ce(a),h=c.Yi.get(u);return h!==void 0?he.resolve(c.Ji.get(h)):c.Bs.getTargetData(l,u)}(r,o,_r(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:Oe.min(),n?s:Re())).next(a=>(aC(r,ZO(e),a),{documents:a,ir:s})))}function aC(t,e,n){let r=t.Xi.get(e)||Oe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}class Ym{constructor(){this.activeTargetIds=sk()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lC{constructor(){this.Hr=new Ym,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,r){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Ym,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl=null;function Of(){return pl===null?pl=268435456+Math.round(2147483648*Math.random()):pl++,"0x"+pl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class hC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,r,i,s){const o=Of(),a=this.To(e,n);ve("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,i,s),this.Ao(e,a,l,r).then(u=>(ve("RestConnection",`Received RPC '${e}' ${o}: `,u),u),u=>{throw bs("RestConnection",`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}vo(e,n,r,i,s,o){return this.Io(e,n,r,i,s)}Eo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ls,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,n){const r=cC[e];return`${this.mo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,r,i){const s=Of();return new Promise((o,a)=>{const l=new EO;l.setWithCredentials(!0),l.listenOnce(bO.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case If.NO_ERROR:const c=l.getResponseJson();ve(Ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case If.TIMEOUT:ve(Ct,`RPC '${e}' ${s} timed out`),a(new ge(le.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:const h=l.getStatus();if(ve(Ct,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const d=f==null?void 0:f.error;if(d&&d.status&&d.message){const p=function(g){const b=g.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(b)>=0?b:le.UNKNOWN}(d.status);a(new ge(p,d.message))}else a(new ge(le.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ge(le.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{ve(Ct,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ve(Ct,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Ro(e,n,r){const i=Of(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vO(),a=yO(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new wO({})),this.Eo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");ve(Ct,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);let f=!1,d=!1;const p=new fC({ro:b=>{d?ve(Ct,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||(ve(Ct,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),ve(Ct,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},oo:()=>h.close()}),g=(b,m,v)=>{b.listen(m,_=>{try{v(_)}catch(y){setTimeout(()=>{throw y},0)}})};return g(h,cl.EventType.OPEN,()=>{d||ve(Ct,`RPC '${e}' stream ${i} transport opened.`)}),g(h,cl.EventType.CLOSE,()=>{d||(d=!0,ve(Ct,`RPC '${e}' stream ${i} transport closed`),p.wo())}),g(h,cl.EventType.ERROR,b=>{d||(d=!0,bs(Ct,`RPC '${e}' stream ${i} transport errored:`,b),p.wo(new ge(le.UNAVAILABLE,"The operation could not be completed")))}),g(h,cl.EventType.MESSAGE,b=>{var m;if(!d){const v=b.data[0];Ge(!!v);const _=v,y=_.error||((m=_[0])===null||m===void 0?void 0:m.error);if(y){ve(Ct,`RPC '${e}' stream ${i} received error:`,y);const E=y.status;let k=function(I){const R=nt[I];if(R!==void 0)return o_(R)}(E),S=y.message;k===void 0&&(k=le.INTERNAL,S="Unknown error status: "+E+" with message "+y.message),d=!0,p.wo(new ge(k,S)),h.close()}else ve(Ct,`RPC '${e}' stream ${i} received:`,v),p._o(v)}}),g(a,_O.STAT_EVENT,b=>{b.stat===Sm.PROXY?ve(Ct,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===Sm.NOPROXY&&ve(Ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t){return new Ak(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n,r,i,s,o,a,l){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new v_(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(br(n.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===n&&this.Zo(r,i)},r=>{e(()=>{const i=new ge(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,n){const r=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dC extends y_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=Ok(this.serializer,e),r=function(i){if(!("targetChange"in i))return Oe.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Oe.min():s.readTime?Qn(s.readTime):Oe.min()}(e);return this.listener.nu(n,r)}su(e){const n={};n.database=Uh(this.serializer),n.addTarget=function(i,s){let o;const a=s.target;if(o=Dh(a)?{documents:Nk(i,a)}:{query:Rk(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=u_(i,s.resumeToken);const l=jh(i,s.expectedCount);l!==null&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(Oe.min())>0){o.readTime=ru(i,s.snapshotVersion.toTimestamp());const l=jh(i,s.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const r=xk(this.serializer,e);r&&(n.labels=r),this.Wo(n)}iu(e){const n={};n.database=Uh(this.serializer),n.removeTarget=e,this.Wo(n)}}class pC extends y_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=Ck(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.cu(r,n)}return Ge(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Uh(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kk(this.serializer,r))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new ge(le.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ge(le.UNKNOWN,i.toString())})}vo(e,n,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(le.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class mC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(br(n),this.mu=!1):ve("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(o=>{r.enqueueAndForget(async()=>{qi(this)&&(ve("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=Ce(a);l.vu.add(4),await Oa(l),l.bu.set("Unknown"),l.vu.delete(4),await sc(l)}(this))})}),this.bu=new mC(r,i)}}async function sc(t){if(qi(t))for(const e of t.Ru)await e(!0)}async function Oa(t){for(const e of t.Ru)await e(!1)}function b_(t,e){const n=Ce(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),yp(n)?vp(n):js(n).Ko()&&mp(n,e))}function __(t,e){const n=Ce(t),r=js(n);n.Au.delete(e),r.Ko()&&w_(n,e),n.Au.size===0&&(r.Ko()?r.jo():qi(n)&&n.bu.set("Unknown"))}function mp(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}js(t).su(e)}function w_(t,e){t.Vu.qt(e),js(t).iu(e)}function vp(t){t.Vu=new _k({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),js(t).start(),t.bu.gu()}function yp(t){return qi(t)&&!js(t).Uo()&&t.Au.size>0}function qi(t){return Ce(t).vu.size===0}function E_(t){t.Vu=void 0}async function yC(t){t.Au.forEach((e,n)=>{mp(t,e)})}async function bC(t,e){E_(t),yp(t)?(t.bu.Iu(e),vp(t)):t.bu.set("Unknown")}async function _C(t,e,n){if(t.bu.set("Online"),e instanceof l_&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.Au.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.Au.delete(o),r.Vu.removeTarget(o))}(t,e)}catch(r){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await iu(t,r)}else if(e instanceof kl?t.Vu.Ht(e):e instanceof a_?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(Oe.min()))try{const r=await m_(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.Au.get(l);u&&i.Au.set(l,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const u=i.Au.get(a);if(!u)return;i.Au.set(a,u.withResumeToken(Ft.EMPTY_BYTE_STRING,u.snapshotVersion)),w_(i,a);const c=new Ur(u.target,a,l,u.sequenceNumber);mp(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){ve("RemoteStore","Failed to raise snapshot:",r),await iu(t,r)}}async function iu(t,e,n){if(!Ta(e))throw e;t.vu.add(1),await Oa(t),t.bu.set("Offline"),n||(n=()=>m_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ve("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await sc(t)})}function T_(t,e){return e().catch(n=>iu(t,n,e))}async function oc(t){const e=Ce(t),n=Xr(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;wC(e);)try{const i=await sC(e.localStore,r);if(i===null){e.Eu.length===0&&n.jo();break}r=i.batchId,EC(e,i)}catch(i){await iu(e,i)}A_(e)&&I_(e)}function wC(t){return qi(t)&&t.Eu.length<10}function EC(t,e){t.Eu.push(e);const n=Xr(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function A_(t){return qi(t)&&!Xr(t).Uo()&&t.Eu.length>0}function I_(t){Xr(t).start()}async function TC(t){Xr(t).hu()}async function AC(t){const e=Xr(t);for(const n of t.Eu)e.uu(n.mutations)}async function IC(t,e,n){const r=t.Eu.shift(),i=up.from(r,e,n);await T_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await oc(t)}async function SC(t,e){e&&Xr(t).ou&&await async function(n,r){if(i=r.code,vk(i)&&i!==le.ABORTED){const s=n.Eu.shift();Xr(n).Qo(),await T_(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await oc(n)}var i}(t,e),A_(t)&&I_(t)}async function Jm(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const r=qi(n);n.vu.add(3),await Oa(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await sc(n)}async function OC(t,e){const n=Ce(t);e?(n.vu.delete(2),await sc(n)):e||(n.vu.add(2),await Oa(n),n.bu.set("Unknown"))}function js(t){return t.Su||(t.Su=function(e,n,r){const i=Ce(e);return i.fu(),new dC(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:yC.bind(null,t),ao:bC.bind(null,t),nu:_C.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),yp(t)?vp(t):t.bu.set("Unknown")):(await t.Su.stop(),E_(t))})),t.Su}function Xr(t){return t.Du||(t.Du=function(e,n,r){const i=Ce(e);return i.fu(),new pC(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{uo:TC.bind(null,t),ao:SC.bind(null,t),au:AC.bind(null,t),cu:IC.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await oc(t)):(await t.Du.stop(),t.Eu.length>0&&(ve("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new bp(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _p(t,e){if(br("AsyncQueue",`${e}: ${t}`),Ta(t))return new ge(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=mo(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new fs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.Cu=new Ye(be.comparator)}track(e){const n=e.doc.key,r=this.Cu.get(n);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(n):e.type===1&&r.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):Ee():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,r)=>{e.push(r)}),e}}class As{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new As(e,n,fs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.Nu=void 0,this.listeners=[]}}class CC{constructor(){this.queries=new Ms(e=>Kb(e),Zu),this.onlineState="Unknown",this.ku=new Set}}async function S_(t,e){const n=Ce(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new kC),i)try{s.Nu=await n.onListen(r)}catch(o){const a=_p(o,`Initialization of query '${Mh(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&wp(n)}async function O_(t,e){const n=Ce(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function NC(t,e){const n=Ce(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&wp(n)}function RC(t,e,n){const r=Ce(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function wp(t){t.ku.forEach(e=>{e.next()})}class k_{constructor(e,n,r){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new As(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=As.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this.key=e}}class N_{constructor(e){this.key=e}}class PC{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Re(),this.mutatedKeys=Re(),this.tc=Wb(e),this.ec=new fs(this.tc)}get nc(){return this.Yu}sc(e,n){const r=n?n.ic:new Zm,i=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const f=i.get(c),d=ec(this.query,h)?h:null,p=!!f&&this.mutatedKeys.has(f.key),g=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let b=!1;f&&d?f.data.isEqual(d.data)?p!==g&&(r.track({type:3,doc:d}),b=!0):this.rc(f,d)||(r.track({type:2,doc:d}),b=!0,(l&&this.tc(d,l)>0||u&&this.tc(d,u)<0)&&(a=!0)):!f&&d?(r.track({type:0,doc:d}),b=!0):f&&!d&&(r.track({type:1,doc:f}),b=!0,(l||u)&&(a=!0)),b&&(d?(o=o.add(d),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((u,c)=>function(h,f){const d=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return d(h)-d(f)}(u.type,c.type)||this.tc(u.doc,c.doc)),this.oc(r);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,s.length!==0||l?{snapshot:new As(this.query,e.ec,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Zm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Re(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const n=[];return e.forEach(r=>{this.Zu.has(r)||n.push(new N_(r))}),this.Zu.forEach(r=>{e.has(r)||n.push(new C_(r))}),n}hc(e){this.Yu=e.ir,this.Zu=Re();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return As.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class xC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DC{constructor(e){this.key=e,this.fc=!1}}class LC{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Ms(a=>Kb(a),Zu),this._c=new Map,this.mc=new Set,this.gc=new Ye(be.comparator),this.yc=new Map,this.Ic=new dp,this.Tc={},this.Ec=new Map,this.Ac=Ts.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function MC(t,e){const n=KC(t);let r,i;const s=n.wc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=await oC(n.localStore,_r(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await jC(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&b_(n.remoteStore,o)}return i}async function jC(t,e,n,r,i){t.Rc=(h,f,d)=>async function(p,g,b,m){let v=g.view.sc(b);v.zi&&(v=await Qm(p.localStore,g.query,!1).then(({documents:E})=>g.view.sc(E,v)));const _=m&&m.targetChanges.get(g.targetId),y=g.view.applyChanges(v,p.isPrimaryClient,_);return tv(p,g.targetId,y.cc),y.snapshot}(t,h,f,d);const s=await Qm(t.localStore,e,!0),o=new PC(e,s.ir),a=o.sc(s.documents),l=Sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);tv(t,n,u.cc);const c=new xC(e,n,o);return t.wc.set(e,c),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),u.snapshot}async function FC(t,e){const n=Ce(t),r=n.wc.get(e),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(s=>!Zu(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await qh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),__(n.remoteStore,r.targetId),$h(n,r.targetId)}).catch(Ea)):($h(n,r.targetId),await qh(n.localStore,r.targetId,!0))}async function BC(t,e,n){const r=WC(t);try{const i=await function(s,o){const a=Ce(s),l=ct.now(),u=o.reduce((f,d)=>f.add(d.key),Re());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let d=wr(),p=Re();return a.Zi.getEntries(f,u).next(g=>{d=g,d.forEach((b,m)=>{m.isValidDocument()||(p=p.add(b))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,d)).next(g=>{c=g;const b=[];for(const m of o){const v=hk(m,c.get(m.key).overlayedDocument);v!=null&&b.push(new ei(m.key,v,jb(v.value.mapValue),Gn.exists(!0)))}return a.mutationQueue.addMutationBatch(f,l,b,o)}).next(g=>{h=g;const b=g.applyToLocalDocumentSet(c,p);return a.documentOverlayCache.saveOverlays(f,g.batchId,b)})}).then(()=>({batchId:h.batchId,changes:Qb(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.Tc[s.currentUser.toKey()];l||(l=new Ye(Fe)),l=l.insert(o,a),s.Tc[s.currentUser.toKey()]=l}(r,i.batchId,n),await ka(r,i.changes),await oc(r.remoteStore)}catch(i){const s=_p(i,"Failed to persist write");n.reject(s)}}async function R_(t,e){const n=Ce(t);try{const r=await rC(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.yc.get(s);o&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?Ge(o.fc):i.removedDocuments.size>0&&(Ge(o.fc),o.fc=!1))}),await ka(n,r,e)}catch(r){await Ea(r)}}function ev(t,e,n){const r=Ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=Ce(s);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.Mu(o)&&(l=!0)}),l&&wp(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UC(t,e,n){const r=Ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new Ye(be.comparator);o=o.insert(s,Rt.newNoDocument(s,Oe.min()));const a=Re().add(s),l=new rc(Oe.min(),new Map,new Ye(Fe),o,a);await R_(r,l),r.gc=r.gc.remove(s),r.yc.delete(e),Ep(r)}else await qh(r.localStore,e,!1).then(()=>$h(r,e,n)).catch(Ea)}async function qC(t,e){const n=Ce(t),r=e.batch.batchId;try{const i=await nC(n.localStore,e);x_(n,r,null),P_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ka(n,i)}catch(i){await Ea(i)}}async function $C(t,e,n){const r=Ce(t);try{const i=await function(s,o){const a=Ce(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(Ge(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);x_(r,e,n),P_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ka(r,i)}catch(i){await Ea(i)}}function P_(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function x_(t,e,n){const r=Ce(t);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function $h(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),n&&t.dc.Pc(r,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||D_(t,r)})}function D_(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(__(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Ep(t))}function tv(t,e,n){for(const r of n)r instanceof C_?(t.Ic.addReference(r.key,e),HC(t,r)):r instanceof N_?(ve("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||D_(t,r.key)):Ee()}function HC(t,e){const n=e.key,r=n.path.canonicalString();t.gc.get(n)||t.mc.has(r)||(ve("SyncEngine","New document in limbo: "+n),t.mc.add(r),Ep(t))}function Ep(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new be(We.fromString(e)),r=t.Ac.next();t.yc.set(r,new DC(n)),t.gc=t.gc.insert(n,r),b_(t.remoteStore,new Ur(_r(ap(n.path)),r,"TargetPurposeLimboResolution",tp.ct))}}async function ka(t,e,n){const r=Ce(t),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=gp.Li(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.dc.nu(i),await async function(a,l){const u=Ce(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>he.forEach(l,h=>he.forEach(h.Fi,f=>u.persistence.referenceDelegate.addReference(c,h.targetId,f)).next(()=>he.forEach(h.Bi,f=>u.persistence.referenceDelegate.removeReference(c,h.targetId,f)))))}catch(c){if(!Ta(c))throw c;ve("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const f=u.Ji.get(h),d=f.snapshotVersion,p=f.withLastLimboFreeSnapshotVersion(d);u.Ji=u.Ji.insert(h,p)}}}(r.localStore,s))}async function VC(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const r=await g_(n.localStore,e);n.currentUser=e,function(i,s){i.Ec.forEach(o=>{o.forEach(a=>{a.reject(new ge(le.CANCELLED,s))})}),i.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ka(n,r.er)}}function zC(t,e){const n=Ce(t),r=n.yc.get(e);if(r&&r.fc)return Re().add(r.key);{let i=Re();const s=n._c.get(e);if(!s)return i;for(const o of s){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}function KC(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=R_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UC.bind(null,e),e.dc.nu=NC.bind(null,e.eventManager),e.dc.Pc=RC.bind(null,e.eventManager),e}function WC(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$C.bind(null,e),e}class nv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ic(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return tC(this.persistence,new Zk,e.initialUser,this.serializer)}createPersistence(e){return new Xk(pp.zs,this.serializer)}createSharedClientState(e){return new lC}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class GC{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ev(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VC.bind(null,this.syncEngine),await OC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new CC}createDatastore(e){const n=ic(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new hC(i));var i;return function(s,o,a,l){return new gC(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>ev(this.syncEngine,a,0),o=Xm.D()?new Xm:new uC,new vC(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,u){const c=new LC(r,i,s,o,a,l);return u&&(c.vc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=Ce(e);ve("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Oa(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nt.UNAUTHENTICATED,this.clientId=Db.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ve("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ve("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ge(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_p(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cf(t,e){t.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await g_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function rv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XC(t);ve("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>Jm(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Jm(e.remoteStore,s)),t._onlineComponents=e}function YC(t){return t.name==="FirebaseError"?t.code===le.FAILED_PRECONDITION||t.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function XC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!YC(n))throw n;bs("Error using user provided cache. Falling back to memory cache: "+n),await Cf(t,new nv)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),await Cf(t,new nv);return t._offlineComponents}async function M_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),await rv(t,t._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),await rv(t,new GC))),t._onlineComponents}function JC(t){return M_(t).then(e=>e.syncEngine)}async function j_(t){const e=await M_(t),n=e.eventManager;return n.onListen=MC.bind(null,e.syncEngine),n.onUnlisten=FC.bind(null,e.syncEngine),n}function ZC(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new L_({next:h=>{s.enqueueAndForget(()=>O_(i,c));const f=h.docs.has(o);!f&&h.fromCache?l.reject(new ge(le.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&a&&a.source==="server"?l.reject(new ge(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new k_(ap(o.path),u,{includeMetadataChanges:!0,Ku:!0});return S_(i,c)}(await j_(t),t.asyncQueue,e,n,r)),r.promise}function eN(t,e,n={}){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new L_({next:h=>{s.enqueueAndForget(()=>O_(i,c)),h.fromCache&&a.source==="server"?l.reject(new ge(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new k_(o,u,{includeMetadataChanges:!0,Ku:!0});return S_(i,c)}(await j_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t,e,n){if(!n)throw new ge(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tN(t,e,n,r){if(e===!0&&r===!0)throw new ge(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sv(t){if(!be.isDocumentKey(t))throw new ge(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ov(t){if(be.isDocumentKey(t))throw new ge(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ac(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ee()}function Er(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ac(t);throw new ge(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nN(t,e){if(e<=0)throw new ge(le.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,n.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,r}}class lc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new av({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ge(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ge(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new av(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new AO;switch(n.type){case"firstParty":return new kO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ge(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=iv.get(e);n&&(ve("ComponentProvider","Removing Datastore"),iv.delete(e),n.terminate())}(this),Promise.resolve()}}function rN(t,e,n,r={}){var i;const s=(t=Er(t,lc))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&bs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=Nt.MOCK_USER;else{o=YA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new ge(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Nt(l)}t._authCredentials=new IO(new xb(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class $i{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class zr extends $i{constructor(e,n,r){super(e,n,ap(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new be(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function Nf(t,e,...n){if(t=ot(t),B_("collection","path",e),t instanceof lc){const r=We.fromString(e,...n);return ov(r),new zr(t,null,r)}{if(!(t instanceof Kt||t instanceof zr))throw new ge(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return ov(r),new zr(t.firestore,null,r)}}function to(t,e,...n){if(t=ot(t),arguments.length===1&&(e=Db.A()),B_("doc","path",e),t instanceof lc){const r=We.fromString(e,...n);return sv(r),new Kt(t,null,new be(r))}{if(!(t instanceof Kt||t instanceof zr))throw new ge(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return sv(r),new Kt(t.firestore,t instanceof zr?t.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new v_(this,"async_queue_retry"),this.Xc=()=>{const n=kf();n&&ve("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=kf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=kf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new mr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Ta(e))throw e;ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw br("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Hc=!1,r))));return this.Gc=n,n}enqueueAfterDelay(e,n,r){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=bp.createAndSchedule(this,e,n,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&Ee()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class Ca extends lc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new iN,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||U_(this),this._firestoreClient.terminate()}}function sN(t,e){const n=typeof t=="object"?t:Rd(),r=typeof t=="string"?t:e||"(default)",i=Fi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=GA("firestore");s&&rN(i,...s)}return i}function Tp(t){return t._firestoreClient||U_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function U_(t){var e,n,r;const i=t._freezeSettings(),s=function(o,a,l,u){return new UO(o,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,F_(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new QC(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Is(Ft.fromBase64String(e))}catch(n){throw new ge(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Is(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=/^__.*__$/;class aN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ei(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ia(e,this.data,n,this.fieldTransforms)}}class q_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ei(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class Sp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return su(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if($_(this.ca)&&oN.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class lN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ic(e)}ya(e,n,r,i=!1){return new Sp({ca:e,methodName:n,ga:r,path:xt.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Op(t){const e=t._freezeSettings(),n=ic(t._databaseId);return new lN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uN(t,e,n,r,i,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,i);kp("Data must be an object, but it was:",o,r);const a=H_(r,o);let l,u;if(s.merge)l=new ln(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const f=Hh(e,h,n);if(!o.contains(f))throw new ge(le.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);z_(c,f)||c.push(f)}l=new ln(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new aN(new en(a),l,u)}class cc extends Ap{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cc}}function cN(t,e,n,r){const i=t.ya(1,e,n);kp("Data must be an object, but it was:",i,r);const s=[],o=en.empty();Ui(r,(l,u)=>{const c=Cp(e,l,n);u=ot(u);const h=i.da(c);if(u instanceof cc)s.push(c);else{const f=Na(u,h);f!=null&&(s.push(c),o.set(c,f))}});const a=new ln(s);return new q_(o,a,i.fieldTransforms)}function fN(t,e,n,r,i,s){const o=t.ya(1,e,n),a=[Hh(e,r,n)],l=[i];if(s.length%2!=0)throw new ge(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Hh(e,s[f])),l.push(s[f+1]);const u=[],c=en.empty();for(let f=a.length-1;f>=0;--f)if(!z_(u,a[f])){const d=a[f];let p=l[f];p=ot(p);const g=o.da(d);if(p instanceof cc)u.push(d);else{const b=Na(p,g);b!=null&&(u.push(d),c.set(d,b))}}const h=new ln(u);return new q_(c,h,o.fieldTransforms)}function hN(t,e,n,r=!1){return Na(n,t.ya(r?4:3,e))}function Na(t,e){if(V_(t=ot(t)))return kp("Unsupported field value:",e,t),H_(t,e);if(t instanceof Ap)return function(n,r){if(!$_(r.ca))throw r._a(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Na(o,r.wa(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=ot(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return ok(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=ct.fromDate(n);return{timestampValue:ru(r.serializer,i)}}if(n instanceof ct){const i=new ct(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ru(r.serializer,i)}}if(n instanceof Ip)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Is)return{bytesValue:u_(r.serializer,n._byteString)};if(n instanceof Kt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hp(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r._a(`Unsupported field value: ${ac(n)}`)}(t,e)}function H_(t,e){const n={};return Lb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,i)=>{const s=Na(i,e.ha(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function V_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof Ip||t instanceof Is||t instanceof Kt||t instanceof Ap)}function kp(t,e,n){if(!V_(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=ac(n);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function Hh(t,e,n){if((e=ot(e))instanceof uc)return e._internalPath;if(typeof e=="string")return Cp(t,e);throw su("Field path arguments must be of type string or ",t,!1,void 0,n)}const dN=new RegExp("[~\\*/\\[\\]]");function Cp(t,e,n){if(e.search(dN)>=0)throw su(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uc(...e.split("."))._internalPath}catch{throw su(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function su(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ge(le.INVALID_ARGUMENT,a+t+l)}function z_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Np("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pN extends K_{data(){return super.data()}}function Np(t,e){return typeof e=="string"?Cp(t,e):e instanceof uc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rp{}class W_ extends Rp{}function Rf(t,e,...n){let r=[];e instanceof Rp&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof Pp).length,o=i.filter(a=>a instanceof fc).length;if(s>1||s>0&&o>0)throw new ge(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class fc extends W_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fc(e,n,r)}_apply(e){const n=this._parse(e);return G_(e._query,n),new $i(e.firestore,e.converter,Lh(e._query,n))}_parse(e){const n=Op(e.firestore);return function(i,s,o,a,l,u,c){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ge(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){cv(c,u);const f=[];for(const d of c)f.push(uv(a,i,d));h={arrayValue:{values:f}}}else h=uv(a,i,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||cv(c,u),h=hN(o,s,c,u==="in"||u==="not-in");return it.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pf(t,e,n){const r=e,i=Np("where",t);return fc._create(i,r,n)}class Pp extends Rp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)G_(s,a),s=Lh(s,a)}(e._query,n),new $i(e.firestore,e.converter,Lh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xp extends W_{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xp(e,n,r)}_apply(e){return new $i(e.firestore,e.converter,eu(e._query,this._limit,this._limitType))}}function lv(t){return nN("limit",t),xp._create("limit",t,"F")}function uv(t,e,n){if(typeof(n=ot(n))=="string"){if(n==="")throw new ge(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zb(e)&&n.indexOf("/")!==-1)throw new ge(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(We.fromString(n));if(!be.isDocumentKey(r))throw new ge(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pm(t,new be(r))}if(n instanceof Kt)return Pm(t,n._key);throw new ge(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ac(n)}.`)}function cv(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function G_(t,e){if(e.isInequality()){const r=lp(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new ge(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=Vb(t);s!==null&&mN(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function mN(t,e,n){if(!n.isEqual(e))throw new ge(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class vN{convertValue(e,n="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ui(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Ip(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ta(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);Ge(p_(r));const i=new na(r.get(1),r.get(3)),s=new be(r.popFirst(5));return i.isEqual(n)||br(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Q_ extends K_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Np("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Cl extends Q_{data(e={}){return super.data(e)}}class bN{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new yo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Cl(this._firestore,this._userDataWriter,r.key,r,new yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new Cl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new yo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Cl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new yo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:_N(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _N(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t){t=Er(t,Kt);const e=Er(t.firestore,Ca);return ZC(Tp(e),t._key).then(n=>EN(e,t,n))}class Y_ extends vN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Is(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function xf(t){t=Er(t,$i);const e=Er(t.firestore,Ca),n=Tp(e),r=new Y_(e);return gN(t._query),eN(n,t._query).then(i=>new bN(e,r,t,i))}function fv(t,e,n){t=Er(t,Kt);const r=Er(t.firestore,Ca),i=yN(t.converter,e,n);return X_(r,[uN(Op(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Gn.none())])}function Df(t,e,n,...r){t=Er(t,Kt);const i=Er(t.firestore,Ca),s=Op(i);let o;return o=typeof(e=ot(e))=="string"||e instanceof uc?fN(s,"updateDoc",t._key,e,n,r):cN(s,"updateDoc",t._key,e),X_(i,[o.toMutation(t._key,Gn.exists(!0))])}function X_(t,e){return function(n,r){const i=new mr;return n.asyncQueue.enqueueAndForget(async()=>BC(await JC(n),r,i)),i.promise}(Tp(t),e)}function EN(t,e,n){const r=n.docs.get(e._key),i=new Y_(t);return new Q_(t,i,e._key,r,new yo(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){Ls=n})(Ps),Zn(new Nn("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Ca(new SO(n.getProvider("auth-internal")),new NO(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new ge(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),_n(Om,"3.12.1",t),_n(Om,"3.12.1","esm2017")})();var TN="firebase",AN="9.22.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n(TN,AN,"app");const IN=(t,e)=>e.some(n=>t instanceof n);let hv,dv;function SN(){return hv||(hv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ON(){return dv||(dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const J_=new WeakMap,Vh=new WeakMap,Z_=new WeakMap,Lf=new WeakMap,Dp=new WeakMap;function kN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Kr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&J_.set(n,t)}).catch(()=>{}),Dp.set(e,t),e}function CN(t){if(Vh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Vh.set(t,e)}let zh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Z_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function NN(t){zh=t(zh)}function RN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mf(this),e,...n);return Z_.set(r,e.sort?e.sort():[e]),Kr(r)}:ON().includes(t)?function(...e){return t.apply(Mf(this),e),Kr(J_.get(this))}:function(...e){return Kr(t.apply(Mf(this),e))}}function PN(t){return typeof t=="function"?RN(t):(t instanceof IDBTransaction&&CN(t),IN(t,SN())?new Proxy(t,zh):t)}function Kr(t){if(t instanceof IDBRequest)return kN(t);if(Lf.has(t))return Lf.get(t);const e=PN(t);return e!==t&&(Lf.set(t,e),Dp.set(e,t)),e}const Mf=t=>Dp.get(t);function xN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Kr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Kr(o.result),l.oldVersion,l.newVersion,Kr(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const DN=["get","getKey","getAll","getAllKeys","count"],LN=["put","add","delete","clear"],jf=new Map;function pv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jf.get(e))return jf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=LN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DN.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return jf.set(e,s),s}NN(t=>({...t,get:(e,n,r)=>pv(e,n)||t.get(e,n,r),has:(e,n)=>!!pv(e,n)||t.has(e,n)}));const e1="@firebase/installations",Lp="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=1e4,n1=`w:${Lp}`,r1="FIS_v2",MN="https://firebaseinstallations.googleapis.com/v1",jN=60*60*1e3,FN="installations",BN="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},xi=new ji(FN,BN,UN);function i1(t){return t instanceof Dn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1({projectId:t}){return`${MN}/projects/${t}/installations`}function o1(t){return{token:t.token,requestStatus:2,expiresIn:$N(t.expiresIn),creationTime:Date.now()}}async function a1(t,e){const r=(await e.json()).error;return xi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function l1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function qN(t,{refreshToken:e}){const n=l1(t);return n.append("Authorization",HN(e)),n}async function u1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function $N(t){return Number(t.replace("s","000"))}function HN(t){return`${r1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=s1(t),i=l1(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:r1,appId:t.appId,sdkVersion:n1},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await u1(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:o1(u.authToken)}}else throw await a1("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=/^[cdef][\w-]{21}$/,Kh="";function WN(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=GN(t);return KN.test(n)?n:Kh}catch{return Kh}}function GN(t){return zN(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=new Map;function h1(t,e){const n=hc(t);d1(n,e),QN(n,e)}function d1(t,e){const n=f1.get(t);if(n)for(const r of n)r(e)}function QN(t,e){const n=YN();n&&n.postMessage({key:t,fid:e}),XN()}let Ti=null;function YN(){return!Ti&&"BroadcastChannel"in self&&(Ti=new BroadcastChannel("[Firebase] FID Change"),Ti.onmessage=t=>{d1(t.data.key,t.data.fid)}),Ti}function XN(){f1.size===0&&Ti&&(Ti.close(),Ti=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="firebase-installations-database",ZN=1,Di="firebase-installations-store";let Ff=null;function Mp(){return Ff||(Ff=xN(JN,ZN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Di)}}})),Ff}async function ou(t,e){const n=hc(t),i=(await Mp()).transaction(Di,"readwrite"),s=i.objectStore(Di),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&h1(t,e.fid),e}async function p1(t){const e=hc(t),r=(await Mp()).transaction(Di,"readwrite");await r.objectStore(Di).delete(e),await r.done}async function dc(t,e){const n=hc(t),i=(await Mp()).transaction(Di,"readwrite"),s=i.objectStore(Di),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&h1(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jp(t){let e;const n=await dc(t.appConfig,r=>{const i=eR(r),s=tR(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Kh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function eR(t){const e=t||{fid:WN(),registrationStatus:0};return g1(e)}function tR(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(xi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=nR(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:rR(t)}:{installationEntry:e}}async function nR(t,e){try{const n=await VN(t,e);return ou(t.appConfig,n)}catch(n){throw i1(n)&&n.customData.serverCode===409?await p1(t.appConfig):await ou(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function rR(t){let e=await gv(t.appConfig);for(;e.registrationStatus===1;)await c1(100),e=await gv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await jp(t);return r||n}return e}function gv(t){return dc(t,e=>{if(!e)throw xi.create("installation-not-found");return g1(e)})}function g1(t){return iR(t)?{fid:t.fid,registrationStatus:0}:t}function iR(t){return t.registrationStatus===1&&t.registrationTime+t1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR({appConfig:t,heartbeatServiceProvider:e},n){const r=oR(t,n),i=qN(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:n1,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await u1(()=>fetch(r,a));if(l.ok){const u=await l.json();return o1(u)}else throw await a1("Generate Auth Token",l)}function oR(t,{fid:e}){return`${s1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fp(t,e=!1){let n;const r=await dc(t.appConfig,s=>{if(!m1(s))throw xi.create("not-registered");const o=s.authToken;if(!e&&uR(o))return s;if(o.requestStatus===1)return n=aR(t,e),s;{if(!navigator.onLine)throw xi.create("app-offline");const a=fR(s);return n=lR(t,a),a}});return n?await n:r.authToken}async function aR(t,e){let n=await mv(t.appConfig);for(;n.authToken.requestStatus===1;)await c1(100),n=await mv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Fp(t,e):r}function mv(t){return dc(t,e=>{if(!m1(e))throw xi.create("not-registered");const n=e.authToken;return hR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function lR(t,e){try{const n=await sR(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await ou(t.appConfig,r),n}catch(n){if(i1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await p1(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ou(t.appConfig,r)}throw n}}function m1(t){return t!==void 0&&t.registrationStatus===2}function uR(t){return t.requestStatus===2&&!cR(t)}function cR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+jN}function fR(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function hR(t){return t.requestStatus===1&&t.requestTime+t1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t){const e=t,{installationEntry:n,registrationPromise:r}=await jp(e);return r?r.catch(console.error):Fp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(t,e=!1){const n=t;return await gR(n),(await Fp(n,e)).token}async function gR(t){const{registrationPromise:e}=await jp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){if(!t||!t.options)throw Bf("App Configuration");if(!t.name)throw Bf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Bf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Bf(t){return xi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="installations",vR="installations-internal",yR=t=>{const e=t.getProvider("app").getImmediate(),n=mR(e),r=Fi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},bR=t=>{const e=t.getProvider("app").getImmediate(),n=Fi(e,v1).getImmediate();return{getId:()=>dR(n),getToken:i=>pR(n,i)}};function _R(){Zn(new Nn(v1,yR,"PUBLIC")),Zn(new Nn(vR,bR,"PRIVATE"))}_R();_n(e1,Lp);_n(e1,Lp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="analytics",wR="firebase_id",ER="origin",TR=60*1e3,AR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=new Mu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',["no-client-id"]:'The "client_id" field is empty.',["invalid-gtag-resource"]:"Trusted Types detected an invalid gtag resource: {$gtagURL}."},un=new ji("analytics","Analytics",IR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t){if(!t.startsWith(Bp)){const e=un.create("invalid-gtag-resource",{gtagURL:t});return tn.warn(e.message),""}return t}function y1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function OR(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function kR(t,e){const n=OR("firebase-js-sdk-policy",{createScriptURL:SR}),r=document.createElement("script"),i=`${Bp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function CR(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function NR(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await y1(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){tn.error(a)}t("config",i,s)}async function RR(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await y1(n);for(const l of o){const u=a.find(h=>h.measurementId===l),c=u&&e[u.appId];if(c)s.push(c);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){tn.error(s)}}function PR(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await RR(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await NR(t,e,n,r,a,l)}else if(s==="consent"){const[a]=o;t("consent","update",a)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){tn.error(a)}}return i}function xR(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=PR(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function DR(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Bp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=30,MR=1e3;class jR{constructor(e={},n=MR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const b1=new jR;function FR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function BR(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:FR(r)},s=AR.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw un.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function UR(t,e=b1,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw un.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw un.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new HR;return setTimeout(async()=>{a.abort()},n!==void 0?n:TR),_1({appId:r,apiKey:i,measurementId:s},o,a,e)}async function _1(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=b1){var s;const{appId:o,measurementId:a}=t;try{await qR(r,e)}catch(l){if(a)return tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await BR(t);return i.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!$R(u)){if(i.deleteThrottleMetadata(o),a)return tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const c=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?sm(n,i.intervalMillis,LR):sm(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(o,h),tn.debug(`Calling attemptFetch again in ${c} millis`),_1(t,h,r,i)}}function qR(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $R(t){if(!(t instanceof Dn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class HR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function VR(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(){if(A0())try{await I0()}catch(t){return tn.warn(un.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return tn.warn(un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function KR(t,e,n,r,i,s,o){var a;const l=UR(t);l.then(d=>{n[d.measurementId]=d.appId,t.options.measurementId&&d.measurementId!==t.options.measurementId&&tn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${d.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(d=>tn.error(d)),e.push(l);const u=zR().then(d=>{if(d)return r.getId()}),[c,h]=await Promise.all([l,u]);DR(s)||kR(s,c.measurementId),i("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[ER]="firebase",f.update=!0,h!=null&&(f[wR]=h),i("config",c.measurementId,f),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.app=e}_delete(){return delete ko[this.app.options.appId],Promise.resolve()}}let ko={},vv=[];const yv={};let Uf="dataLayer",GR="gtag",bv,w1,_v=!1;function QR(){const t=[];if(T0()&&t.push("This is a browser extension environment."),eI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=un.create("invalid-analytics-context",{errorInfo:e});tn.warn(n.message)}}function YR(t,e,n){QR();const r=t.options.appId;if(!r)throw un.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw un.create("no-api-key");if(ko[r]!=null)throw un.create("already-exists",{id:r});if(!_v){CR(Uf);const{wrappedGtag:s,gtagCore:o}=xR(ko,vv,yv,Uf,GR);w1=s,bv=o,_v=!0}return ko[r]=KR(t,vv,yv,e,bv,Uf,n),new WR(t)}function XR(t=Rd()){t=ot(t);const e=Fi(t,au);return e.isInitialized()?e.getImmediate():JR(t)}function JR(t,e={}){const n=Fi(t,au);if(n.isInitialized()){const i=n.getImmediate();if(Vo(e,n.getOptions()))return i;throw un.create("already-initialized")}return n.initialize({options:e})}function ZR(t,e,n,r){t=ot(t),VR(w1,ko[t.app.options.appId],e,n,r).catch(i=>tn.error(i))}const wv="@firebase/analytics",Ev="0.10.0";function eP(){Zn(new Nn(au,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return YR(r,i,n)},"PUBLIC")),Zn(new Nn("analytics-internal",t,"PRIVATE")),_n(wv,Ev),_n(wv,Ev,"esm2017");function t(e){try{const n=e.getProvider(au).getImmediate();return{logEvent:(r,i,s)=>ZR(n,r,i,s)}}catch(n){throw un.create("interop-component-reg-failed",{reason:n})}}}eP();function Up(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function E1(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tP=E1,T1=new ji("auth","Firebase",E1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new Mu("@firebase/auth");function nP(t,...e){lu.logLevel<=Me.WARN&&lu.warn(`Auth (${Ps}): ${t}`,...e)}function Nl(t,...e){lu.logLevel<=Me.ERROR&&lu.error(`Auth (${Ps}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,...e){throw qp(t,...e)}function Yn(t,...e){return qp(t,...e)}function A1(t,e,n){const r=Object.assign(Object.assign({},tP()),{[e]:n});return new ji("auth","Firebase",r).create(e,{appName:t.name})}function rP(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&tr(t,"argument-error"),A1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return T1.create(t,...e)}function ke(t,e,...n){if(!t)throw qp(e,...n)}function pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nl(e),new Error(e)}function Tr(t,e){t||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iP(){return Tv()==="http:"||Tv()==="https:"}function Tv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iP()||T0()||"connection"in navigator)?navigator.onLine:!0}function oP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this.shortDelay=e,this.longDelay=n,Tr(n>e,"Short delay should be less than long delay!"),this.isMobile=XA()||JA()}get(){return sP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t,e){Tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new Ra(3e4,6e4);function S1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pa(t,e,n,r,i={}){return O1(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ha(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),I1.fetch()(k1(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function O1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},aP),e);try{const i=new cP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw gl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw gl(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw A1(t,c,u);tr(t,c)}}catch(i){if(i instanceof Dn)throw i;tr(t,"network-request-failed",{message:String(i)})}}async function uP(t,e,n,r,i={}){const s=await Pa(t,e,n,r,i);return"mfaPendingCredential"in s&&tr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function k1(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?$p(t.config,i):`${t.config.apiScheme}://${i}`}class cP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yn(this.auth,"network-request-failed")),lP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(t,e){return Pa(t,"POST","/v1/accounts:delete",e)}async function hP(t,e){return Pa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dP(t,e=!1){const n=ot(t),r=await n.getIdToken(e),i=Hp(r);ke(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Co(qf(i.auth_time)),issuedAtTime:Co(qf(i.iat)),expirationTime:Co(qf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function qf(t){return Number(t)*1e3}function Hp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nl("JWT malformed, contained fewer than 3 sections"),null;try{const i=b0(n);return i?JSON.parse(i):(Nl("Failed to decode base64 JWT payload"),null)}catch(i){return Nl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function pP(t){const e=Hp(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dn&&gP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Co(this.lastLoginAt),this.creationTime=Co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await oa(t,hP(n,{idToken:r}));ke(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?bP(s.providerUserInfo):[],a=yP(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new C1(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function vP(t){const e=ot(t);await uu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bP(t){return t.map(e=>{var{providerId:n}=e,r=Up(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(t,e){const n=await O1(t,{},async()=>{const r=ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=k1(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",I1.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ke(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await _P(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new aa;return r&&(ke(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ke(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ke(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ki{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new C1(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await oa(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dP(this,e)}reload(){return vP(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ki(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await uu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await oa(this,fP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,d=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:y,isAnonymous:E,providerData:k,stsTokenManager:S}=n;ke(_&&S,e,"internal-error");const I=aa.fromJSON(this.name,S);ke(typeof _=="string",e,"internal-error"),Pr(h,e.name),Pr(f,e.name),ke(typeof y=="boolean",e,"internal-error"),ke(typeof E=="boolean",e,"internal-error"),Pr(d,e.name),Pr(p,e.name),Pr(g,e.name),Pr(b,e.name),Pr(m,e.name),Pr(v,e.name);const R=new ki({uid:_,auth:e,email:f,emailVerified:y,displayName:h,isAnonymous:E,photoURL:p,phoneNumber:d,tenantId:g,stsTokenManager:I,createdAt:m,lastLoginAt:v});return k&&Array.isArray(k)&&(R.providerData=k.map(O=>Object.assign({},O))),b&&(R._redirectEventId=b),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new aa;i.updateFromServerResponse(n);const s=new ki({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await uu(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;function gr(t){Tr(t instanceof Function,"Expected a class definition");let e=Av.get(t);return e?(Tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Av.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}N1.type="NONE";const Iv=N1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t,e,n){return`firebase:${t}:${e}:${n}`}class hs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Rl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Rl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ki._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hs(gr(Iv),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||gr(Iv);const o=Rl(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=ki._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new hs(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new hs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(x1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(R1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L1(e))return"Blackberry";if(M1(e))return"Webos";if(Vp(e))return"Safari";if((e.includes("chrome/")||P1(e))&&!e.includes("edge/"))return"Chrome";if(D1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function R1(t=jt()){return/firefox\//i.test(t)}function Vp(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function P1(t=jt()){return/crios\//i.test(t)}function x1(t=jt()){return/iemobile/i.test(t)}function D1(t=jt()){return/android/i.test(t)}function L1(t=jt()){return/blackberry/i.test(t)}function M1(t=jt()){return/webos/i.test(t)}function pc(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wP(t=jt()){var e;return pc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EP(){return ZA()&&document.documentMode===10}function j1(t=jt()){return pc(t)||D1(t)||M1(t)||L1(t)||/windows phone/i.test(t)||x1(t)}function TP(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e=[]){let n;switch(t){case"Browser":n=Sv(jt());break;case"Worker":n=`${Sv(jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ps}/${r}`}async function B1(t,e){return Pa(t,"GET","/v2/recaptchaConfig",S1(t,e))}function Ov(t){return t!==void 0&&t.enterprise!==void 0}class U1{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function q1(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Yn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",AP().appendChild(r)})}function IP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const SP="https://www.google.com/recaptcha/enterprise.js?render=",OP="recaptcha-enterprise",kP="NO_RECAPTCHA";class CP{constructor(e){this.type=OP,this.auth=xa(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{B1(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new U1(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Ov(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(kP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Ov(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}q1(SP+a).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kv(this),this.idTokenSubscription=new kv(this),this.beforeStateQueue=new NP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=T1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await hs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ot(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}async initializeRecaptchaConfig(){const e=await B1(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new U1(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new CP(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ji("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await hs.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ke(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&nP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xa(t){return ot(t)}class kv{constructor(e){this.auth=e,this.observer=null,this.addObserver=sI(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t,e){const n=Fi(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Vo(s,e??{}))return i;tr(i,"already-initialized")}return n.initialize({options:e})}function xP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DP(t,e,n){const r=xa(t);ke(r._canInitEmulator,r,"emulator-config-failed"),ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=$1(e),{host:o,port:a}=LP(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||MP()}function $1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LP(t){const e=$1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Cv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Cv(o)}}}function Cv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(t,e){return uP(t,"POST","/v1/accounts:signInWithIdp",S1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="http://localhost";class Li extends H1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Li(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Up(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Li(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ds(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ds(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ds(e,n)}buildRequest(){const e={requestUri:jP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ha(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends zp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Da{constructor(){super("facebook.com")}static credential(e){return Li._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Da{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Li._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.GOOGLE_SIGN_IN_METHOD="google.com";hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends Da{constructor(){super("github.com")}static credential(e){return Li._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.GITHUB_SIGN_IN_METHOD="github.com";Fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Da{constructor(){super("twitter.com")}static credential(e,n){return Li._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Br.credential(n,r)}catch{return null}}}Br.TWITTER_SIGN_IN_METHOD="twitter.com";Br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ki._fromIdTokenResponse(e,r,i),o=Nv(r);return new Ss({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Nv(r);return new Ss({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Nv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Dn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new cu(e,n,r,i)}}function V1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cu._fromErrorAndOperation(t,s,e,r):s})}async function FP(t,e,n=!1){const r=await oa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ss._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await oa(t,V1(r,i,e,t),n);ke(s.idToken,r,"internal-error");const o=Hp(s.idToken);ke(o,r,"internal-error");const{sub:a}=o;return ke(t.uid===a,r,"user-mismatch"),Ss._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&tr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(t,e,n=!1){const r="signIn",i=await V1(t,r,e),s=await Ss._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t,e){return ot(t).setPersistence(e)}function $P(t,e,n,r){return ot(t).onIdTokenChanged(e,n,r)}function HP(t,e,n){return ot(t).beforeAuthStateChanged(e,n)}function XM(t,e,n,r){return ot(t).onAuthStateChanged(e,n,r)}function JM(t){return ot(t).signOut()}const fu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fu,"1"),this.storage.removeItem(fu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(){const t=jt();return Vp(t)||pc(t)}const zP=1e3,KP=10;class K1 extends z1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=VP()&&TP(),this.fallbackToPolling=j1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);EP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,KP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}K1.type="LOCAL";const WP=K1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1 extends z1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}W1.type="SESSION";const Kp=W1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new gc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await GP(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Wp("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return window}function YP(t){Xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}async function XP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ZP(){return G1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="firebaseLocalStorageDb",ex=1,hu="firebaseLocalStorage",Y1="fbase_key";class La{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mc(t,e){return t.transaction([hu],e?"readwrite":"readonly").objectStore(hu)}function tx(){const t=indexedDB.deleteDatabase(Q1);return new La(t).toPromise()}function Gh(){const t=indexedDB.open(Q1,ex);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hu,{keyPath:Y1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hu)?e(r):(r.close(),await tx(),e(await Gh()))})})}async function Rv(t,e,n){const r=mc(t,!0).put({[Y1]:e,value:n});return new La(r).toPromise()}async function nx(t,e){const n=mc(t,!1).get(e),r=await new La(n).toPromise();return r===void 0?null:r.value}function Pv(t,e){const n=mc(t,!0).delete(e);return new La(n).toPromise()}const rx=800,ix=3;class X1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ix)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gc._getInstance(ZP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await XP(),!this.activeServiceWorker)return;this.sender=new QP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gh();return await Rv(e,fu,"1"),await Pv(e,fu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nx(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=mc(i,!1).getAll();return new La(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X1.type="LOCAL";const sx=X1;new Ra(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t,e){return e?gr(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp extends H1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ds(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ds(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ox(t){return UP(t.auth,new Gp(t),t.bypassAuthState)}function ax(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),BP(n,new Gp(t),t.bypassAuthState)}async function lx(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),FP(n,new Gp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ox;case"linkViaPopup":case"linkViaRedirect":return lx;case"reauthViaPopup":case"reauthViaRedirect":return ax;default:tr(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=new Ra(2e3,1e4);async function cx(t,e,n){const r=xa(t);rP(t,e,zp);const i=J1(r,n);return new Ai(r,"signInViaPopup",e,i).executeNotNull()}class Ai extends Z1{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ai.currentPopupAction&&Ai.currentPopupAction.cancel(),Ai.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Tr(this.filter.length===1,"Popup operations only handle one event");const e=Wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ai.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ux.get())};e()}}Ai.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="pendingRedirect",Pl=new Map;class hx extends Z1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pl.get(this.auth._key());if(!e){try{const r=await dx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pl.set(this.auth._key(),e)}return this.bypassAuthState||Pl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dx(t,e){const n=mx(e),r=gx(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function px(t,e){Pl.set(t._key(),e)}function gx(t){return gr(t._redirectPersistence)}function mx(t){return Rl(fx,t.config.apiKey,t.name)}async function vx(t,e,n=!1){const r=xa(t),i=J1(r,e),o=await new hx(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=10*60*1e3;class bx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_x(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ew(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yx&&this.cachedEventUids.clear(),this.cachedEventUids.has(xv(e))}saveEventToCache(e){this.cachedEventUids.add(xv(e)),this.lastProcessedEventTime=Date.now()}}function xv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ew({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _x(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ew(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wx(t,e={}){return Pa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tx=/^https?/;async function Ax(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wx(t);for(const n of e)try{if(Ix(n))return}catch{}tr(t,"unauthorized-domain")}function Ix(t){const e=Wh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Tx.test(n))return!1;if(Ex.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new Ra(3e4,6e4);function Dv(){const t=Xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ox(t){return new Promise((e,n)=>{var r,i,s;function o(){Dv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dv(),n(Yn(t,"network-request-failed"))},timeout:Sx.get()})}if(!((i=(r=Xn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xn().gapi)===null||s===void 0)&&s.load)o();else{const a=IP("iframefcb");return Xn()[a]=()=>{gapi.load?o():n(Yn(t,"network-request-failed"))},q1(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw xl=null,e})}let xl=null;function kx(t){return xl=xl||Ox(t),xl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=new Ra(5e3,15e3),Nx="__/auth/iframe",Rx="emulator/auth/iframe",Px={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dx(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$p(e,Rx):`https://${t.config.authDomain}/${Nx}`,r={apiKey:e.apiKey,appName:t.name,v:Ps},i=xx.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ha(r).slice(1)}`}async function Lx(t){const e=await kx(t),n=Xn().gapi;return ke(n,t,"internal-error"),e.open({where:document.body,url:Dx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Px,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Yn(t,"network-request-failed"),a=Xn().setTimeout(()=>{s(o)},Cx.get());function l(){Xn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jx=500,Fx=600,Bx="_blank",Ux="http://localhost";class Lv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qx(t,e,n,r=jx,i=Fx){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Mx),{width:r.toString(),height:i.toString(),top:s,left:o}),u=jt().toLowerCase();n&&(a=P1(u)?Bx:n),R1(u)&&(e=e||Ux,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[d,p])=>`${f}${d}=${p},`,"");if(wP(u)&&a!=="_self")return $x(e||"",a),new Lv(null);const h=window.open(e||"",a,c);ke(h,t,"popup-blocked");try{h.focus()}catch{}return new Lv(h)}function $x(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="__/auth/handler",Vx="emulator/auth/handler",zx=encodeURIComponent("fac");async function Mv(t,e,n,r,i,s){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ps,eventId:i};if(e instanceof zp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",iI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries(s||{}))o[c]=h}if(e instanceof Da){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${zx}=${encodeURIComponent(l)}`:"";return`${Kx(t)}?${ha(a).slice(1)}${u}`}function Kx({config:t}){return t.emulator?$p(t,Vx):`https://${t.authDomain}/${Hx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="webStorageSupport";class Wx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kp,this._completeRedirectFn=vx,this._overrideRedirectResult=px}async _openPopup(e,n,r,i){var s;Tr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Mv(e,n,r,Wh(),i);return qx(e,o,Wp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Mv(e,n,r,Wh(),i);return YP(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Tr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Lx(e),r=new bx(e);return n.register("authEvent",i=>(ke(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($f,{type:$f},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[$f];o!==void 0&&n(!!o),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ax(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return j1()||Vp()||pc()}}const Gx=Wx;var jv="@firebase/auth",Fv="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Xx(t){Zn(new Nn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F1(t)},u=new RP(r,i,s,l);return xP(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zn(new Nn("auth-internal",e=>{const n=xa(e.getProvider("auth").getImmediate());return(r=>new Qx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_n(jv,Fv,Yx(t)),_n(jv,Fv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=5*60,Zx=E0("authIdTokenMaxAge")||Jx;let Bv=null;const eD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Zx)return;const i=n==null?void 0:n.token;Bv!==i&&(Bv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tD(t=Rd()){const e=Fi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=PP(t,{popupRedirectResolver:Gx,persistence:[sx,WP,Kp]}),r=E0("authTokenSyncURL");if(r){const s=eD(r);HP(n,s,()=>s(n.currentUser)),$P(n,o=>s(o))}const i=_0("auth");return i&&DP(n,`http://${i}`),n}Xx("Browser");const nD={apiKey:"AIzaSyCprJk8q_WfSlpGSNvtK_S1kRzDzEXG3A0",authDomain:"app-emt.firebaseapp.com",projectId:"app-emt",storageBucket:"app-emt.appspot.com",messagingSenderId:"461077002545",appId:"1:461077002545:web:d7b026093bd1094efdd810",measurementId:"G-GJN54DHEWQ"},Qp=k0(nD);XR(Qp);const di=sN(Qp),Uv=tD(Qp),gn=g0(()=>{const t=$t({isAuthenticated:!1,tryToAuthenticated:!1}),e=$t({isTeacher:!1,id:null,appData:{name:"",class:"",ruleNumber:""},evaluation:{}});return{userStatus:t,user:e,registerUser:()=>new Promise(r=>{gn().user.appData.name&&gn().user.appData.class&&gn().user.appData.ruleNumber?(gn().userStatus.tryToAuthenticated=!0,setTimeout(()=>{du.registerUser().then(()=>{gn().userStatus.tryToAuthenticated=!1,gn().user.status="active",setTimeout(()=>{r(!0)},3e3)})},3e3)):alert("data tidak boleh kosong")})}}),du={getAppCollection:t=>new Promise(async(e,n)=>{const r=Nf(di,t),i=await xf(Rf(r,Pf("appName","==",t),lv(1)));if(i.empty)setTimeout(async()=>{n(!1)},3e3);else{let s=0;const o={};i.forEach(a=>{s++,o[`${a.id}`]=a.data(),_t().appData.appRef=`${t}/${a.id}`,s===i.size&&e(!0)})}}),getUserData:(t,e)=>new Promise(async n=>{const r=Nf(di,String(_t().appData.appRef),"users"),i=await xf(Rf(r,Pf("email","==",t),lv(1))),s=pt();i.empty?setTimeout(async()=>{await fv(to(r),{email:t,registeredAt:Number(fr().value),isTeacher:!1,data:{...e==null?void 0:e.providerData[0]},appData:{name:e==null?void 0:e.providerData[0].displayName},status:"nonactive"}).then(()=>{du.getUserData(t,e)})},3e3):i.forEach(o=>{s.value={...o.data()},s.value.id=o.id,n(s.value)})}),registerUser:()=>new Promise(async t=>{const e=to(di,String(_t().appData.appRef),`users/${gn().user.id}`);gn().user.appData.evaluation={};const n={appData:gn().user.appData,status:"active"},r=await Df(e,n);t({status:!0,reason:r})}),updateUserAppData:()=>new Promise(async t=>{const e=to(di,String(_t().appData.appRef),`users/${gn().user.id}`),n={appData:gn().user.appData},r=await Df(e,n);t({status:!0,reason:r})}),getAllStudentData:()=>new Promise(async(t,e)=>{const n=Nf(di,String(_t().appData.appRef),"users"),r=await xf(Rf(n,Pf("isTeacher","==",!1)));_t().allStudent.isGettingData=!0,setTimeout(()=>{if(r.empty)e(!1),_t().allStudent.isGettingData=!1,_t().allStudent.lastGettingData=fr().value;else{let i=[];r.forEach(s=>{i.push(s.data()),Object.keys(i).length===r.size&&(_t().allStudent.data=i,t(i),_t().allStudent.isGettingData=!1,_t().allStudent.lastGettingData=fr().value)})}},3e3)}),getContentDoc:(t,e)=>new Promise(async(n,r)=>{const i=to(di,`${_t().appData.appRef}/${t}`,e),s=await wN(i);s.exists()?n(s.data()):(fv(i,{name:e,subContent:{}}),setTimeout(()=>{du.getContentDoc(t,e).then(()=>{}),r(!1)},3e3))}),updateContentDoc:(t,e,n)=>new Promise(async r=>{const i=to(di,`${_t().appData.appRef}/${t}`,e),s=await Df(i,n);r({status:!0,reason:s})})},rD={tryToAuthenticationUser:()=>new Promise(async t=>{qP(Uv,Kp).then(async()=>{const e=new hr;try{const r=(await cx(Uv,e)).user.providerData;t({success:!!r,user:r})}catch(n){t({success:!n,user:null})}})})};var qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ft={},Yp={},Xp={},Ma={},Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});var iD=`
`;Wt.NewLine=iD;var Qh;(function(t){t.Ordered="ordered",t.Bullet="bullet",t.Checked="checked",t.Unchecked="unchecked"})(Qh||(Qh={}));Wt.ListType=Qh;var Yh;(function(t){t.Sub="sub",t.Super="super"})(Yh||(Yh={}));Wt.ScriptType=Yh;var Xh;(function(t){t.Rtl="rtl"})(Xh||(Xh={}));Wt.DirectionType=Xh;var Jh;(function(t){t.Left="left",t.Center="center",t.Right="right",t.Justify="justify"})(Jh||(Jh={}));Wt.AlignType=Jh;var Zh;(function(t){t.Image="image",t.Video="video",t.Formula="formula",t.Text="text"})(Zh||(Zh={}));Wt.DataType=Zh;var ed;(function(t){t.Block="block",t.InlineGroup="inline-group",t.List="list",t.Video="video",t.Table="table"})(ed||(ed={}));Wt.GroupType=ed;var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});var sD=function(){function t(e,n){this.type=e,this.value=n}return t}();Fs.InsertDataQuill=sD;var oD=function(){function t(e,n){this.type=e,this.value=n}return t}();Fs.InsertDataCustom=oD;var pu={exports:{}};pu.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",h="[object Date]",f="[object Error]",d="[object Function]",p="[object GeneratorFunction]",g="[object Map]",b="[object Number]",m="[object Null]",v="[object Object]",_="[object Promise]",y="[object Proxy]",E="[object RegExp]",k="[object Set]",S="[object String]",I="[object Symbol]",R="[object Undefined]",O="[object WeakMap]",T="[object ArrayBuffer]",A="[object DataView]",C="[object Float32Array]",D="[object Float64Array]",q="[object Int8Array]",Q="[object Int16Array]",Y="[object Int32Array]",ie="[object Uint8Array]",X="[object Uint8ClampedArray]",F="[object Uint16Array]",N="[object Uint32Array]",j=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,J=/^(?:0|[1-9]\d*)$/,K={};K[C]=K[D]=K[q]=K[Q]=K[Y]=K[ie]=K[X]=K[F]=K[N]=!0,K[a]=K[l]=K[T]=K[c]=K[A]=K[h]=K[f]=K[d]=K[g]=K[b]=K[v]=K[E]=K[k]=K[S]=K[O]=!1;var L=typeof qe=="object"&&qe&&qe.Object===Object&&qe,x=typeof self=="object"&&self&&self.Object===Object&&self,V=L||x||Function("return this")(),$=e&&!e.nodeType&&e,ee=$&&!0&&t&&!t.nodeType&&t,fe=ee&&ee.exports===$,M=fe&&L.process,B=function(){try{return M&&M.binding&&M.binding("util")}catch{}}(),z=B&&B.isTypedArray;function re(w,P){for(var H=-1,oe=w==null?0:w.length,Se=0,ye=[];++H<oe;){var Pe=w[H];P(Pe,H,w)&&(ye[Se++]=Pe)}return ye}function se(w,P){for(var H=-1,oe=P.length,Se=w.length;++H<oe;)w[Se+H]=P[H];return w}function ae(w,P){for(var H=-1,oe=w==null?0:w.length;++H<oe;)if(P(w[H],H,w))return!0;return!1}function G(w,P){for(var H=-1,oe=Array(w);++H<w;)oe[H]=P(H);return oe}function W(w){return function(P){return w(P)}}function te(w,P){return w.has(P)}function Z(w,P){return w==null?void 0:w[P]}function ne(w){var P=-1,H=Array(w.size);return w.forEach(function(oe,Se){H[++P]=[Se,oe]}),H}function ue(w,P){return function(H){return w(P(H))}}function ce(w){var P=-1,H=Array(w.size);return w.forEach(function(oe){H[++P]=oe}),H}var de=Array.prototype,_e=Function.prototype,Ie=Object.prototype,me=V["__core-js_shared__"],He=_e.toString,Te=Ie.hasOwnProperty,Ze=function(){var w=/[^.]+$/.exec(me&&me.keys&&me.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),ti=Ie.toString,nr=RegExp("^"+He.call(Te).replace(j,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sr=fe?V.Buffer:void 0,et=V.Symbol,Bt=V.Uint8Array,rr=Ie.propertyIsEnumerable,ni=de.splice,En=et?et.toStringTag:void 0,Vi=Object.getOwnPropertySymbols,Us=Sr?Sr.isBuffer:void 0,ri=ue(Object.keys,Object),qs=sr(V,"DataView"),ii=sr(V,"Map"),$s=sr(V,"Promise"),Hs=sr(V,"Set"),Vs=sr(V,"WeakMap"),Or=sr(Object,"create"),qa=Ut(qs),ir=Ut(ii),wc=Ut($s),Ec=Ut(Hs),Tc=Ut(Vs),$a=et?et.prototype:void 0,zs=$a?$a.valueOf:void 0;function vt(w){var P=-1,H=w==null?0:w.length;for(this.clear();++P<H;){var oe=w[P];this.set(oe[0],oe[1])}}function Ac(){this.__data__=Or?Or(null):{},this.size=0}function Ic(w){var P=this.has(w)&&delete this.__data__[w];return this.size-=P?1:0,P}function Sc(w){var P=this.__data__;if(Or){var H=P[w];return H===r?void 0:H}return Te.call(P,w)?P[w]:void 0}function Oc(w){var P=this.__data__;return Or?P[w]!==void 0:Te.call(P,w)}function kc(w,P){var H=this.__data__;return this.size+=this.has(w)?0:1,H[w]=Or&&P===void 0?r:P,this}vt.prototype.clear=Ac,vt.prototype.delete=Ic,vt.prototype.get=Sc,vt.prototype.has=Oc,vt.prototype.set=kc;function St(w){var P=-1,H=w==null?0:w.length;for(this.clear();++P<H;){var oe=w[P];this.set(oe[0],oe[1])}}function Cc(){this.__data__=[],this.size=0}function Nc(w){var P=this.__data__,H=Wi(P,w);if(H<0)return!1;var oe=P.length-1;return H==oe?P.pop():ni.call(P,H,1),--this.size,!0}function Rc(w){var P=this.__data__,H=Wi(P,w);return H<0?void 0:P[H][1]}function Pc(w){return Wi(this.__data__,w)>-1}function xc(w,P){var H=this.__data__,oe=Wi(H,w);return oe<0?(++this.size,H.push([w,P])):H[oe][1]=P,this}St.prototype.clear=Cc,St.prototype.delete=Nc,St.prototype.get=Rc,St.prototype.has=Pc,St.prototype.set=xc;function Qt(w){var P=-1,H=w==null?0:w.length;for(this.clear();++P<H;){var oe=w[P];this.set(oe[0],oe[1])}}function Dc(){this.size=0,this.__data__={hash:new vt,map:new(ii||St),string:new vt}}function Lc(w){var P=Tn(this,w).delete(w);return this.size-=P?1:0,P}function Mc(w){return Tn(this,w).get(w)}function jc(w){return Tn(this,w).has(w)}function Fc(w,P){var H=Tn(this,w),oe=H.size;return H.set(w,P),this.size+=H.size==oe?0:1,this}Qt.prototype.clear=Dc,Qt.prototype.delete=Lc,Qt.prototype.get=Mc,Qt.prototype.has=jc,Qt.prototype.set=Fc;function zi(w){var P=-1,H=w==null?0:w.length;for(this.__data__=new Qt;++P<H;)this.add(w[P])}function Ha(w){return this.__data__.set(w,r),this}function Ki(w){return this.__data__.has(w)}zi.prototype.add=zi.prototype.push=Ha,zi.prototype.has=Ki;function Ln(w){var P=this.__data__=new St(w);this.size=P.size}function Ks(){this.__data__=new St,this.size=0}function Bc(w){var P=this.__data__,H=P.delete(w);return this.size=P.size,H}function Uc(w){return this.__data__.get(w)}function qc(w){return this.__data__.has(w)}function $c(w,P){var H=this.__data__;if(H instanceof St){var oe=H.__data__;if(!ii||oe.length<n-1)return oe.push([w,P]),this.size=++H.size,this;H=this.__data__=new Qt(oe)}return H.set(w,P),this.size=H.size,this}Ln.prototype.clear=Ks,Ln.prototype.delete=Bc,Ln.prototype.get=Uc,Ln.prototype.has=qc,Ln.prototype.set=$c;function Hc(w,P){var H=Gi(w),oe=!H&&Ga(w),Se=!H&&!oe&&Qi(w),ye=!H&&!oe&&!Se&&Xa(w),Pe=H||oe||Se||ye,De=Pe?G(w.length,String):[],tt=De.length;for(var Be in w)(P||Te.call(w,Be))&&!(Pe&&(Be=="length"||Se&&(Be=="offset"||Be=="parent")||ye&&(Be=="buffer"||Be=="byteLength"||Be=="byteOffset")||Xc(Be,tt)))&&De.push(Be);return De}function Wi(w,P){for(var H=w.length;H--;)if(Wa(w[H][0],P))return H;return-1}function Ws(w,P,H){var oe=P(w);return Gi(w)?oe:se(oe,H(w))}function si(w){return w==null?w===void 0?R:m:En&&En in Object(w)?or(w):Ka(w)}function Va(w){return jn(w)&&si(w)==a}function za(w,P,H,oe,Se){return w===P?!0:w==null||P==null||!jn(w)&&!jn(P)?w!==w&&P!==P:Vc(w,P,H,oe,za,Se)}function Vc(w,P,H,oe,Se,ye){var Pe=Gi(w),De=Gi(P),tt=Pe?l:Mn(w),Be=De?l:Mn(P);tt=tt==a?v:tt,Be=Be==a?v:Be;var Ot=tt==v,Yt=Be==v,at=tt==Be;if(at&&Qi(w)){if(!Qi(P))return!1;Pe=!0,Ot=!1}if(at&&!Ot)return ye||(ye=new Ln),Pe||Xa(w)?Gs(w,P,H,oe,Se,ye):Gc(w,P,tt,H,oe,Se,ye);if(!(H&i)){var kt=Ot&&Te.call(w,"__wrapped__"),yt=Yt&&Te.call(P,"__wrapped__");if(kt||yt){var kr=kt?w.value():w,ar=yt?P.value():P;return ye||(ye=new Ln),Se(kr,ar,H,oe,ye)}}return at?(ye||(ye=new Ln),Qc(w,P,H,oe,Se,ye)):!1}function zc(w){if(!Ya(w)||Zc(w))return!1;var P=Qa(w)?nr:U;return P.test(Ut(w))}function Kc(w){return jn(w)&&Ys(w.length)&&!!K[si(w)]}function Wc(w){if(!ef(w))return ri(w);var P=[];for(var H in Object(w))Te.call(w,H)&&H!="constructor"&&P.push(H);return P}function Gs(w,P,H,oe,Se,ye){var Pe=H&i,De=w.length,tt=P.length;if(De!=tt&&!(Pe&&tt>De))return!1;var Be=ye.get(w);if(Be&&ye.get(P))return Be==P;var Ot=-1,Yt=!0,at=H&s?new zi:void 0;for(ye.set(w,P),ye.set(P,w);++Ot<De;){var kt=w[Ot],yt=P[Ot];if(oe)var kr=Pe?oe(yt,kt,Ot,P,w,ye):oe(kt,yt,Ot,w,P,ye);if(kr!==void 0){if(kr)continue;Yt=!1;break}if(at){if(!ae(P,function(ar,ai){if(!te(at,ai)&&(kt===ar||Se(kt,ar,H,oe,ye)))return at.push(ai)})){Yt=!1;break}}else if(!(kt===yt||Se(kt,yt,H,oe,ye))){Yt=!1;break}}return ye.delete(w),ye.delete(P),Yt}function Gc(w,P,H,oe,Se,ye,Pe){switch(H){case A:if(w.byteLength!=P.byteLength||w.byteOffset!=P.byteOffset)return!1;w=w.buffer,P=P.buffer;case T:return!(w.byteLength!=P.byteLength||!ye(new Bt(w),new Bt(P)));case c:case h:case b:return Wa(+w,+P);case f:return w.name==P.name&&w.message==P.message;case E:case S:return w==P+"";case g:var De=ne;case k:var tt=oe&i;if(De||(De=ce),w.size!=P.size&&!tt)return!1;var Be=Pe.get(w);if(Be)return Be==P;oe|=s,Pe.set(w,P);var Ot=Gs(De(w),De(P),oe,Se,ye,Pe);return Pe.delete(w),Ot;case I:if(zs)return zs.call(w)==zs.call(P)}return!1}function Qc(w,P,H,oe,Se,ye){var Pe=H&i,De=oi(w),tt=De.length,Be=oi(P),Ot=Be.length;if(tt!=Ot&&!Pe)return!1;for(var Yt=tt;Yt--;){var at=De[Yt];if(!(Pe?at in P:Te.call(P,at)))return!1}var kt=ye.get(w);if(kt&&ye.get(P))return kt==P;var yt=!0;ye.set(w,P),ye.set(P,w);for(var kr=Pe;++Yt<tt;){at=De[Yt];var ar=w[at],ai=P[at];if(oe)var pg=Pe?oe(ai,ar,at,P,w,ye):oe(ar,ai,at,w,P,ye);if(!(pg===void 0?ar===ai||Se(ar,ai,H,oe,ye):pg)){yt=!1;break}kr||(kr=at=="constructor")}if(yt&&!kr){var Ja=w.constructor,Za=P.constructor;Ja!=Za&&"constructor"in w&&"constructor"in P&&!(typeof Ja=="function"&&Ja instanceof Ja&&typeof Za=="function"&&Za instanceof Za)&&(yt=!1)}return ye.delete(w),ye.delete(P),yt}function oi(w){return Ws(w,Xs,Yc)}function Tn(w,P){var H=w.__data__;return Jc(P)?H[typeof P=="string"?"string":"hash"]:H.map}function sr(w,P){var H=Z(w,P);return zc(H)?H:void 0}function or(w){var P=Te.call(w,En),H=w[En];try{w[En]=void 0;var oe=!0}catch{}var Se=ti.call(w);return oe&&(P?w[En]=H:delete w[En]),Se}var Yc=Vi?function(w){return w==null?[]:(w=Object(w),re(Vi(w),function(P){return rr.call(w,P)}))}:nf,Mn=si;(qs&&Mn(new qs(new ArrayBuffer(1)))!=A||ii&&Mn(new ii)!=g||$s&&Mn($s.resolve())!=_||Hs&&Mn(new Hs)!=k||Vs&&Mn(new Vs)!=O)&&(Mn=function(w){var P=si(w),H=P==v?w.constructor:void 0,oe=H?Ut(H):"";if(oe)switch(oe){case qa:return A;case ir:return g;case wc:return _;case Ec:return k;case Tc:return O}return P});function Xc(w,P){return P=P??o,!!P&&(typeof w=="number"||J.test(w))&&w>-1&&w%1==0&&w<P}function Jc(w){var P=typeof w;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?w!=="__proto__":w===null}function Zc(w){return!!Ze&&Ze in w}function ef(w){var P=w&&w.constructor,H=typeof P=="function"&&P.prototype||Ie;return w===H}function Ka(w){return ti.call(w)}function Ut(w){if(w!=null){try{return He.call(w)}catch{}try{return w+""}catch{}}return""}function Wa(w,P){return w===P||w!==w&&P!==P}var Ga=Va(function(){return arguments}())?Va:function(w){return jn(w)&&Te.call(w,"callee")&&!rr.call(w,"callee")},Gi=Array.isArray;function Qs(w){return w!=null&&Ys(w.length)&&!Qa(w)}var Qi=Us||rf;function tf(w,P){return za(w,P)}function Qa(w){if(!Ya(w))return!1;var P=si(w);return P==d||P==p||P==u||P==y}function Ys(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=o}function Ya(w){var P=typeof w;return w!=null&&(P=="object"||P=="function")}function jn(w){return w!=null&&typeof w=="object"}var Xa=z?W(z):Kc;function Xs(w){return Qs(w)?Hc(w):Wc(w)}function nf(){return[]}function rf(){return!1}t.exports=tf})(pu,pu.exports);var Jp=pu.exports,aD=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ma,"__esModule",{value:!0});var rn=Wt,qv=Fs,lD=aD(Jp),uD=function(){function t(e,n){typeof e=="string"&&(e=new qv.InsertDataQuill(rn.DataType.Text,e+"")),this.insert=e,this.attributes=n||{}}return t.createNewLineOp=function(){return new t(rn.NewLine)},t.prototype.isContainerBlock=function(){return this.isBlockquote()||this.isList()||this.isTable()||this.isCodeBlock()||this.isHeader()||this.isBlockAttribute()||this.isCustomTextBlock()},t.prototype.isBlockAttribute=function(){var e=this.attributes;return!!(e.align||e.direction||e.indent)},t.prototype.isBlockquote=function(){return!!this.attributes.blockquote},t.prototype.isHeader=function(){return!!this.attributes.header},t.prototype.isTable=function(){return!!this.attributes.table},t.prototype.isSameHeaderAs=function(e){return e.attributes.header===this.attributes.header&&this.isHeader()},t.prototype.hasSameAdiAs=function(e){return this.attributes.align===e.attributes.align&&this.attributes.direction===e.attributes.direction&&this.attributes.indent===e.attributes.indent},t.prototype.hasSameIndentationAs=function(e){return this.attributes.indent===e.attributes.indent},t.prototype.hasSameAttr=function(e){return lD.default(this.attributes,e.attributes)},t.prototype.hasHigherIndentThan=function(e){return(Number(this.attributes.indent)||0)>(Number(e.attributes.indent)||0)},t.prototype.isInline=function(){return!(this.isContainerBlock()||this.isVideo()||this.isCustomEmbedBlock())},t.prototype.isCodeBlock=function(){return!!this.attributes["code-block"]},t.prototype.hasSameLangAs=function(e){return this.attributes["code-block"]===e.attributes["code-block"]},t.prototype.isJustNewline=function(){return this.insert.value===rn.NewLine},t.prototype.isList=function(){return this.isOrderedList()||this.isBulletList()||this.isCheckedList()||this.isUncheckedList()},t.prototype.isOrderedList=function(){return this.attributes.list===rn.ListType.Ordered},t.prototype.isBulletList=function(){return this.attributes.list===rn.ListType.Bullet},t.prototype.isCheckedList=function(){return this.attributes.list===rn.ListType.Checked},t.prototype.isUncheckedList=function(){return this.attributes.list===rn.ListType.Unchecked},t.prototype.isACheckList=function(){return this.attributes.list==rn.ListType.Unchecked||this.attributes.list===rn.ListType.Checked},t.prototype.isSameListAs=function(e){return!!e.attributes.list&&(this.attributes.list===e.attributes.list||e.isACheckList()&&this.isACheckList())},t.prototype.isSameTableRowAs=function(e){return!!e.isTable()&&this.isTable()&&this.attributes.table===e.attributes.table},t.prototype.isText=function(){return this.insert.type===rn.DataType.Text},t.prototype.isImage=function(){return this.insert.type===rn.DataType.Image},t.prototype.isFormula=function(){return this.insert.type===rn.DataType.Formula},t.prototype.isVideo=function(){return this.insert.type===rn.DataType.Video},t.prototype.isLink=function(){return this.isText()&&!!this.attributes.link},t.prototype.isCustomEmbed=function(){return this.insert instanceof qv.InsertDataCustom},t.prototype.isCustomEmbedBlock=function(){return this.isCustomEmbed()&&!!this.attributes.renderAsBlock},t.prototype.isCustomTextBlock=function(){return this.isText()&&!!this.attributes.renderAsBlock},t.prototype.isMentions=function(){return this.isText()&&!!this.attributes.mentions},t}();Ma.DeltaInsertOp=uD;var vc={},Zp={},ja={},eg={};Object.defineProperty(eg,"__esModule",{value:!0});function cD(t){var e=t;e=e.replace(/^\s*/gm,"");var n=/^((https?|s?ftp|file|blob|mailto|tel):|#|\/|data:image\/)/;return n.test(e)?e:"unsafe:"+e}eg.sanitize=cD;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});var Os;(function(t){t[t.Html=0]="Html",t[t.Url=1]="Url"})(Os||(Os={}));function fD(t,e){if(e===void 0&&(e=void 0),!t)return"";var n="";if(e){var r=[].concat(e);n=r.map(function(s){return s.key+(s.value?'="'+s.value+'"':"")}).join(" ")}var i=">";return(t==="img"||t==="br")&&(i="/>"),n?"<"+t+" "+n+i:"<"+t+i}Ir.makeStartTag=fD;function hD(t){return t===void 0&&(t=""),t&&"</"+t+">"||""}Ir.makeEndTag=hD;function nw(t){return tg(Os.Html).reduce(iw,t)}Ir.decodeHtml=nw;function dD(t,e){return e===void 0&&(e=!0),e&&(t=nw(t)),tg(Os.Html).reduce(rw,t)}Ir.encodeHtml=dD;function pD(t){var e=tg(Os.Url),n=e.reduce(iw,t);return e.reduce(rw,n)}Ir.encodeLink=pD;function tg(t){var e=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#x27;"],["\\/","&#x2F;"],["\\(","&#40;"],["\\)","&#41;"]];return t===Os.Html?e.filter(function(n){var r=n[0];return n[1],r.indexOf("(")===-1&&r.indexOf(")")===-1}):e.filter(function(n){var r=n[0];return n[1],r.indexOf("/")===-1})}function rw(t,e){return t.replace(new RegExp(e[0],"g"),e[1])}function iw(t,e){return t.replace(new RegExp(e[1],"g"),e[0].replace("\\",""))}var gD=qe&&qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(ja,"__esModule",{value:!0});var mD=gD(eg),vD=Ir,yD=function(){function t(){}return t.sanitize=function(e,n){var r=function(){};n&&typeof n.urlSanitizer=="function"&&(r=n.urlSanitizer);var i=r(e);return typeof i=="string"?i:vD.encodeLink(mD.sanitize(e))},t}();ja.OpLinkSanitizer=yD;Object.defineProperty(Zp,"__esModule",{value:!0});var $v=ja,bD=function(){function t(){}return t.sanitize=function(e,n){var r={};return!e||typeof e!="object"||(e.class&&t.IsValidClass(e.class)&&(r.class=e.class),e.id&&t.IsValidId(e.id)&&(r.id=e.id),t.IsValidTarget(e.target+"")&&(r.target=e.target),e.avatar&&(r.avatar=$v.OpLinkSanitizer.sanitize(e.avatar+"",n)),e["end-point"]&&(r["end-point"]=$v.OpLinkSanitizer.sanitize(e["end-point"]+"",n)),e.slug&&(r.slug=e.slug+"")),r},t.IsValidClass=function(e){return!!e.match(/^[a-zA-Z0-9_\-]{1,500}$/i)},t.IsValidId=function(e){return!!e.match(/^[a-zA-Z0-9_\-\:\.]{1,500}$/i)},t.IsValidTarget=function(e){return["_self","_blank","_parent","_top"].indexOf(e)>-1},t}();Zp.MentionSanitizer=bD;var wn={};Object.defineProperty(wn,"__esModule",{value:!0});function _D(t){return t.length===0?null:t.length>=2?t[1]:t[0]}wn.preferSecond=_D;function sw(t){return t.reduce(function(e,n){return e.concat(Array.isArray(n)?sw(n):n)},[])}wn.flatten=sw;function wD(t,e){if(Array.prototype.find)return Array.prototype.find.call(t,e);for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}wn.find=wD;function ED(t,e){for(var n=[],r,i,s=0;s<t.length;s++)r=t[s],s>0&&e(r,t[s-1])?(i=n[n.length-1],i.push(r)):n.push([r]);return n.map(function(o){return o.length===1?o[0]:o})}wn.groupConsecutiveElementsWhile=ED;function TD(t,e,n){for(var r={elements:[],sliceStartsAt:-1},i=e;i>=0&&n(t[i]);i--)r.sliceStartsAt=i,r.elements.unshift(t[i]);return r}wn.sliceFromReverseWhile=TD;function AD(t,e){return t.reduce(function(n,r,i){return n.push(r),i<t.length-1&&n.push(e),n},[])}wn.intersperse=AD;Object.defineProperty(vc,"__esModule",{value:!0});var An=Wt,ID=Zp,SD=wn,OD=ja,kD=function(){function t(){}return t.sanitize=function(e,n){var r={};if(!e||typeof e!="object")return r;var i=["bold","italic","underline","strike","code","blockquote","code-block","renderAsBlock"],s=["background","color"],o=e.font,a=e.size,l=e.link,u=e.script,c=e.list,h=e.header,f=e.align,d=e.direction,p=e.indent,g=e.mentions,b=e.mention,m=e.width,v=e.target,_=e.rel,y=e["code-block"],E=i.concat(s,["font","size","link","script","list","header","align","direction","indent","mentions","mention","width","target","rel","code-block"]);if(i.forEach(function(S){var I=e[S];I&&(r[S]=!!I)}),s.forEach(function(S){var I=e[S];I&&(t.IsValidHexColor(I+"")||t.IsValidColorLiteral(I+"")||t.IsValidRGBColor(I+""))&&(r[S]=I)}),o&&t.IsValidFontName(o+"")&&(r.font=o),a&&t.IsValidSize(a+"")&&(r.size=a),m&&t.IsValidWidth(m+"")&&(r.width=m),l&&(r.link=OD.OpLinkSanitizer.sanitize(l+"",n)),v&&t.isValidTarget(v)&&(r.target=v),_&&t.IsValidRel(_)&&(r.rel=_),y&&(t.IsValidLang(y)?r["code-block"]=y:r["code-block"]=!!y),(u===An.ScriptType.Sub||An.ScriptType.Super===u)&&(r.script=u),(c===An.ListType.Bullet||c===An.ListType.Ordered||c===An.ListType.Checked||c===An.ListType.Unchecked)&&(r.list=c),Number(h)&&(r.header=Math.min(Number(h),6)),SD.find([An.AlignType.Center,An.AlignType.Right,An.AlignType.Justify,An.AlignType.Left],function(S){return S===f})&&(r.align=f),d===An.DirectionType.Rtl&&(r.direction=d),p&&Number(p)&&(r.indent=Math.min(Number(p),30)),g&&b){var k=ID.MentionSanitizer.sanitize(b,n);Object.keys(k).length>0&&(r.mentions=!!g,r.mention=b)}return Object.keys(e).reduce(function(S,I){return E.indexOf(I)===-1&&(S[I]=e[I]),S},r)},t.IsValidHexColor=function(e){return!!e.match(/^#([0-9A-F]{6}|[0-9A-F]{3})$/i)},t.IsValidColorLiteral=function(e){return!!e.match(/^[a-z]{1,50}$/i)},t.IsValidRGBColor=function(e){var n=/^rgb\(((0|25[0-5]|2[0-4]\d|1\d\d|0?\d?\d),\s*){2}(0|25[0-5]|2[0-4]\d|1\d\d|0?\d?\d)\)$/i;return!!e.match(n)},t.IsValidFontName=function(e){return!!e.match(/^[a-z\s0-9\- ]{1,30}$/i)},t.IsValidSize=function(e){return!!e.match(/^[a-z0-9\-]{1,20}$/i)},t.IsValidWidth=function(e){return!!e.match(/^[0-9]*(px|em|%)?$/)},t.isValidTarget=function(e){return!!e.match(/^[_a-zA-Z0-9\-]{1,50}$/)},t.IsValidRel=function(e){return!!e.match(/^[a-zA-Z\s\-]{1,250}$/i)},t.IsValidLang=function(e){return typeof e=="boolean"?!0:!!e.match(/^[a-zA-Z\s\-\\\/\+]{1,50}$/i)},t}();vc.OpAttributeSanitizer=kD;var ng={},rg={};Object.defineProperty(rg,"__esModule",{value:!0});function CD(t){var e=`
`;if(t===e)return[t];var n=t.split(e);if(n.length===1)return n;var r=n.length-1;return n.reduce(function(i,s,o){return o!==r?s!==""?i=i.concat(s,e):i.push(e):s!==""&&i.push(s),i},[])}rg.tokenizeWithNewLines=CD;var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});function ND(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),i=0;i<e.length;i++){var s=e[i];if(s!=null)for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])}return r}Fa.assign=ND;var ow=qe&&qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(ng,"__esModule",{value:!0});var Hf=Wt,RD=ow(rg),Hv=ow(Fa),PD=function(){function t(){}return t.denormalize=function(e){if(!e||typeof e!="object")return[];if(typeof e.insert=="object"||e.insert===Hf.NewLine)return[e];var n=RD.tokenizeWithNewLines(e.insert+"");if(n.length===1)return[e];var r=Hv.assign({},e,{insert:Hf.NewLine});return n.map(function(i){return i===Hf.NewLine?r:Hv.assign({},e,{insert:i})})},t}();ng.InsertOpDenormalizer=PD;Object.defineProperty(Xp,"__esModule",{value:!0});var xD=Ma,Bn=Wt,no=Fs,DD=vc,LD=ng,Vv=ja,MD=function(){function t(){}return t.convert=function(e,n){if(!Array.isArray(e))return[];for(var r=[].concat.apply([],e.map(LD.InsertOpDenormalizer.denormalize)),i=[],s,o,a=0,l=r;a<l.length;a++){var u=l[a];u.insert&&(s=t.convertInsertVal(u.insert,n),s&&(o=DD.OpAttributeSanitizer.sanitize(u.attributes,n),i.push(new xD.DeltaInsertOp(s,o))))}return i},t.convertInsertVal=function(e,n){if(typeof e=="string")return new no.InsertDataQuill(Bn.DataType.Text,e);if(!e||typeof e!="object")return null;var r=Object.keys(e);return r.length?Bn.DataType.Image in e?new no.InsertDataQuill(Bn.DataType.Image,Vv.OpLinkSanitizer.sanitize(e[Bn.DataType.Image]+"",n)):Bn.DataType.Video in e?new no.InsertDataQuill(Bn.DataType.Video,Vv.OpLinkSanitizer.sanitize(e[Bn.DataType.Video]+"",n)):Bn.DataType.Formula in e?new no.InsertDataQuill(Bn.DataType.Formula,e[Bn.DataType.Formula]):new no.InsertDataCustom(r[0],e[r[0]]):null},t}();Xp.InsertOpsConverter=MD;var ig={};(function(t){var e=qe&&qe.__importStar||function(u){if(u&&u.__esModule)return u;var c={};if(u!=null)for(var h in u)Object.hasOwnProperty.call(u,h)&&(c[h]=u[h]);return c.default=u,c};Object.defineProperty(t,"__esModule",{value:!0});var n=Ir,r=Wt,i=e(Fa),s=e(wn),o=vc,a={serif:"font-family: Georgia, Times New Roman, serif",monospace:"font-family: Monaco, Courier New, monospace"};t.DEFAULT_INLINE_STYLES={font:function(u){return a[u]||"font-family:"+u},size:{small:"font-size: 0.75em",large:"font-size: 1.5em",huge:"font-size: 2.5em"},indent:function(u,c){var h=parseInt(u,10)*3,f=c.attributes.direction==="rtl"?"right":"left";return"padding-"+f+":"+h+"em"},direction:function(u,c){if(u==="rtl")return"direction:rtl"+(c.attributes.align?"":"; text-align:inherit")}};var l=function(){function u(c,h){this.op=c,this.options=i.assign({},{classPrefix:"ql",inlineStyles:void 0,encodeHtml:!0,listItemTag:"li",paragraphTag:"p"},h)}return u.prototype.prefixClass=function(c){return this.options.classPrefix?this.options.classPrefix+"-"+c:c+""},u.prototype.getHtml=function(){var c=this.getHtmlParts();return c.openingTag+c.content+c.closingTag},u.prototype.getHtmlParts=function(){var c=this;if(this.op.isJustNewline()&&!this.op.isContainerBlock())return{openingTag:"",closingTag:"",content:r.NewLine};var h=this.getTags(),f=this.getTagAttributes();!h.length&&f.length&&h.push("span");for(var d=[],p=[],g="img",b=function(y){return y===g&&!!c.op.attributes.link},m=0,v=h;m<v.length;m++){var _=v[m];b(_)&&d.push(n.makeStartTag("a",this.getLinkAttrs())),d.push(n.makeStartTag(_,f)),p.push(_==="img"?"":n.makeEndTag(_)),b(_)&&p.push(n.makeEndTag("a")),f=[]}return p.reverse(),{openingTag:d.join(""),content:this.getContent(),closingTag:p.join("")}},u.prototype.getContent=function(){if(this.op.isContainerBlock())return"";if(this.op.isMentions())return this.op.insert.value;var c=this.op.isFormula()||this.op.isText()?this.op.insert.value:"";return this.options.encodeHtml&&n.encodeHtml(c)||c},u.prototype.getCssClasses=function(){var c=this.op.attributes;if(this.options.inlineStyles)return[];var h=["indent","align","direction","font","size"];return this.options.allowBackgroundClasses&&h.push("background"),(this.getCustomCssClasses()||[]).concat(h.filter(function(f){return!!c[f]}).filter(function(f){return f==="background"?o.OpAttributeSanitizer.IsValidColorLiteral(c[f]):!0}).map(function(f){return f+"-"+c[f]}).concat(this.op.isFormula()?"formula":[]).concat(this.op.isVideo()?"video":[]).concat(this.op.isImage()?"image":[]).map(this.prefixClass.bind(this)))},u.prototype.getCssStyles=function(){var c=this,h=this.op.attributes,f=[["color"]];return(this.options.inlineStyles||!this.options.allowBackgroundClasses)&&f.push(["background","background-color"]),this.options.inlineStyles&&(f=f.concat([["indent"],["align","text-align"],["direction"],["font","font-family"],["size"]])),(this.getCustomCssStyles()||[]).concat(f.filter(function(d){return!!h[d[0]]}).map(function(d){var p=d[0],g=h[p],b=c.options.inlineStyles&&c.options.inlineStyles[p]||t.DEFAULT_INLINE_STYLES[p];if(typeof b=="object")return b[g];if(typeof b=="function"){var m=b;return m(g,c.op)}else return s.preferSecond(d)+":"+g})).filter(function(d){return d!==void 0})},u.prototype.getTagAttributes=function(){if(this.op.attributes.code&&!this.op.isLink())return[];var c=this.makeAttr.bind(this),h=this.getCustomTagAttributes(),f=h?Object.keys(this.getCustomTagAttributes()).map(function(m){return c(m,h[m])}):[],d=this.getCssClasses(),p=d.length?f.concat([c("class",d.join(" "))]):f;if(this.op.isImage())return this.op.attributes.width&&(p=p.concat(c("width",this.op.attributes.width))),p.concat(c("src",this.op.insert.value));if(this.op.isACheckList())return p.concat(c("data-checked",this.op.isCheckedList()?"true":"false"));if(this.op.isFormula())return p;if(this.op.isVideo())return p.concat(c("frameborder","0"),c("allowfullscreen","true"),c("src",this.op.insert.value));if(this.op.isMentions()){var g=this.op.attributes.mention;return g.class&&(p=p.concat(c("class",g.class))),g["end-point"]&&g.slug?p=p.concat(c("href",g["end-point"]+"/"+g.slug)):p=p.concat(c("href","about:blank")),g.target&&(p=p.concat(c("target",g.target))),p}var b=this.getCssStyles();return b.length&&p.push(c("style",b.join(";"))),this.op.isCodeBlock()&&typeof this.op.attributes["code-block"]=="string"?p.concat(c("data-language",this.op.attributes["code-block"])):(this.op.isContainerBlock()||this.op.isLink()&&(p=p.concat(this.getLinkAttrs())),p)},u.prototype.makeAttr=function(c,h){return{key:c,value:h}},u.prototype.getLinkAttrs=function(){var c=[],h=o.OpAttributeSanitizer.isValidTarget(this.options.linkTarget||"")?this.options.linkTarget:void 0,f=o.OpAttributeSanitizer.IsValidRel(this.options.linkRel||"")?this.options.linkRel:void 0,d=this.op.attributes.target||h,p=this.op.attributes.rel||f;return c.concat(this.makeAttr("href",this.op.attributes.link)).concat(d?this.makeAttr("target",d):[]).concat(p?this.makeAttr("rel",p):[])},u.prototype.getCustomTag=function(c){if(this.options.customTag&&typeof this.options.customTag=="function")return this.options.customTag.apply(null,[c,this.op])},u.prototype.getCustomTagAttributes=function(){if(this.options.customTagAttributes&&typeof this.options.customTagAttributes=="function")return this.options.customTagAttributes.apply(null,[this.op])},u.prototype.getCustomCssClasses=function(){if(this.options.customCssClasses&&typeof this.options.customCssClasses=="function"){var c=this.options.customCssClasses.apply(null,[this.op]);if(c)return Array.isArray(c)?c:[c]}},u.prototype.getCustomCssStyles=function(){if(this.options.customCssStyles&&typeof this.options.customCssStyles=="function"){var c=this.options.customCssStyles.apply(null,[this.op]);if(c)return Array.isArray(c)?c:[c]}},u.prototype.getTags=function(){var c=this,h=this.op.attributes;if(!this.op.isText())return[this.op.isVideo()?"iframe":this.op.isImage()?"img":"span"];for(var f=this.options.paragraphTag||"p",d=[["blockquote"],["code-block","pre"],["list",this.options.listItemTag],["header"],["align",f],["direction",f],["indent",f]],p=0,g=d;p<g.length;p++){var b=g[p],m=b[0];if(h[m]){var v=this.getCustomTag(m);return v?[v]:m==="header"?["h"+h[m]]:[s.preferSecond(b)]}}if(this.op.isCustomTextBlock()){var v=this.getCustomTag("renderAsBlock");return v?[v]:[f]}var _=Object.keys(h).reduce(function(E,k){var S=c.getCustomTag(k);return S&&(E[k]=S),E},{}),y=[["link","a"],["mentions","a"],["script"],["bold","strong"],["italic","em"],["strike","s"],["underline","u"],["code"]];return y.filter(function(E){return!!h[E[0]]}).concat(Object.keys(_).filter(function(E){return!y.some(function(k){return k[0]==E})}).map(function(E){return[E,_[E]]})).map(function(E){return _[E[0]]?_[E[0]]:E[0]==="script"?h[E[0]]===r.ScriptType.Sub?"sub":"sup":s.preferSecond(E)})},u}();t.OpToHtmlConverter=l})(ig);var sg={},Gt={},aw=qe&&qe.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Gt,"__esModule",{value:!0});var jD=function(){function t(e){this.ops=e}return t}();Gt.InlineGroup=jD;var lw=function(){function t(e){this.op=e}return t}(),FD=function(t){aw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(lw);Gt.VideoItem=FD;var BD=function(t){aw(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(lw);Gt.BlotBlock=BD;var UD=function(){function t(e,n){this.op=e,this.ops=n}return t}();Gt.BlockGroup=UD;var qD=function(){function t(e){this.items=e}return t}();Gt.ListGroup=qD;var $D=function(){function t(e,n){n===void 0&&(n=null),this.item=e,this.innerList=n}return t}();Gt.ListItem=$D;var HD=function(){function t(e){this.rows=e}return t}();Gt.TableGroup=HD;var VD=function(){function t(e){this.cells=e}return t}();Gt.TableRow=VD;var zD=function(){function t(e){this.item=e}return t}();Gt.TableCell=zD;Object.defineProperty(sg,"__esModule",{value:!0});var KD=Ma,ml=wn,pi=Gt,WD=function(){function t(){}return t.pairOpsWithTheirBlock=function(e){for(var n=[],r=function(u){return!(u.isJustNewline()||u.isCustomEmbedBlock()||u.isVideo()||u.isContainerBlock())},i=function(u){return u.isInline()},s=e.length-1,o,a=s;a>=0;a--){var l=e[a];l.isVideo()?n.push(new pi.VideoItem(l)):l.isCustomEmbedBlock()?n.push(new pi.BlotBlock(l)):l.isContainerBlock()?(o=ml.sliceFromReverseWhile(e,a-1,r),n.push(new pi.BlockGroup(l,o.elements)),a=o.sliceStartsAt>-1?o.sliceStartsAt:a):(o=ml.sliceFromReverseWhile(e,a-1,i),n.push(new pi.InlineGroup(o.elements.concat(l))),a=o.sliceStartsAt>-1?o.sliceStartsAt:a)}return n.reverse(),n},t.groupConsecutiveSameStyleBlocks=function(e,n){return n===void 0&&(n={header:!0,codeBlocks:!0,blockquotes:!0,customBlocks:!0}),ml.groupConsecutiveElementsWhile(e,function(r,i){return!(r instanceof pi.BlockGroup)||!(i instanceof pi.BlockGroup)?!1:n.codeBlocks&&t.areBothCodeblocksWithSameLang(r,i)||n.blockquotes&&t.areBothBlockquotesWithSameAdi(r,i)||n.header&&t.areBothSameHeadersWithSameAdi(r,i)||n.customBlocks&&t.areBothCustomBlockWithSameAttr(r,i)})},t.reduceConsecutiveSameStyleBlocksToOne=function(e){var n=KD.DeltaInsertOp.createNewLineOp();return e.map(function(r){if(!Array.isArray(r))return r instanceof pi.BlockGroup&&!r.ops.length&&r.ops.push(n),r;var i=r.length-1;return r[0].ops=ml.flatten(r.map(function(s,o){return s.ops.length?s.ops.concat(o<i?[n]:[]):[n]})),r[0]})},t.areBothCodeblocksWithSameLang=function(e,n){return e.op.isCodeBlock()&&n.op.isCodeBlock()&&e.op.hasSameLangAs(n.op)},t.areBothSameHeadersWithSameAdi=function(e,n){return e.op.isSameHeaderAs(n.op)&&e.op.hasSameAdiAs(n.op)},t.areBothBlockquotesWithSameAdi=function(e,n){return e.op.isBlockquote()&&n.op.isBlockquote()&&e.op.hasSameAdiAs(n.op)},t.areBothCustomBlockWithSameAttr=function(e,n){return e.op.isCustomTextBlock()&&n.op.isCustomTextBlock()&&e.op.hasSameAttr(n.op)},t}();sg.Grouper=WD;var og={};Object.defineProperty(og,"__esModule",{value:!0});var hn=Gt,ro=wn,GD=function(){function t(){}return t.prototype.nest=function(e){var n=this,r=this.convertListBlocksToListGroups(e),i=this.groupConsecutiveListGroups(r),s=ro.flatten(i.map(function(a){return Array.isArray(a)?n.nestListSection(a):a})),o=ro.groupConsecutiveElementsWhile(s,function(a,l){return a instanceof hn.ListGroup&&l instanceof hn.ListGroup?a.items[0].item.op.isSameListAs(l.items[0].item.op):!1});return o.map(function(a){if(!Array.isArray(a))return a;var l=a.map(function(u){return u.items});return new hn.ListGroup(ro.flatten(l))})},t.prototype.convertListBlocksToListGroups=function(e){var n=ro.groupConsecutiveElementsWhile(e,function(r,i){return r instanceof hn.BlockGroup&&i instanceof hn.BlockGroup&&r.op.isList()&&i.op.isList()&&r.op.isSameListAs(i.op)&&r.op.hasSameIndentationAs(i.op)});return n.map(function(r){return Array.isArray(r)?new hn.ListGroup(r.map(function(i){return new hn.ListItem(i)})):r instanceof hn.BlockGroup&&r.op.isList()?new hn.ListGroup([new hn.ListItem(r)]):r})},t.prototype.groupConsecutiveListGroups=function(e){return ro.groupConsecutiveElementsWhile(e,function(n,r){return n instanceof hn.ListGroup&&r instanceof hn.ListGroup})},t.prototype.nestListSection=function(e){var n=this,r=this.groupByIndent(e);return Object.keys(r).map(Number).sort().reverse().forEach(function(i){r[i].forEach(function(s){var o=e.indexOf(s);n.placeUnderParent(s,e.slice(0,o))&&e.splice(o,1)})}),e},t.prototype.groupByIndent=function(e){return e.reduce(function(n,r){var i=r.items[0].item.op.attributes.indent;return i&&(n[i]=n[i]||[],n[i].push(r)),n},{})},t.prototype.placeUnderParent=function(e,n){for(var r=n.length-1;r>=0;r--){var i=n[r];if(e.items[0].item.op.hasHigherIndentThan(i.items[0].item.op)){var s=i.items[i.items.length-1];return s.innerList?s.innerList.items=s.innerList.items.concat(e.items):s.innerList=e,!0}}return!1},t}();og.ListNester=GD;var ag={};Object.defineProperty(ag,"__esModule",{value:!0});var dn=Gt,zv=wn,QD=function(){function t(){}return t.prototype.group=function(e){var n=this.convertTableBlocksToTableGroups(e);return n},t.prototype.convertTableBlocksToTableGroups=function(e){var n=this,r=zv.groupConsecutiveElementsWhile(e,function(i,s){return i instanceof dn.BlockGroup&&s instanceof dn.BlockGroup&&i.op.isTable()&&s.op.isTable()});return r.map(function(i){return Array.isArray(i)?new dn.TableGroup(n.convertTableBlocksToTableRows(i)):i instanceof dn.BlockGroup&&i.op.isTable()?new dn.TableGroup([new dn.TableRow([new dn.TableCell(i)])]):i})},t.prototype.convertTableBlocksToTableRows=function(e){var n=zv.groupConsecutiveElementsWhile(e,function(r,i){return r instanceof dn.BlockGroup&&i instanceof dn.BlockGroup&&r.op.isTable()&&i.op.isTable()&&r.op.isSameTableRowAs(i.op)});return n.map(function(r){return new dn.TableRow(Array.isArray(r)?r.map(function(i){return new dn.TableCell(i)}):[new dn.TableCell(r)])})},t}();ag.TableGrouper=QD;var YD=qe&&qe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(Yp,"__esModule",{value:!0});var XD=Xp,io=ig,Vf=sg,so=Gt,JD=og,sn=Ir,ZD=YD(Fa),oo=Wt,eL=ag,ao="<br/>",tL=function(){function t(e,n){this.rawDeltaOps=[],this.callbacks={},this.options=ZD.assign({paragraphTag:"p",encodeHtml:!0,classPrefix:"ql",inlineStyles:!1,multiLineBlockquote:!0,multiLineHeader:!0,multiLineCodeblock:!0,multiLineParagraph:!0,multiLineCustomBlock:!0,allowBackgroundClasses:!1,linkTarget:"_blank"},n,{orderedListTag:"ol",bulletListTag:"ul",listItemTag:"li"});var r;this.options.inlineStyles?typeof this.options.inlineStyles=="object"?r=this.options.inlineStyles:r={}:r=void 0,this.converterOptions={encodeHtml:this.options.encodeHtml,classPrefix:this.options.classPrefix,inlineStyles:r,listItemTag:this.options.listItemTag,paragraphTag:this.options.paragraphTag,linkRel:this.options.linkRel,linkTarget:this.options.linkTarget,allowBackgroundClasses:this.options.allowBackgroundClasses,customTag:this.options.customTag,customTagAttributes:this.options.customTagAttributes,customCssClasses:this.options.customCssClasses,customCssStyles:this.options.customCssStyles},this.rawDeltaOps=e}return t.prototype._getListTag=function(e){return e.isOrderedList()?this.options.orderedListTag+"":e.isBulletList()?this.options.bulletListTag+"":e.isCheckedList()?this.options.bulletListTag+"":e.isUncheckedList()?this.options.bulletListTag+"":""},t.prototype.getGroupedOps=function(){var e=XD.InsertOpsConverter.convert(this.rawDeltaOps,this.options),n=Vf.Grouper.pairOpsWithTheirBlock(e),r=Vf.Grouper.groupConsecutiveSameStyleBlocks(n,{blockquotes:!!this.options.multiLineBlockquote,header:!!this.options.multiLineHeader,codeBlocks:!!this.options.multiLineCodeblock,customBlocks:!!this.options.multiLineCustomBlock}),i=Vf.Grouper.reduceConsecutiveSameStyleBlocksToOne(r),s=new eL.TableGrouper;i=s.group(i);var o=new JD.ListNester;return o.nest(i)},t.prototype.convert=function(){var e=this,n=this.getGroupedOps();return n.map(function(r){if(r instanceof so.ListGroup)return e._renderWithCallbacks(oo.GroupType.List,r,function(){return e._renderList(r)});if(r instanceof so.TableGroup)return e._renderWithCallbacks(oo.GroupType.Table,r,function(){return e._renderTable(r)});if(r instanceof so.BlockGroup){var i=r;return e._renderWithCallbacks(oo.GroupType.Block,r,function(){return e._renderBlock(i.op,i.ops)})}else return r instanceof so.BlotBlock?e._renderCustom(r.op,null):r instanceof so.VideoItem?e._renderWithCallbacks(oo.GroupType.Video,r,function(){var s=r,o=new io.OpToHtmlConverter(s.op,e.converterOptions);return o.getHtml()}):e._renderWithCallbacks(oo.GroupType.InlineGroup,r,function(){return e._renderInlines(r.ops,!0)})}).join("")},t.prototype._renderWithCallbacks=function(e,n,r){var i="",s=this.callbacks.beforeRender_cb;i=typeof s=="function"?s.apply(null,[e,n]):"",i||(i=r());var o=this.callbacks.afterRender_cb;return i=typeof o=="function"?o.apply(null,[e,i]):i,i},t.prototype._renderList=function(e){var n=this,r=e.items[0];return sn.makeStartTag(this._getListTag(r.item.op))+e.items.map(function(i){return n._renderListItem(i)}).join("")+sn.makeEndTag(this._getListTag(r.item.op))},t.prototype._renderListItem=function(e){e.item.op.attributes.indent=0;var n=new io.OpToHtmlConverter(e.item.op,this.converterOptions),r=n.getHtmlParts(),i=this._renderInlines(e.item.ops,!1);return r.openingTag+i+(e.innerList?this._renderList(e.innerList):"")+r.closingTag},t.prototype._renderTable=function(e){var n=this;return sn.makeStartTag("table")+sn.makeStartTag("tbody")+e.rows.map(function(r){return n._renderTableRow(r)}).join("")+sn.makeEndTag("tbody")+sn.makeEndTag("table")},t.prototype._renderTableRow=function(e){var n=this;return sn.makeStartTag("tr")+e.cells.map(function(r){return n._renderTableCell(r)}).join("")+sn.makeEndTag("tr")},t.prototype._renderTableCell=function(e){var n=new io.OpToHtmlConverter(e.item.op,this.converterOptions),r=n.getHtmlParts(),i=this._renderInlines(e.item.ops,!1);return sn.makeStartTag("td",{key:"data-row",value:e.item.op.attributes.table})+r.openingTag+i+r.closingTag+sn.makeEndTag("td")},t.prototype._renderBlock=function(e,n){var r=this,i=new io.OpToHtmlConverter(e,this.converterOptions),s=i.getHtmlParts();if(e.isCodeBlock())return s.openingTag+sn.encodeHtml(n.map(function(a){return a.isCustomEmbed()?r._renderCustom(a,e):a.insert.value}).join(""))+s.closingTag;var o=n.map(function(a){return r._renderInline(a,e)}).join("");return s.openingTag+(o||ao)+s.closingTag},t.prototype._renderInlines=function(e,n){var r=this;n===void 0&&(n=!0);var i=e.length-1,s=e.map(function(l,u){return u>0&&u===i&&l.isJustNewline()?"":r._renderInline(l,null)}).join("");if(!n)return s;var o=sn.makeStartTag(this.options.paragraphTag),a=sn.makeEndTag(this.options.paragraphTag);return s===ao||this.options.multiLineParagraph?o+s+a:o+s.split(ao).map(function(l){return l===""?ao:l}).join(a+o)+a},t.prototype._renderInline=function(e,n){if(e.isCustomEmbed())return this._renderCustom(e,n);var r=new io.OpToHtmlConverter(e,this.converterOptions);return r.getHtml().replace(/\n/g,ao)},t.prototype._renderCustom=function(e,n){var r=this.callbacks.renderCustomOp_cb;return typeof r=="function"?r.apply(null,[e,n]):""},t.prototype.beforeRender=function(e){typeof e=="function"&&(this.callbacks.beforeRender_cb=e)},t.prototype.afterRender=function(e){typeof e=="function"&&(this.callbacks.afterRender_cb=e)},t.prototype.renderCustomWith=function(e){this.callbacks.renderCustomOp_cb=e},t}();Yp.QuillDeltaToHtmlConverter=tL;Object.defineProperty(ft,"__esModule",{value:!0});var nL=Yp,rL=ft.QuillDeltaToHtmlConverter=nL.QuillDeltaToHtmlConverter,iL=ig;ft.OpToHtmlConverter=iL.OpToHtmlConverter;var Bs=Gt;ft.InlineGroup=Bs.InlineGroup;ft.VideoItem=Bs.VideoItem;ft.BlockGroup=Bs.BlockGroup;ft.ListGroup=Bs.ListGroup;ft.ListItem=Bs.ListItem;ft.BlotBlock=Bs.BlotBlock;var sL=Ma;ft.DeltaInsertOp=sL.DeltaInsertOp;var uw=Fs;ft.InsertDataQuill=uw.InsertDataQuill;ft.InsertDataCustom=uw.InsertDataCustom;var Hi=Wt;ft.NewLine=Hi.NewLine;ft.ListType=Hi.ListType;ft.ScriptType=Hi.ScriptType;ft.DirectionType=Hi.DirectionType;ft.AlignType=Hi.AlignType;ft.DataType=Hi.DataType;ft.GroupType=Hi.GroupType;const _t=g0(()=>{const t=pt(!0),e=pt(!1),n=async b=>new Promise(async m=>{du.getAppCollection(b).then(()=>{e.value=!0,m(e.value)}).catch(()=>{setTimeout(()=>{n(b)},3e3)})}),r=$t({menu:[{name:"overview",collection:null},{name:"siswa",collection:"users"},{name:"kata pengantar",collection:"application content"},{name:"petunjuk penggunaan",collection:"application content"},{name:"kompetensi",collection:"application content"},{name:"tujuan pembelajaran",collection:"application content"},{name:"pembelajaran",collection:"learning materials"},{name:"evaluasi akhir",collection:"learning materials"},{name:"daftar pustaka",collection:"application content"},{name:"biografi pengembang",collection:"application content"}],subContentActive:{},sidebarOpened:!0,error:{admin:{status:!1,message:""}}}),i=$t({}),s=$t({isGettingData:!1,lastGettingData:0,data:[]}),o=()=>{gn().userStatus.tryToAuthenticated=!0,rD.tryToAuthenticationUser().then(b=>{b.success})},a=$t({status:!1,action:()=>{},excution:()=>{a.action(),a.status=!1}}),l=$t({data:{}}),u=$t({}),c=()=>{const b=String(prompt("Nama sub-konten baru :"));alert(b)},h=new class{constructor(){li(this,"new subcontent",{name:"",focus:!1});li(this,"new page",{name:"",focus:!1});li(this,"sub content",$t(this["new subcontent"]));li(this,"page",$t(this["new page"]));li(this,"submit",b=>new Promise((m,v)=>{if(this[`${b}`].focus)if(this[`${b}`].name!==""){if(b==="sub content"){const _=fr().value;Object(u[`${l.data.name}`]).subContent={...u[`${l.data.name}`].subContent,[`${_}`]:{name:this[`${b}`].name,page:[]}},l.data.name==="pembelajaran"&&(u[`${l.data.name}`].evaluation={...u[`${l.data.name}`].evaluation,[`${_}`]:[]}),this.blur(b,0),m({success:!0})}else b==="page"&&(u[`${l.data.name}`].lastSelectedSubContent===0?alert("pilih sub konten terlebih dahulu"):(Object(u[`${l.data.name}`]).subContent[`${u[`${l.data.name}`].lastSelectedSubContent}`].page.push({[`${fr().value}`]:{name:this[`${b}`].name,type:"delta",data:{ops:[{insert:"halaman baru"}]}}}),this.blur(b,0),m({success:!0})));u[`${l.data.name}`].updatedAt=fr().value}else v({succes:!1,error:`nama ${b} tidak boleh kosong`});else this[`${b}`].focus=!0}));li(this,"blur",(b,m)=>{setTimeout(()=>{this[`${b}`].name="",this[`${b}`].focus=!1},Number(m))})}};return{splashScreenStatus:t,loadedApp:e,loadApp:n,appData:r,modal:i,allStudent:s,tryToLogin:o,saveChanged:a,activeContent:l,appCacheData:u,addSubContent:c,newContentData:h,deleteSubContent:b=>new Promise(m=>{delete Object(u[`${l.data.name}`].subContent)[`${b}`],l.data.name==="pembelajaran"&&delete u[`${l.data.name}`].evaluation[`${b}`],u[`${l.data.name}`].updatedAt=fr().value,m(!0)}),deletePage:b=>new Promise(m=>{b>-1&&Object(u[`${l.data.name}`].subContent)[`${u[`${l.data.name}`].lastSelectedSubContent}`].page.splice(b,1),u[`${l.data.name}`].updatedAt=fr().value,m(!0)}),updatePageContent:()=>new Promise(b=>{u[`${l.data.name}`].updatedAt=fr().value,b(!0)}),quilToHTML:b=>new rL(b.ops)}}),oL=t=>(HE("data-v-d4d54b42"),t=t(),VE(),t),aL={class:"splash"},lL={class:"d-flex flex-column"},uL={key:0,class:"img-fluid",src:OA,alt:""},cL={key:0,class:"d-flex flex-column gap-2 text-center"},fL=oL(()=>Vn("img",{class:"img-fluid",src:kA,alt:""},null,-1)),hL=fa({__name:"Splash",setup(t){const e=pt("loka");return setTimeout(()=>{e.value="",setTimeout(()=>{e.value="appLogo",setTimeout(()=>{_t().splashScreenStatus.value=!1},3e3)},1e3)},3e3),(n,r)=>{const i=SA;return Qe(),lt("div",aL,[Vn("div",lL,[ut($o,{name:"fade"},{default:Bo(()=>[Vt(e)==="loka"?(Qe(),lt("img",uL)):cr("",!0)]),_:1}),ut($o,{name:"fade"},{default:Bo(()=>[Vt(e)==="appLogo"?(Qe(),lt("div",cL,[fL,ut(i,{class:"h1"})])):cr("",!0)]),_:1})])])}}});const dL=kd(hL,[["__scopeId","data-v-d4d54b42"]]);function td(t,e={},n){for(const r in t){const i=t[r],s=n?`${n}:${r}`:r;typeof i=="object"&&i!==null?td(i,e,s):typeof i=="function"&&(e[s]=i)}return e}const pL={run:t=>t()},gL=()=>pL,cw=typeof console.createTask<"u"?console.createTask:gL;function mL(t,e){const n=e.shift(),r=cw(n);return t.reduce((i,s)=>i.then(()=>r.run(()=>s(...e))),Promise.resolve())}function vL(t,e){const n=e.shift(),r=cw(n);return Promise.all(t.map(i=>r.run(()=>i(...e))))}function zf(t,e){for(const n of[...t])n(e)}class yL{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,n,r={}){if(!e||typeof n!="function")return()=>{};const i=e;let s;for(;this._deprecatedHooks[e];)s=this._deprecatedHooks[e],e=s.to;if(s&&!r.allowDeprecated){let o=s.message;o||(o=`${i} hook has been deprecated`+(s.to?`, please use ${s.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!n.name)try{Object.defineProperty(n,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(n),()=>{n&&(this.removeHook(e,n),n=void 0)}}hookOnce(e,n){let r,i=(...s)=>(typeof r=="function"&&r(),r=void 0,i=void 0,n(...s));return r=this.hook(e,i),r}removeHook(e,n){if(this._hooks[e]){const r=this._hooks[e].indexOf(n);r!==-1&&this._hooks[e].splice(r,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,n){this._deprecatedHooks[e]=typeof n=="string"?{to:n}:n;const r=this._hooks[e]||[];delete this._hooks[e];for(const i of r)this.hook(e,i)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const n in e)this.deprecateHook(n,e[n])}addHooks(e){const n=td(e),r=Object.keys(n).map(i=>this.hook(i,n[i]));return()=>{for(const i of r.splice(0,r.length))i()}}removeHooks(e){const n=td(e);for(const r in n)this.removeHook(r,n[r])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...n){return n.unshift(e),this.callHookWith(mL,e,...n)}callHookParallel(e,...n){return n.unshift(e),this.callHookWith(vL,e,...n)}callHookWith(e,n,...r){const i=this._before||this._after?{name:n,args:r,context:{}}:void 0;this._before&&zf(this._before,i);const s=e(n in this._hooks?[...this._hooks[n]]:[],r);return s instanceof Promise?s.finally(()=>{this._after&&i&&zf(this._after,i)}):(this._after&&i&&zf(this._after,i),s)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const n=this._before.indexOf(e);n!==-1&&this._before.splice(n,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const n=this._after.indexOf(e);n!==-1&&this._after.splice(n,1)}}}}function bL(){return new yL}function _L(t){return Array.isArray(t)?t:[t]}const fw=["title","script","style","noscript"],hw=["base","meta","link","style","script","noscript"],wL=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],EL=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],TL=["tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent"];function dw(t){let e=9;for(let n=0;n<t.length;)e=Math.imul(e^t.charCodeAt(n++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function nd(t){return dw(`${t.tag}:${t.textContent||t.innerHTML||""}:${Object.entries(t.props).map(([e,n])=>`${e}:${String(n)}`).join(",")}`)}function AL(t){let e=9;for(const n of t)for(let r=0;r<n.length;)e=Math.imul(e^n.charCodeAt(r++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function pw(t,e){const{props:n,tag:r}=t;if(EL.includes(r))return r;if(r==="link"&&n.rel==="canonical")return"canonical";if(n.charset)return"charset";const i=["id"];r==="meta"&&i.push("name","property","http-equiv");for(const s of i)if(typeof n[s]<"u"){const o=String(n[s]);return e&&!e(o)?!1:`${r}:${s}:${o}`}return!1}function Kv(t,e){return t==null?e||null:typeof t=="function"?t(e):t}function vl(t,e=!1,n){const{tag:r,$el:i}=t;i&&(Object.entries(r.props).forEach(([s,o])=>{o=String(o);const a=`attr:${s}`;if(s==="class"){if(!o)return;for(const l of o.split(" ")){const u=`${a}:${l}`;n&&n(t,u,()=>i.classList.remove(l)),i.classList.contains(l)||i.classList.add(l)}return}n&&!s.startsWith("data-h-")&&n(t,a,()=>i.removeAttribute(s)),(e||i.getAttribute(s)!==o)&&i.setAttribute(s,o)}),fw.includes(r.tag)&&(r.textContent&&r.textContent!==i.textContent?i.textContent=r.textContent:r.innerHTML&&r.innerHTML!==i.innerHTML&&(i.innerHTML=r.innerHTML)))}let lo=!1;async function gw(t,e={}){var f,d;const n={shouldRender:!0};if(await t.hooks.callHook("dom:beforeRender",n),!n.shouldRender)return;const r=e.document||t.resolvedOptions.document||window.document,i=(await t.resolveTags()).map(a);if(t.resolvedOptions.experimentalHashHydration&&(lo=lo||t._hash||!1,lo)){const p=AL(i.map(g=>g.tag._h));if(lo===p)return;lo=p}const s=t._popSideEffectQueue();t.headEntries().map(p=>p._sde).forEach(p=>{Object.entries(p).forEach(([g,b])=>{s[g]=b})});const o=(p,g,b)=>{g=`${p.renderId}:${g}`,p.entry&&(p.entry._sde[g]=b),delete s[g]};function a(p){const g=t.headEntries().find(m=>m._i===p._e),b={renderId:p._d||nd(p),$el:null,shouldRender:!0,tag:p,entry:g,markSideEffect:(m,v)=>o(b,m,v)};return b}const l=[],u={body:[],head:[]},c=p=>{t._elMap[p.renderId]=p.$el,l.push(p),o(p,"el",()=>{var g;(g=p.$el)==null||g.remove(),delete t._elMap[p.renderId]})};for(const p of i){if(await t.hooks.callHook("dom:beforeRenderTag",p),!p.shouldRender)continue;const{tag:g}=p;if(g.tag==="title"){r.title=g.textContent||"",l.push(p);continue}if(g.tag==="htmlAttrs"||g.tag==="bodyAttrs"){p.$el=r[g.tag==="htmlAttrs"?"documentElement":"body"],vl(p,!1,o),l.push(p);continue}if(p.$el=t._elMap[p.renderId],!p.$el&&g.key&&(p.$el=r.querySelector(`${(f=g.tagPosition)!=null&&f.startsWith("body")?"body":"head"} > ${g.tag}[data-h-${g._h}]`)),p.$el){p.tag._d&&vl(p),c(p);continue}u[(d=g.tagPosition)!=null&&d.startsWith("body")?"body":"head"].push(p)}const h={bodyClose:void 0,bodyOpen:void 0,head:void 0};Object.entries(u).forEach(([p,g])=>{var m;if(!g.length)return;const b=(m=r==null?void 0:r[p])==null?void 0:m.children;if(b){for(const v of[...b].reverse()){const _=v.tagName.toLowerCase();if(!hw.includes(_))continue;const y=v.getAttributeNames().reduce((I,R)=>({...I,[R]:v.getAttribute(R)}),{}),E={tag:_,props:y};v.innerHTML&&(E.innerHTML=v.innerHTML);const k=nd(E);let S=g.findIndex(I=>(I==null?void 0:I.renderId)===k);if(S===-1){const I=pw(E);S=g.findIndex(R=>(R==null?void 0:R.tag._d)&&R.tag._d===I)}if(S!==-1){const I=g[S];I.$el=v,vl(I),c(I),delete g[S]}}g.forEach(v=>{const _=v.tag.tagPosition||"head";h[_]=h[_]||r.createDocumentFragment(),v.$el||(v.$el=r.createElement(v.tag.tag),vl(v,!0)),h[_].appendChild(v.$el),c(v)})}}),h.head&&r.head.appendChild(h.head),h.bodyOpen&&r.body.insertBefore(h.bodyOpen,r.body.firstChild),h.bodyClose&&r.body.appendChild(h.bodyClose);for(const p of l)await t.hooks.callHook("dom:renderTag",p);Object.values(s).forEach(p=>p())}let Kf=null;async function mw(t,e={}){function n(){return Kf=null,gw(t,e)}const r=e.delayFn||(i=>setTimeout(i,10));return Kf=Kf||new Promise(i=>r(()=>i(n())))}function IL(t){return{hooks:{"entries:updated":function(e){if(typeof(t==null?void 0:t.document)>"u"&&typeof window>"u")return;let n=t==null?void 0:t.delayFn;!n&&typeof requestAnimationFrame<"u"&&(n=requestAnimationFrame),mw(e,{document:(t==null?void 0:t.document)||window.document,delayFn:n})}}}}function SL(t){var e;return((e=t==null?void 0:t.head.querySelector('meta[name="unhead:ssr"]'))==null?void 0:e.getAttribute("content"))||!1}const Wv={critical:2,high:9,low:12,base:-1,title:1,meta:10};function Gv(t){if(typeof t.tagPriority=="number")return t.tagPriority;if(t.tag==="meta"){if(t.props.charset)return-2;if(t.props["http-equiv"]==="content-security-policy")return 0}const e=t.tagPriority||t.tag;return e in Wv?Wv[e]:10}const OL=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}];function kL(){return{hooks:{"tags:resolve":t=>{const e=n=>{var r;return(r=t.tags.find(i=>i._d===n))==null?void 0:r._p};for(const{prefix:n,offset:r}of OL)for(const i of t.tags.filter(s=>typeof s.tagPriority=="string"&&s.tagPriority.startsWith(n))){const s=e(i.tagPriority.replace(n,""));typeof s<"u"&&(i._p=s+r)}t.tags.sort((n,r)=>n._p-r._p).sort((n,r)=>Gv(n)-Gv(r))}}}}function CL(){return{hooks:{"tags:resolve":t=>{const{tags:e}=t;let n=e.findIndex(i=>i.tag==="titleTemplate");const r=e.findIndex(i=>i.tag==="title");if(r!==-1&&n!==-1){const i=Kv(e[n].textContent,e[r].textContent);i!==null?e[r].textContent=i||e[r].textContent:delete e[r]}else if(n!==-1){const i=Kv(e[n].textContent);i!==null&&(e[n].textContent=i,e[n].tag="title",n=-1)}n!==-1&&delete e[n],t.tags=e.filter(Boolean)}}}}function NL(){return{hooks:{"tag:normalise":function({tag:t}){typeof t.props.body<"u"&&(t.tagPosition="bodyClose",delete t.props.body)}}}}const RL=["link","style","script","noscript"];function PL(){return{hooks:{"tag:normalise":({tag:t,resolvedOptions:e})=>{e.experimentalHashHydration===!0&&(t._h=nd(t)),t.key&&RL.includes(t.tag)&&(t._h=dw(t.key),t.props[`data-h-${t._h}`]="")}}}}const Qv=["script","link","bodyAttrs"];function xL(){const t=(e,n)=>{const r={},i={};Object.entries(n.props).forEach(([o,a])=>{o.startsWith("on")&&typeof a=="function"?i[o]=a:r[o]=a});let s;return e==="dom"&&n.tag==="script"&&typeof r.src=="string"&&typeof i.onload<"u"&&(s=r.src,delete r.src),{props:r,eventHandlers:i,delayedSrc:s}};return{hooks:{"ssr:render":function(e){e.tags=e.tags.map(n=>(!Qv.includes(n.tag)||!Object.entries(n.props).find(([r,i])=>r.startsWith("on")&&typeof i=="function")||(n.props=t("ssr",n).props),n))},"dom:beforeRenderTag":function(e){if(!Qv.includes(e.tag.tag)||!Object.entries(e.tag.props).find(([s,o])=>s.startsWith("on")&&typeof o=="function"))return;const{props:n,eventHandlers:r,delayedSrc:i}=t("dom",e.tag);Object.keys(r).length&&(e.tag.props=n,e.tag._eventHandlers=r,e.tag._delayedSrc=i)},"dom:renderTag":function(e){const n=e.$el;if(!e.tag._eventHandlers||!n)return;const r=e.tag.tag==="bodyAttrs"&&typeof window<"u"?window:n;Object.entries(e.tag._eventHandlers).forEach(([i,s])=>{const o=`${e.tag._d||e.tag._p}:${i}`,a=i.slice(2).toLowerCase(),l=`data-h-${a}`;if(e.markSideEffect(o,()=>{}),n.hasAttribute(l))return;const u=s;n.setAttribute(l,""),r.addEventListener(a,u),e.entry&&(e.entry._sde[o]=()=>{r.removeEventListener(a,u),n.removeAttribute(l)})}),e.tag._delayedSrc&&n.setAttribute("src",e.tag._delayedSrc)}}}}const DL=["templateParams","htmlAttrs","bodyAttrs"];function LL(){return{hooks:{"tag:normalise":function({tag:t}){["hid","vmid","key"].forEach(r=>{t.props[r]&&(t.key=t.props[r],delete t.props[r])});const n=pw(t)||(t.key?`${t.tag}:${t.key}`:!1);n&&(t._d=n)},"tags:resolve":function(t){const e={};t.tags.forEach(r=>{const i=(r.key?`${r.tag}:${r.key}`:r._d)||r._p,s=e[i];if(s){let a=r==null?void 0:r.tagDuplicateStrategy;if(!a&&DL.includes(r.tag)&&(a="merge"),a==="merge"){const l=s.props;["class","style"].forEach(u=>{r.props[u]&&l[u]&&(u==="style"&&!l[u].endsWith(";")&&(l[u]+=";"),r.props[u]=`${l[u]} ${r.props[u]}`)}),e[i].props={...l,...r.props};return}else if(r._e===s._e){s._duped=s._duped||[],r._d=`${s._d}:${s._duped.length+1}`,s._duped.push(r);return}}const o=Object.keys(r.props).length+(r.innerHTML?1:0)+(r.textContent?1:0);if(hw.includes(r.tag)&&o===0){delete e[i];return}e[i]=r});const n=[];Object.values(e).forEach(r=>{const i=r._duped;delete r._duped,n.push(r),i&&n.push(...i)}),t.tags=n}}}}function yl(t,e){function n(s){if(["s","pageTitle"].includes(s))return e.pageTitle;let o;return s.includes(".")?o=s.split(".").reduce((a,l)=>a&&a[l]||void 0,e):o=e[s],typeof o<"u"?o||"":!1}let r=t;try{r=decodeURI(t)}catch{}return(r.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(s=>{const o=n(s.slice(1));typeof o=="string"&&(t=t.replace(new RegExp(`\\${s}(\\W|$)`,"g"),`${o}$1`).trim())}),e.separator&&(t.endsWith(e.separator)&&(t=t.slice(0,-e.separator.length).trim()),t.startsWith(e.separator)&&(t=t.slice(e.separator.length).trim()),t=t.replace(new RegExp(`\\${e.separator}\\s*\\${e.separator}`,"g"),e.separator)),t}function ML(){return{hooks:{"tags:resolve":t=>{var s;const{tags:e}=t,n=(s=e.find(o=>o.tag==="title"))==null?void 0:s.textContent,r=e.findIndex(o=>o.tag==="templateParams"),i=r!==-1?e[r].props:{};i.pageTitle=i.pageTitle||n||"";for(const o of e)if(["titleTemplate","title"].includes(o.tag)&&typeof o.textContent=="string")o.textContent=yl(o.textContent,i);else if(o.tag==="meta"&&typeof o.props.content=="string")o.props.content=yl(o.props.content,i);else if(o.tag==="link"&&typeof o.props.href=="string")o.props.href=yl(o.props.href,i);else if(o.tag==="script"&&["application/json","application/ld+json"].includes(o.props.type)&&typeof o.innerHTML=="string")try{o.innerHTML=JSON.stringify(JSON.parse(o.innerHTML),(a,l)=>typeof l=="string"?yl(l,i):l)}catch{}t.tags=e.filter(o=>o.tag!=="templateParams")}}}}const jL=typeof window<"u";let vw;function FL(t){return vw=t}function BL(){return vw}async function UL(t,e){const n={tag:t,props:{}};return t==="templateParams"?(n.props=e,n):["title","titleTemplate"].includes(t)?(n.textContent=e instanceof Promise?await e:e,n):typeof e=="string"?["script","noscript","style"].includes(t)?(t==="script"&&(/^(https?:)?\/\//.test(e)||e.startsWith("/"))?n.props.src=e:n.innerHTML=e,n):!1:(n.props=await $L(t,{...e}),n.props.children&&(n.props.innerHTML=n.props.children),delete n.props.children,Object.keys(n.props).filter(r=>TL.includes(r)).forEach(r=>{(!["innerHTML","textContent"].includes(r)||fw.includes(n.tag))&&(n[r]=n.props[r]),delete n.props[r]}),["innerHTML","textContent"].forEach(r=>{if(n.tag==="script"&&typeof n[r]=="string"&&["application/ld+json","application/json"].includes(n.props.type))try{n[r]=JSON.parse(n[r])}catch{n[r]=""}typeof n[r]=="object"&&(n[r]=JSON.stringify(n[r]))}),n.props.class&&(n.props.class=qL(n.props.class)),n.props.content&&Array.isArray(n.props.content)?n.props.content.map(r=>({...n,props:{...n.props,content:r}})):n)}function qL(t){return typeof t=="object"&&!Array.isArray(t)&&(t=Object.keys(t).filter(e=>t[e])),(Array.isArray(t)?t.join(" "):t).split(" ").filter(e=>e.trim()).filter(Boolean).join(" ")}async function $L(t,e){for(const n of Object.keys(e)){const r=n.startsWith("data-");e[n]instanceof Promise&&(e[n]=await e[n]),String(e[n])==="true"?e[n]=r?"true":"":String(e[n])==="false"&&(r?e[n]="false":delete e[n])}return e}const HL=10;async function VL(t){const e=[];return Object.entries(t.resolvedInput).filter(([n,r])=>typeof r<"u"&&wL.includes(n)).forEach(([n,r])=>{const i=_L(r);e.push(...i.map(s=>UL(n,s)).flat())}),(await Promise.all(e)).flat().filter(Boolean).map((n,r)=>(n._e=t._i,n._p=(t._i<<HL)+r,n))}function zL(){return[LL(),kL(),ML(),CL(),PL(),xL(),NL()]}function KL(t={}){return[IL({document:t==null?void 0:t.document,delayFn:t==null?void 0:t.domDelayFn})]}function WL(t={}){const e=GL({...t,plugins:[...KL(t),...(t==null?void 0:t.plugins)||[]]});return t.experimentalHashHydration&&e.resolvedOptions.document&&(e._hash=SL(e.resolvedOptions.document)),FL(e),e}function GL(t={}){let e=[],n={},r=0;const i=bL();t!=null&&t.hooks&&i.addHooks(t.hooks),t.plugins=[...zL(),...(t==null?void 0:t.plugins)||[]],t.plugins.forEach(a=>a.hooks&&i.addHooks(a.hooks)),t.document=t.document||(jL?document:void 0);const s=()=>i.callHook("entries:updated",o),o={resolvedOptions:t,headEntries(){return e},get hooks(){return i},use(a){a.hooks&&i.addHooks(a.hooks)},push(a,l){const u={_i:r++,input:a,_sde:{}};return l!=null&&l.mode&&(u._m=l==null?void 0:l.mode),l!=null&&l.transform&&(u._t=l==null?void 0:l.transform),e.push(u),s(),{dispose(){e=e.filter(c=>c._i!==u._i?!0:(n={...n,...c._sde||{}},c._sde={},s(),!1))},patch(c){e=e.map(h=>(h._i===u._i&&(u.input=h.input=c,s()),h))}}},async resolveTags(){const a={tags:[],entries:[...e]};await i.callHook("entries:resolve",a);for(const l of a.entries){const u=l._t||(c=>c);if(l.resolvedInput=u(l.resolvedInput||l.input),l.resolvedInput)for(const c of await VL(l)){const h={tag:c,entry:l,resolvedOptions:o.resolvedOptions};await i.callHook("tag:normalise",h),a.tags.push(h.tag)}}return await i.callHook("tags:resolve",a),a.tags},_popSideEffectQueue(){const a={...n};return n={},a},_elMap:{}};return o.hooks.callHook("init",o),o}function QL(t){return typeof t=="function"?t():Vt(t)}function gu(t,e=""){if(t instanceof Promise)return t;const n=QL(t);return!t||!n?n:Array.isArray(n)?n.map(r=>gu(r,e)):typeof n=="object"?Object.fromEntries(Object.entries(n).map(([r,i])=>r==="titleTemplate"||r.startsWith("on")?[r,Vt(i)]:[r,gu(i,r)])):n}const YL=Od.startsWith("3"),XL=typeof window<"u",yw="usehead";function lg(){return Pu()&&yn(yw)||BL()}function JL(t){return{install(n){YL&&(n.config.globalProperties.$unhead=t,n.config.globalProperties.$head=t,n.provide(yw,t))}}.install}function ZL(t={}){const e=WL({...t,domDelayFn:n=>setTimeout(()=>jo(()=>n()),10),plugins:[e2(),...(t==null?void 0:t.plugins)||[]]});return e.install=JL(e),e}function e2(){return{hooks:{"entries:resolve":function(t){for(const e of t.entries)e.resolvedInput=gu(e.input)}}}}function t2(t,e={}){const n=lg(),r=pt(!1),i=pt({});XE(()=>{i.value=r.value?{}:gu(t)});const s=n.push(i.value,e);return Cn(i,a=>{s.patch(a)}),Pu()&&(Cu(()=>{s.dispose()}),Yy(()=>{r.value=!0}),Qy(()=>{r.value=!1})),s}function n2(t,e={}){return lg().push(t,e)}function bw(t,e={}){var r;const n=lg();if(n){const i=XL||!!((r=n.resolvedOptions)!=null&&r.document);return e.mode==="server"&&i||e.mode==="client"&&!i?void 0:i?t2(t,e):n2(t,e)}}function r2(t,e){const n=ZL(e||{}),r={unhead:n,install(i){Od.startsWith("3")&&(i.config.globalProperties.$head=n,i.provide("usehead",n))},use(i){n.use(i)},resolveTags(){return n.resolveTags()},headEntries(){return n.headEntries()},headTags(){return n.resolveTags()},push(i,s){return n.push(i,s)},addEntry(i,s){return n.push(i,s)},addHeadObjs(i,s){return n.push(i,s)},addReactiveEntry(i,s){const o=bw(i,s);return typeof o<"u"?o.dispose:()=>{}},removeHeadObjs(){},updateDOM(i,s){s?gw(n,{document:i}):mw(n,{delayFn:o=>setTimeout(()=>o(),50),document:i})},internalHooks:n.hooks,hooks:{"before:dom":[],"resolved:tags":[],"resolved:entries":[]}};return n.addHeadObjs=r.addHeadObjs,n.updateDOM=r.updateDOM,n.hooks.hook("dom:beforeRender",i=>{for(const s of r.hooks["before:dom"])s()===!1&&(i.shouldRender=!1)}),t&&r.addHeadObjs(t),r}/*!
  * vue-router v4.2.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const ts=typeof window<"u";function i2(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Ue=Object.assign;function Wf(t,e){const n={};for(const r in e){const i=e[r];n[r]=xn(i)?i.map(t):t(i)}return n}const No=()=>{},xn=Array.isArray,s2=/\/$/,o2=t=>t.replace(s2,"");function Gf(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=c2(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function a2(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Yv(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function l2(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&ks(e.matched[r],n.matched[i])&&_w(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ks(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function _w(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!u2(t[n],e[n]))return!1;return!0}function u2(t,e){return xn(t)?Xv(t,e):xn(e)?Xv(e,t):t===e}function Xv(t,e){return xn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function c2(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var la;(function(t){t.pop="pop",t.push="push"})(la||(la={}));var Ro;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ro||(Ro={}));function f2(t){if(!t)if(ts){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),o2(t)}const h2=/^[^#]+#/;function d2(t,e){return t.replace(h2,"#")+e}function p2(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const yc=()=>({left:window.pageXOffset,top:window.pageYOffset});function g2(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=p2(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Jv(t,e){return(history.state?history.state.position-e:-1)+t}const rd=new Map;function m2(t,e){rd.set(t,e)}function v2(t){const e=rd.get(t);return rd.delete(t),e}let y2=()=>location.protocol+"//"+location.host;function ww(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Yv(l,"")}return Yv(n,t)+r+i}function b2(t,e,n,r){let i=[],s=[],o=null;const a=({state:f})=>{const d=ww(t,location),p=n.value,g=e.value;let b=0;if(f){if(n.value=d,e.value=f,o&&o===p){o=null;return}b=g?f.position-g.position:0}else r(d);i.forEach(m=>{m(n.value,p,{delta:b,type:la.pop,direction:b?b>0?Ro.forward:Ro.back:Ro.unknown})})};function l(){o=n.value}function u(f){i.push(f);const d=()=>{const p=i.indexOf(f);p>-1&&i.splice(p,1)};return s.push(d),d}function c(){const{history:f}=window;f.state&&f.replaceState(Ue({},f.state,{scroll:yc()}),"")}function h(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:h}}function Zv(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?yc():null}}function _2(t){const{history:e,location:n}=window,r={value:ww(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,u,c){const h=t.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:y2()+t+l;try{e[c?"replaceState":"pushState"](u,"",f),i.value=u}catch(d){console.error(d),n[c?"replace":"assign"](f)}}function o(l,u){const c=Ue({},e.state,Zv(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});s(l,c,!0),r.value=l}function a(l,u){const c=Ue({},i.value,e.state,{forward:l,scroll:yc()});s(c.current,c,!0);const h=Ue({},Zv(r.value,l,null),{position:c.position+1},u);s(l,h,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function w2(t){t=f2(t);const e=_2(t),n=b2(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Ue({location:"",base:t,go:r,createHref:d2.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function E2(t){return typeof t=="string"||t&&typeof t=="object"}function Ew(t){return typeof t=="string"||typeof t=="symbol"}const xr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Tw=Symbol("");var ey;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(ey||(ey={}));function Cs(t,e){return Ue(new Error,{type:t,[Tw]:!0},e)}function lr(t,e){return t instanceof Error&&Tw in t&&(e==null||!!(t.type&e))}const ty="[^/]+?",T2={sensitive:!1,strict:!1,start:!0,end:!0},A2=/[.+*?^${}()[\]/\\]/g;function I2(t,e){const n=Ue({},T2,e),r=[];let i=n.start?"^":"";const s=[];for(const u of t){const c=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let h=0;h<u.length;h++){const f=u[h];let d=40+(n.sensitive?.25:0);if(f.type===0)h||(i+="/"),i+=f.value.replace(A2,"\\$&"),d+=40;else if(f.type===1){const{value:p,repeatable:g,optional:b,regexp:m}=f;s.push({name:p,repeatable:g,optional:b});const v=m||ty;if(v!==ty){d+=10;try{new RegExp(`(${v})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${p}" (${v}): `+y.message)}}let _=g?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;h||(_=b&&u.length<2?`(?:/${_})`:"/"+_),b&&(_+="?"),i+=_,d+=20,b&&(d+=-8),g&&(d+=-20),v===".*"&&(d+=-50)}c.push(d)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(u){const c=u.match(o),h={};if(!c)return null;for(let f=1;f<c.length;f++){const d=c[f]||"",p=s[f-1];h[p.name]=d&&p.repeatable?d.split("/"):d}return h}function l(u){let c="",h=!1;for(const f of t){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const d of f)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:g,optional:b}=d,m=p in u?u[p]:"";if(xn(m)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const v=xn(m)?m.join("/"):m;if(!v)if(b)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);c+=v}}return c||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function S2(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function O2(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=S2(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(ny(r))return 1;if(ny(i))return-1}return i.length-r.length}function ny(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const k2={type:0,value:""},C2=/[a-zA-Z0-9_]/;function N2(t){if(!t)return[[]];if(t==="/")return[[k2]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(d){throw new Error(`ERR (${n})/"${u}": ${d}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,u="",c="";function h(){u&&(n===0?s.push({type:0,value:u}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&h(),o()):l===":"?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:C2.test(l)?f():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),o(),i}function R2(t,e,n){const r=I2(N2(t.path),n),i=Ue(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function P2(t,e){const n=[],r=new Map;e=sy({strict:!1,end:!0,sensitive:!1},e);function i(c){return r.get(c)}function s(c,h,f){const d=!f,p=x2(c);p.aliasOf=f&&f.record;const g=sy(e,c),b=[p];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const y of _)b.push(Ue({},p,{components:f?f.record.components:p.components,path:y,aliasOf:f?f.record:p}))}let m,v;for(const _ of b){const{path:y}=_;if(h&&y[0]!=="/"){const E=h.record.path,k=E[E.length-1]==="/"?"":"/";_.path=h.record.path+(y&&k+y)}if(m=R2(_,h,g),f?f.alias.push(m):(v=v||m,v!==m&&v.alias.push(m),d&&c.name&&!iy(m)&&o(c.name)),p.children){const E=p.children;for(let k=0;k<E.length;k++)s(E[k],m,f&&f.children[k])}f=f||m,(m.record.components&&Object.keys(m.record.components).length||m.record.name||m.record.redirect)&&l(m)}return v?()=>{o(v)}:No}function o(c){if(Ew(c)){const h=r.get(c);h&&(r.delete(c),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(c);h>-1&&(n.splice(h,1),c.record.name&&r.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function a(){return n}function l(c){let h=0;for(;h<n.length&&O2(c,n[h])>=0&&(c.record.path!==n[h].record.path||!Aw(c,n[h]));)h++;n.splice(h,0,c),c.record.name&&!iy(c)&&r.set(c.record.name,c)}function u(c,h){let f,d={},p,g;if("name"in c&&c.name){if(f=r.get(c.name),!f)throw Cs(1,{location:c});g=f.record.name,d=Ue(ry(h.params,f.keys.filter(v=>!v.optional).map(v=>v.name)),c.params&&ry(c.params,f.keys.map(v=>v.name))),p=f.stringify(d)}else if("path"in c)p=c.path,f=n.find(v=>v.re.test(p)),f&&(d=f.parse(p),g=f.record.name);else{if(f=h.name?r.get(h.name):n.find(v=>v.re.test(h.path)),!f)throw Cs(1,{location:c,currentLocation:h});g=f.record.name,d=Ue({},h.params,c.params),p=f.stringify(d)}const b=[];let m=f;for(;m;)b.unshift(m.record),m=m.parent;return{name:g,path:p,params:d,matched:b,meta:L2(b)}}return t.forEach(c=>s(c)),{addRoute:s,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function ry(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function x2(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:D2(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function D2(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function iy(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function L2(t){return t.reduce((e,n)=>Ue(e,n.meta),{})}function sy(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Aw(t,e){return e.children.some(n=>n===t||Aw(t,n))}const Iw=/#/g,M2=/&/g,j2=/\//g,F2=/=/g,B2=/\?/g,Sw=/\+/g,U2=/%5B/g,q2=/%5D/g,Ow=/%5E/g,$2=/%60/g,kw=/%7B/g,H2=/%7C/g,Cw=/%7D/g,V2=/%20/g;function ug(t){return encodeURI(""+t).replace(H2,"|").replace(U2,"[").replace(q2,"]")}function z2(t){return ug(t).replace(kw,"{").replace(Cw,"}").replace(Ow,"^")}function id(t){return ug(t).replace(Sw,"%2B").replace(V2,"+").replace(Iw,"%23").replace(M2,"%26").replace($2,"`").replace(kw,"{").replace(Cw,"}").replace(Ow,"^")}function K2(t){return id(t).replace(F2,"%3D")}function W2(t){return ug(t).replace(Iw,"%23").replace(B2,"%3F")}function G2(t){return t==null?"":W2(t).replace(j2,"%2F")}function mu(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Q2(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(Sw," "),o=s.indexOf("="),a=mu(o<0?s:s.slice(0,o)),l=o<0?null:mu(s.slice(o+1));if(a in e){let u=e[a];xn(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function oy(t){let e="";for(let n in t){const r=t[n];if(n=K2(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(xn(r)?r.map(s=>s&&id(s)):[r&&id(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function Y2(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=xn(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const X2=Symbol(""),ay=Symbol(""),bc=Symbol(""),cg=Symbol(""),sd=Symbol("");function uo(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function Lr(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(Cs(4,{from:n,to:e})):h instanceof Error?a(h):E2(h)?a(Cs(2,{from:e,to:h})):(s&&r.enterCallbacks[i]===s&&typeof h=="function"&&s.push(h),o())},u=t.call(r&&r.instances[i],e,n,l);let c=Promise.resolve(u);t.length<3&&(c=c.then(l)),c.catch(h=>a(h))})}function Qf(t,e,n,r){const i=[];for(const s of t)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(J2(a)){const u=(a.__vccOpts||a)[e];u&&i.push(Lr(u,n,r,s,o))}else{let l=a();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const c=i2(u)?u.default:u;s.components[o]=c;const f=(c.__vccOpts||c)[e];return f&&Lr(f,n,r,s,o)()}))}}return i}function J2(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ly(t){const e=yn(bc),n=yn(cg),r=Ht(()=>e.resolve(Vt(t.to))),i=Ht(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],h=n.matched;if(!c||!h.length)return-1;const f=h.findIndex(ks.bind(null,c));if(f>-1)return f;const d=uy(l[u-2]);return u>1&&uy(c)===d&&h[h.length-1].path!==d?h.findIndex(ks.bind(null,l[u-2])):f}),s=Ht(()=>i.value>-1&&nM(n.params,r.value.params)),o=Ht(()=>i.value>-1&&i.value===n.matched.length-1&&_w(n.params,r.value.params));function a(l={}){return tM(l)?e[Vt(t.replace)?"replace":"push"](Vt(t.to)).catch(No):Promise.resolve()}return{route:r,href:Ht(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const Z2=fa({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ly,setup(t,{slots:e}){const n=$t(ly(t)),{options:r}=yn(bc),i=Ht(()=>({[cy(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[cy(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Du("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),eM=Z2;function tM(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function nM(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!xn(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function uy(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const cy=(t,e,n)=>t??e??n,rM=fa({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=yn(sd),i=Ht(()=>t.route||r.value),s=yn(ay,0),o=Ht(()=>{let u=Vt(s);const{matched:c}=i.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),a=Ht(()=>i.value.matched[o.value]);Al(ay,Ht(()=>o.value+1)),Al(X2,a),Al(sd,i);const l=pt();return Cn(()=>[l.value,a.value,t.name],([u,c,h],[f,d,p])=>{c&&(c.instances[h]=u,d&&d!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!ks(c,d)||!f)&&(c.enterCallbacks[h]||[]).forEach(g=>g(u))},{flush:"post"}),()=>{const u=i.value,c=t.name,h=a.value,f=h&&h.components[c];if(!f)return fy(n.default,{Component:f,route:u});const d=h.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,b=Du(f,Ue({},p,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(h.instances[c]=null)},ref:l}));return fy(n.default,{Component:b,route:u})||b}}});function fy(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const iM=rM;function sM(t){const e=P2(t.routes,t),n=t.parseQuery||Q2,r=t.stringifyQuery||oy,i=t.history,s=uo(),o=uo(),a=uo(),l=PE(xr);let u=xr;ts&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Wf.bind(null,x=>""+x),h=Wf.bind(null,G2),f=Wf.bind(null,mu);function d(x,V){let $,ee;return Ew(x)?($=e.getRecordMatcher(x),ee=V):ee=x,e.addRoute(ee,$)}function p(x){const V=e.getRecordMatcher(x);V&&e.removeRoute(V)}function g(){return e.getRoutes().map(x=>x.record)}function b(x){return!!e.getRecordMatcher(x)}function m(x,V){if(V=Ue({},V||l.value),typeof x=="string"){const z=Gf(n,x,V.path),re=e.resolve({path:z.path},V),se=i.createHref(z.fullPath);return Ue(z,re,{params:f(re.params),hash:mu(z.hash),redirectedFrom:void 0,href:se})}let $;if("path"in x)$=Ue({},x,{path:Gf(n,x.path,V.path).path});else{const z=Ue({},x.params);for(const re in z)z[re]==null&&delete z[re];$=Ue({},x,{params:h(z)}),V.params=h(V.params)}const ee=e.resolve($,V),fe=x.hash||"";ee.params=c(f(ee.params));const M=a2(r,Ue({},x,{hash:z2(fe),path:ee.path})),B=i.createHref(M);return Ue({fullPath:M,hash:fe,query:r===oy?Y2(x.query):x.query||{}},ee,{redirectedFrom:void 0,href:B})}function v(x){return typeof x=="string"?Gf(n,x,l.value.path):Ue({},x)}function _(x,V){if(u!==x)return Cs(8,{from:V,to:x})}function y(x){return S(x)}function E(x){return y(Ue(v(x),{replace:!0}))}function k(x){const V=x.matched[x.matched.length-1];if(V&&V.redirect){const{redirect:$}=V;let ee=typeof $=="function"?$(x):$;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=v(ee):{path:ee},ee.params={}),Ue({query:x.query,hash:x.hash,params:"path"in ee?{}:x.params},ee)}}function S(x,V){const $=u=m(x),ee=l.value,fe=x.state,M=x.force,B=x.replace===!0,z=k($);if(z)return S(Ue(v(z),{state:typeof z=="object"?Ue({},fe,z.state):fe,force:M,replace:B}),V||$);const re=$;re.redirectedFrom=V;let se;return!M&&l2(r,ee,$)&&(se=Cs(16,{to:re,from:ee}),N(ee,ee,!0,!1)),(se?Promise.resolve(se):O(re,ee)).catch(ae=>lr(ae)?lr(ae,2)?ae:F(ae):ie(ae,re,ee)).then(ae=>{if(ae){if(lr(ae,2))return S(Ue({replace:B},v(ae.to),{state:typeof ae.to=="object"?Ue({},fe,ae.to.state):fe,force:M}),V||re)}else ae=A(re,ee,!0,B,fe);return T(re,ee,ae),ae})}function I(x,V){const $=_(x,V);return $?Promise.reject($):Promise.resolve()}function R(x){const V=J.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(x):x()}function O(x,V){let $;const[ee,fe,M]=oM(x,V);$=Qf(ee.reverse(),"beforeRouteLeave",x,V);for(const z of ee)z.leaveGuards.forEach(re=>{$.push(Lr(re,x,V))});const B=I.bind(null,x,V);return $.push(B),L($).then(()=>{$=[];for(const z of s.list())$.push(Lr(z,x,V));return $.push(B),L($)}).then(()=>{$=Qf(fe,"beforeRouteUpdate",x,V);for(const z of fe)z.updateGuards.forEach(re=>{$.push(Lr(re,x,V))});return $.push(B),L($)}).then(()=>{$=[];for(const z of x.matched)if(z.beforeEnter&&!V.matched.includes(z))if(xn(z.beforeEnter))for(const re of z.beforeEnter)$.push(Lr(re,x,V));else $.push(Lr(z.beforeEnter,x,V));return $.push(B),L($)}).then(()=>(x.matched.forEach(z=>z.enterCallbacks={}),$=Qf(M,"beforeRouteEnter",x,V),$.push(B),L($))).then(()=>{$=[];for(const z of o.list())$.push(Lr(z,x,V));return $.push(B),L($)}).catch(z=>lr(z,8)?z:Promise.reject(z))}function T(x,V,$){for(const ee of a.list())R(()=>ee(x,V,$))}function A(x,V,$,ee,fe){const M=_(x,V);if(M)return M;const B=V===xr,z=ts?history.state:{};$&&(ee||B?i.replace(x.fullPath,Ue({scroll:B&&z&&z.scroll},fe)):i.push(x.fullPath,fe)),l.value=x,N(x,V,$,B),F()}let C;function D(){C||(C=i.listen((x,V,$)=>{if(!K.listening)return;const ee=m(x),fe=k(ee);if(fe){S(Ue(fe,{replace:!0}),ee).catch(No);return}u=ee;const M=l.value;ts&&m2(Jv(M.fullPath,$.delta),yc()),O(ee,M).catch(B=>lr(B,12)?B:lr(B,2)?(S(B.to,ee).then(z=>{lr(z,20)&&!$.delta&&$.type===la.pop&&i.go(-1,!1)}).catch(No),Promise.reject()):($.delta&&i.go(-$.delta,!1),ie(B,ee,M))).then(B=>{B=B||A(ee,M,!1),B&&($.delta&&!lr(B,8)?i.go(-$.delta,!1):$.type===la.pop&&lr(B,20)&&i.go(-1,!1)),T(ee,M,B)}).catch(No)}))}let q=uo(),Q=uo(),Y;function ie(x,V,$){F(x);const ee=Q.list();return ee.length?ee.forEach(fe=>fe(x,V,$)):console.error(x),Promise.reject(x)}function X(){return Y&&l.value!==xr?Promise.resolve():new Promise((x,V)=>{q.add([x,V])})}function F(x){return Y||(Y=!x,D(),q.list().forEach(([V,$])=>x?$(x):V()),q.reset()),x}function N(x,V,$,ee){const{scrollBehavior:fe}=t;if(!ts||!fe)return Promise.resolve();const M=!$&&v2(Jv(x.fullPath,0))||(ee||!$)&&history.state&&history.state.scroll||null;return jo().then(()=>fe(x,V,M)).then(B=>B&&g2(B)).catch(B=>ie(B,x,V))}const j=x=>i.go(x);let U;const J=new Set,K={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:b,getRoutes:g,resolve:m,options:t,push:y,replace:E,go:j,back:()=>j(-1),forward:()=>j(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:Q.add,isReady:X,install(x){const V=this;x.component("RouterLink",eM),x.component("RouterView",iM),x.config.globalProperties.$router=V,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>Vt(l)}),ts&&!U&&l.value===xr&&(U=!0,y(i.location).catch(fe=>{}));const $={};for(const fe in xr)$[fe]=Ht(()=>l.value[fe]);x.provide(bc,V),x.provide(cg,$t($)),x.provide(sd,l);const ee=x.unmount;J.add(x),x.unmount=function(){J.delete(x),J.size<1&&(u=xr,C&&C(),C=null,l.value=xr,U=!1,Y=!1),ee()}}};function L(x){return x.reduce((V,$)=>V.then(()=>R($)),Promise.resolve())}return K}function oM(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(u=>ks(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>ks(u,l))||i.push(l))}return[n,r,i]}function aM(){return yn(bc)}function ZM(){return yn(cg)}const lM={class:"app"},uM=fa({__name:"App",setup(t){bw({title:"SEAFOD",titleTemplate:s=>`${s==="SEAFOD"?s:s+" - SEAFOD"} | E-Module Terintegrasi`,meta:[{charset:"UTF-8"},{name:"viewport",content:"width=device-width, initial-scale=1.0 max-scale=1.0"},{name:"description",content:"E-Module Terintegrasi - SEAFOD | Sex education for children"},{name:"theme-color",content:"#39b6bb"},{name:"msapplication-config",content:"/browserconfig.xml"},{name:"msapplication-TileColor",content:"#39b6bb"}],link:[{rel:"shortcut icon",type:"image/svg+xml",href:"/favicon.ico"},{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"},{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"},{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"},{rel:"manifest",href:"/site.webmanifest"},{rel:"mask-icon",href:"/safari-pinned-tab.svg",color:"#39b6bb"},{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.css",integrity:"sha512-Z0kTB03S7BU+JFU0nw9mjSBcRnZm2Bvm0tzOX9/OuOuz01XQfOpa0w/N9u6Jf2f1OAdegdIPWZ9nIZZ+keEvBw==",crossorigin:"anonymous"},{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Rowdies:wght@300;400;700&display=swap",crossorigin:"anonymous"}],script:[{src:"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js",integrity:"sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==",crossorigin:"anonymous"},{src:"https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.3.1/mdb.min.js",integrity:"sha512-DXEKT9U5aI4s0iPRILUN6itJ0BkIdMYmJg+nnirpdAklNOz972QQhjvdHYnDCn+5W/HBvAiXYG2UaHEHH87gpg==",crossorigin:"anonymous"}]});const e=pt(!1),n=pt("seafod"),r=aM(),i=pt(!0);return e?setTimeout(()=>{i.value=!1},500):setTimeout(()=>{i.value=!1},8e3),r.isReady().then(()=>{_t().loadApp(n.value).then(()=>{})}),(s,o)=>{const a=dL,l=cT("router-view");return Qe(),lt("div",lM,[ut(l,null,{default:Bo(({Component:u})=>[ut($o,{name:"fade"},{default:Bo(()=>[Vt(i)&&("AppStore"in s?s.AppStore:Vt(_t))().loadedApp.value?(Qe(),Ul(a,{key:0})):!Vt(i)&&("AppStore"in s?s.AppStore:Vt(_t))().loadedApp.value?(Qe(),Ul(fT(u),{key:1})):cr("",!0)]),_:2},1024)]),_:1})])}}}),cM="modulepreload",fM=function(t,e){return new URL(t,e).href},hy={},on=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=fM(s,r),s in hy)return;hy[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const h=i[c];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":cM,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function hM(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const u=async(h=!0)=>{await l};async function c(){if("serviceWorker"in navigator){const{Workbox:h}=await on(()=>import("./workbox-window.prod.es5-08b2315b.js"),[],import.meta.url);a=new h("./sw.js",{scope:"./",type:"classic"}),a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),a.register({immediate:e}).then(f=>{s?s("./sw.js",f):i==null||i(f)}).catch(f=>{o==null||o(f)})}}return l=c(),u}const dM=[{name:"user",path:"/",component:()=>on(()=>import("./User-ea6a3e32.js"),["./User-ea6a3e32.js","./Url-4d04c3c7.js","./EMTTitle-5ec395d4.js","./EMTTitle-6612a69f.css","./User-34ea80a8.css"],import.meta.url),children:[{name:"landing",path:"",component:()=>on(()=>import("./Landing-afefb459.js"),["./Landing-afefb459.js","./EMTTitle-5ec395d4.js","./EMTTitle-6612a69f.css","./Landing-97de1607.css"],import.meta.url)},{name:"get-started",path:"get-started",component:()=>on(()=>import("./GetStarted-a3265134.js"),["./GetStarted-a3265134.js","./EMTTitle-5ec395d4.js","./EMTTitle-6612a69f.css","./GetStarted-26eb76de.css"],import.meta.url)},{name:"menu",path:"menu",meta:{playing:!0},component:()=>on(()=>import("./Menu-13e47e1e.js"),["./Menu-13e47e1e.js","./EMTTitle-5ec395d4.js","./EMTTitle-6612a69f.css","./Url-4d04c3c7.js","./Menu-9b8f8512.css"],import.meta.url)},{name:"play",path:"play/:playingContent",meta:{playing:!0},component:()=>on(()=>import("./Play-402d78e0.js"),["./Play-402d78e0.js","./Url-4d04c3c7.js","./Play-fd7d41b8.css"],import.meta.url)}]},{name:"admin",path:"/admin",redirect:{path:"/login"},component:()=>on(()=>import("./Admin-1662c425.js"),["./Admin-1662c425.js","./Admin-6597ba0d.css"],import.meta.url),children:[{name:"auth",path:"/auth",component:()=>on(()=>import("./Login-85415a8e.js"),["./Login-85415a8e.js","./EMTTitle-5ec395d4.js","./EMTTitle-6612a69f.css","./Login-94305be8.css"],import.meta.url),children:[{name:"login",path:"login",alias:"/login",component:()=>on(()=>import("./Login-85415a8e.js"),["./Login-85415a8e.js","./EMTTitle-5ec395d4.js","./EMTTitle-6612a69f.css","./Login-94305be8.css"],import.meta.url)},{name:"registration",path:"registration",alias:"/registration",component:()=>on(()=>import("./Registration-c806dbec.js"),[],import.meta.url)}]},{name:"dashboard",path:"/dashboard",redirect:{name:"dashboard-manage-content",params:{selectedContent:"overview"}},meta:{admin:!0},component:()=>on(()=>import("./Dashboard-ff69689a.js"),["./Dashboard-ff69689a.js","./EMTTitle-5ec395d4.js","./EMTTitle-6612a69f.css","./Url-4d04c3c7.js","./Dashboard-0be9c926.css"],import.meta.url),children:[{name:"dashboard-manage-content",path:":selectedContent",component:()=>on(()=>import("./ManageContent-1160df58.js"),["./ManageContent-1160df58.js","./AppStorage-59a68013.js","./Url-4d04c3c7.js","./ManageContent-42ecac73.css"],import.meta.url),meta:{admin:!0},children:[{name:"dashboard-edit-content",path:"/:selectedContent/edit-content",meta:{admin:!0},component:()=>on(()=>import("./editContent-e0388520.js"),["./editContent-e0388520.js","./AppStorage-59a68013.js","./editContent-662051d9.css"],import.meta.url)}]}]}]}],Po=sM({history:w2("./"),routes:dM});Po.beforeEach((t,e,n)=>{t.meta.playing&&!e.name?Po.push({name:"landing"}):t.meta.admin&&!e.name&&Po.push({name:"admin"}),n()});Po.isReady().then(async()=>{hM({immediate:!0,onOfflineReady(){}})}).catch(()=>{});var Nw={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(r,i){t.exports=i()})(typeof self<"u"?self:qe,function(){return function(n){var r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),o=i(18),a=i(19),l=i(45),u=i(46),c=i(47),h=i(48),f=i(49),d=i(12),p=i(32),g=i(33),b=i(31),m=i(1),v={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:s.default,Format:o.default,Leaf:a.default,Embed:h.default,Scroll:l.default,Block:c.default,Inline:u.default,Text:f.default,Attributor:{Attribute:d.default,Class:p.default,Style:g.default,Store:b.default}};r.default=v},function(n,r,i){var s=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,v){m.__proto__=v}||function(m,v){for(var _ in v)v.hasOwnProperty(_)&&(m[_]=v[_])};return function(m,v){b(m,v);function _(){this.constructor=m}m.prototype=v===null?Object.create(v):(_.prototype=v.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(b){s(m,b);function m(v){var _=this;return v="[Parchment] "+v,_=b.call(this,v)||this,_.message=v,_.name=_.constructor.name,_}return m}(Error);r.ParchmentError=o;var a={},l={},u={},c={};r.DATA_KEY="__blot";var h;(function(b){b[b.TYPE=3]="TYPE",b[b.LEVEL=12]="LEVEL",b[b.ATTRIBUTE=13]="ATTRIBUTE",b[b.BLOT=14]="BLOT",b[b.INLINE=7]="INLINE",b[b.BLOCK=11]="BLOCK",b[b.BLOCK_BLOT=10]="BLOCK_BLOT",b[b.INLINE_BLOT=6]="INLINE_BLOT",b[b.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",b[b.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",b[b.ANY=15]="ANY"})(h=r.Scope||(r.Scope={}));function f(b,m){var v=p(b);if(v==null)throw new o("Unable to create "+b+" blot");var _=v,y=b instanceof Node||b.nodeType===Node.TEXT_NODE?b:_.create(m);return new _(y,m)}r.create=f;function d(b,m){return m===void 0&&(m=!1),b==null?null:b[r.DATA_KEY]!=null?b[r.DATA_KEY].blot:m?d(b.parentNode,m):null}r.find=d;function p(b,m){m===void 0&&(m=h.ANY);var v;if(typeof b=="string")v=c[b]||a[b];else if(b instanceof Text||b.nodeType===Node.TEXT_NODE)v=c.text;else if(typeof b=="number")b&h.LEVEL&h.BLOCK?v=c.block:b&h.LEVEL&h.INLINE&&(v=c.inline);else if(b instanceof HTMLElement){var _=(b.getAttribute("class")||"").split(/\s+/);for(var y in _)if(v=l[_[y]],v)break;v=v||u[b.tagName]}return v==null?null:m&h.LEVEL&v.scope&&m&h.TYPE&v.scope?v:null}r.query=p;function g(){for(var b=[],m=0;m<arguments.length;m++)b[m]=arguments[m];if(b.length>1)return b.map(function(y){return g(y)});var v=b[0];if(typeof v.blotName!="string"&&typeof v.attrName!="string")throw new o("Invalid definition");if(v.blotName==="abstract")throw new o("Cannot register abstract class");if(c[v.blotName||v.attrName]=v,typeof v.keyName=="string")a[v.keyName]=v;else if(v.className!=null&&(l[v.className]=v),v.tagName!=null){Array.isArray(v.tagName)?v.tagName=v.tagName.map(function(y){return y.toUpperCase()}):v.tagName=v.tagName.toUpperCase();var _=Array.isArray(v.tagName)?v.tagName:[v.tagName];_.forEach(function(y){(u[y]==null||v.className==null)&&(u[y]=v)})}return v}r.register=g},function(n,r,i){var s=i(51),o=i(11),a=i(3),l=i(20),u=String.fromCharCode(0),c=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};c.prototype.insert=function(h,f){var d={};return h.length===0?this:(d.insert=h,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d))},c.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},c.prototype.retain=function(h,f){if(h<=0)return this;var d={retain:h};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d)},c.prototype.push=function(h){var f=this.ops.length,d=this.ops[f-1];if(h=a(!0,{},h),typeof d=="object"){if(typeof h.delete=="number"&&typeof d.delete=="number")return this.ops[f-1]={delete:d.delete+h.delete},this;if(typeof d.delete=="number"&&h.insert!=null&&(f-=1,d=this.ops[f-1],typeof d!="object"))return this.ops.unshift(h),this;if(o(h.attributes,d.attributes)){if(typeof h.insert=="string"&&typeof d.insert=="string")return this.ops[f-1]={insert:d.insert+h.insert},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof d.retain=="number")return this.ops[f-1]={retain:d.retain+h.retain},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this}}return f===this.ops.length?this.ops.push(h):this.ops.splice(f,0,h),this},c.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},c.prototype.filter=function(h){return this.ops.filter(h)},c.prototype.forEach=function(h){this.ops.forEach(h)},c.prototype.map=function(h){return this.ops.map(h)},c.prototype.partition=function(h){var f=[],d=[];return this.forEach(function(p){var g=h(p)?f:d;g.push(p)}),[f,d]},c.prototype.reduce=function(h,f){return this.ops.reduce(h,f)},c.prototype.changeLength=function(){return this.reduce(function(h,f){return f.insert?h+l.length(f):f.delete?h-f.delete:h},0)},c.prototype.length=function(){return this.reduce(function(h,f){return h+l.length(f)},0)},c.prototype.slice=function(h,f){h=h||0,typeof f!="number"&&(f=1/0);for(var d=[],p=l.iterator(this.ops),g=0;g<f&&p.hasNext();){var b;g<h?b=p.next(h-g):(b=p.next(f-g),d.push(b)),g+=l.length(b)}return new c(d)},c.prototype.compose=function(h){var f=l.iterator(this.ops),d=l.iterator(h.ops),p=[],g=d.peek();if(g!=null&&typeof g.retain=="number"&&g.attributes==null){for(var b=g.retain;f.peekType()==="insert"&&f.peekLength()<=b;)b-=f.peekLength(),p.push(f.next());g.retain-b>0&&d.next(g.retain-b)}for(var m=new c(p);f.hasNext()||d.hasNext();)if(d.peekType()==="insert")m.push(d.next());else if(f.peekType()==="delete")m.push(f.next());else{var v=Math.min(f.peekLength(),d.peekLength()),_=f.next(v),y=d.next(v);if(typeof y.retain=="number"){var E={};typeof _.retain=="number"?E.retain=v:E.insert=_.insert;var k=l.attributes.compose(_.attributes,y.attributes,typeof _.retain=="number");if(k&&(E.attributes=k),m.push(E),!d.hasNext()&&o(m.ops[m.ops.length-1],E)){var S=new c(f.rest());return m.concat(S).chop()}}else typeof y.delete=="number"&&typeof _.retain=="number"&&m.push(y)}return m.chop()},c.prototype.concat=function(h){var f=new c(this.ops.slice());return h.ops.length>0&&(f.push(h.ops[0]),f.ops=f.ops.concat(h.ops.slice(1))),f},c.prototype.diff=function(h,f){if(this.ops===h.ops)return new c;var d=[this,h].map(function(v){return v.map(function(_){if(_.insert!=null)return typeof _.insert=="string"?_.insert:u;var y=v===h?"on":"with";throw new Error("diff() called "+y+" non-document")}).join("")}),p=new c,g=s(d[0],d[1],f),b=l.iterator(this.ops),m=l.iterator(h.ops);return g.forEach(function(v){for(var _=v[1].length;_>0;){var y=0;switch(v[0]){case s.INSERT:y=Math.min(m.peekLength(),_),p.push(m.next(y));break;case s.DELETE:y=Math.min(_,b.peekLength()),b.next(y),p.delete(y);break;case s.EQUAL:y=Math.min(b.peekLength(),m.peekLength(),_);var E=b.next(y),k=m.next(y);o(E.insert,k.insert)?p.retain(y,l.attributes.diff(E.attributes,k.attributes)):p.push(k).delete(y);break}_-=y}}),p.chop()},c.prototype.eachLine=function(h,f){f=f||`
`;for(var d=l.iterator(this.ops),p=new c,g=0;d.hasNext();){if(d.peekType()!=="insert")return;var b=d.peek(),m=l.length(b)-d.peekLength(),v=typeof b.insert=="string"?b.insert.indexOf(f,m)-m:-1;if(v<0)p.push(d.next());else if(v>0)p.push(d.next(v));else{if(h(p,d.next(1).attributes||{},g)===!1)return;g+=1,p=new c}}p.length()>0&&h(p,{},g)},c.prototype.transform=function(h,f){if(f=!!f,typeof h=="number")return this.transformPosition(h,f);for(var d=l.iterator(this.ops),p=l.iterator(h.ops),g=new c;d.hasNext()||p.hasNext();)if(d.peekType()==="insert"&&(f||p.peekType()!=="insert"))g.retain(l.length(d.next()));else if(p.peekType()==="insert")g.push(p.next());else{var b=Math.min(d.peekLength(),p.peekLength()),m=d.next(b),v=p.next(b);if(m.delete)continue;v.delete?g.push(v):g.retain(b,l.attributes.transform(m.attributes,v.attributes,f))}return g.chop()},c.prototype.transformPosition=function(h,f){f=!!f;for(var d=l.iterator(this.ops),p=0;d.hasNext()&&p<=h;){var g=d.peekLength(),b=d.peekType();if(d.next(),b==="delete"){h-=Math.min(g,h-p);continue}else b==="insert"&&(p<h||!f)&&(h+=g);p+=g}return h},n.exports=c},function(n,r){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(d){return typeof Array.isArray=="function"?Array.isArray(d):s.call(d)==="[object Array]"},u=function(d){if(!d||s.call(d)!=="[object Object]")return!1;var p=i.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&i.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!g)return!1;var b;for(b in d);return typeof b>"u"||i.call(d,b)},c=function(d,p){o&&p.name==="__proto__"?o(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},h=function(d,p){if(p==="__proto__")if(i.call(d,p)){if(a)return a(d,p).value}else return;return d[p]};n.exports=function f(){var d,p,g,b,m,v,_=arguments[0],y=1,E=arguments.length,k=!1;for(typeof _=="boolean"&&(k=_,_=arguments[1]||{},y=2),(_==null||typeof _!="object"&&typeof _!="function")&&(_={});y<E;++y)if(d=arguments[y],d!=null)for(p in d)g=h(_,p),b=h(d,p),_!==b&&(k&&b&&(u(b)||(m=l(b)))?(m?(m=!1,v=g&&l(g)?g:[]):v=g&&u(g)?g:{},c(_,{name:p,newValue:f(k,v,b)})):typeof b<"u"&&c(_,{name:p,newValue:b}));return _}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var s=function(){function T(A,C){for(var D=0;D<C.length;D++){var q=C[D];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(A,q.key,q)}}return function(A,C,D){return C&&T(A.prototype,C),D&&T(A,D),A}}(),o=function T(A,C,D){A===null&&(A=Function.prototype);var q=Object.getOwnPropertyDescriptor(A,C);if(q===void 0){var Q=Object.getPrototypeOf(A);return Q===null?void 0:T(Q,C,D)}else{if("value"in q)return q.value;var Y=q.get;return Y===void 0?void 0:Y.call(D)}},a=i(3),l=_(a),u=i(2),c=_(u),h=i(0),f=_(h),d=i(16),p=_(d),g=i(6),b=_(g),m=i(7),v=_(m);function _(T){return T&&T.__esModule?T:{default:T}}function y(T,A){if(!(T instanceof A))throw new TypeError("Cannot call a class as a function")}function E(T,A){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:T}function k(T,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);T.prototype=Object.create(A&&A.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(T,A):T.__proto__=A)}var S=1,I=function(T){k(A,T);function A(){return y(this,A),E(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"attach",value:function(){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new c.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(D,q){var Q=f.default.query(D,f.default.Scope.BLOCK_ATTRIBUTE);Q!=null&&this.attributes.attribute(Q,q)}},{key:"formatAt",value:function(D,q,Q,Y){this.format(Q,Y)}},{key:"insertAt",value:function(D,q,Q){if(typeof q=="string"&&q.endsWith(`
`)){var Y=f.default.create(R.blotName);this.parent.insertBefore(Y,D===0?this:this.next),Y.insertAt(0,q.slice(0,-1))}else o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,D,q,Q)}}]),A}(f.default.Embed);I.scope=f.default.Scope.BLOCK_BLOT;var R=function(T){k(A,T);function A(C){y(this,A);var D=E(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C));return D.cache={},D}return s(A,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(D,q){return q.length()===0?D:D.insert(q.value(),O(q))},new c.default).insert(`
`,O(this))),this.cache.delta}},{key:"deleteAt",value:function(D,q){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,D,q),this.cache={}}},{key:"formatAt",value:function(D,q,Q,Y){q<=0||(f.default.query(Q,f.default.Scope.BLOCK)?D+q===this.length()&&this.format(Q,Y):o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,D,Math.min(q,this.length()-D-1),Q,Y),this.cache={})}},{key:"insertAt",value:function(D,q,Q){if(Q!=null)return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,D,q,Q);if(q.length!==0){var Y=q.split(`
`),ie=Y.shift();ie.length>0&&(D<this.length()-1||this.children.tail==null?o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(D,this.length()-1),ie):this.children.tail.insertAt(this.children.tail.length(),ie),this.cache={});var X=this;Y.reduce(function(F,N){return X=X.split(F,!0),X.insertAt(0,N),N.length},D+ie.length)}}},{key:"insertBefore",value:function(D,q){var Q=this.children.head;o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,D,q),Q instanceof p.default&&Q.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+S),this.cache.length}},{key:"moveChildren",value:function(D,q){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,D,q),this.cache={}}},{key:"optimize",value:function(D){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,D),this.cache={}}},{key:"path",value:function(D){return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,D,!0)}},{key:"removeChild",value:function(D){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,D),this.cache={}}},{key:"split",value:function(D){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(q&&(D===0||D>=this.length()-S)){var Q=this.clone();return D===0?(this.parent.insertBefore(Q,this),this):(this.parent.insertBefore(Q,this.next),Q)}else{var Y=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,D,q);return this.cache={},Y}}}]),A}(f.default.Block);R.blotName="block",R.tagName="P",R.defaultChild="break",R.allowedChildren=[b.default,f.default.Embed,v.default];function O(T){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return T==null||(typeof T.formats=="function"&&(A=(0,l.default)(A,T.formats())),T.parent==null||T.parent.blotName=="scroll"||T.parent.statics.scope!==T.statics.scope)?A:O(T.parent,A)}r.bubbleFormats=O,r.BlockEmbed=I,r.default=R},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},o=function(){function X(F,N){var j=[],U=!0,J=!1,K=void 0;try{for(var L=F[Symbol.iterator](),x;!(U=(x=L.next()).done)&&(j.push(x.value),!(N&&j.length===N));U=!0);}catch(V){J=!0,K=V}finally{try{!U&&L.return&&L.return()}finally{if(J)throw K}}return j}return function(F,N){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return X(F,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function X(F,N){for(var j=0;j<N.length;j++){var U=N[j];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(F,U.key,U)}}return function(F,N,j){return N&&X(F.prototype,N),j&&X(F,j),F}}();i(50);var l=i(2),u=O(l),c=i(14),h=O(c),f=i(8),d=O(f),p=i(9),g=O(p),b=i(0),m=O(b),v=i(15),_=O(v),y=i(3),E=O(y),k=i(10),S=O(k),I=i(34),R=O(I);function O(X){return X&&X.__esModule?X:{default:X}}function T(X,F,N){return F in X?Object.defineProperty(X,F,{value:N,enumerable:!0,configurable:!0,writable:!0}):X[F]=N,X}function A(X,F){if(!(X instanceof F))throw new TypeError("Cannot call a class as a function")}var C=(0,S.default)("quill"),D=function(){a(X,null,[{key:"debug",value:function(N){N===!0&&(N="log"),S.default.level(N)}},{key:"find",value:function(N){return N.__quill||m.default.find(N)}},{key:"import",value:function(N){return this.imports[N]==null&&C.error("Cannot import "+N+". Are you sure it was registered?"),this.imports[N]}},{key:"register",value:function(N,j){var U=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof N!="string"){var K=N.attrName||N.blotName;typeof K=="string"?this.register("formats/"+K,N,j):Object.keys(N).forEach(function(L){U.register(L,N[L],j)})}else this.imports[N]!=null&&!J&&C.warn("Overwriting "+N+" with",j),this.imports[N]=j,(N.startsWith("blots/")||N.startsWith("formats/"))&&j.blotName!=="abstract"?m.default.register(j):N.startsWith("modules")&&typeof j.register=="function"&&j.register()}}]);function X(F){var N=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(A(this,X),this.options=q(F,j),this.container=this.options.container,this.container==null)return C.error("Invalid Quill container",F);this.options.debug&&X.debug(this.options.debug);var U=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new d.default,this.scroll=m.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new _.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(d.default.events.EDITOR_CHANGE,function(K){K===d.default.events.TEXT_CHANGE&&N.root.classList.toggle("ql-blank",N.editor.isBlank())}),this.emitter.on(d.default.events.SCROLL_UPDATE,function(K,L){var x=N.selection.lastRange,V=x&&x.length===0?x.index:void 0;Q.call(N,function(){return N.editor.update(null,L,V)},K)});var J=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+U+"<p><br></p></div>");this.setContents(J),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(X,[{key:"addContainer",value:function(N){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof N=="string"){var U=N;N=document.createElement("div"),N.classList.add(U)}return this.container.insertBefore(N,j),N}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(N,j,U){var J=this,K=Y(N,j,U),L=o(K,4);return N=L[0],j=L[1],U=L[3],Q.call(this,function(){return J.editor.deleteText(N,j)},U,N,-1*j)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(N),this.container.classList.toggle("ql-disabled",!N)}},{key:"focus",value:function(){var N=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=N,this.scrollIntoView()}},{key:"format",value:function(N,j){var U=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;return Q.call(this,function(){var K=U.getSelection(!0),L=new u.default;if(K==null)return L;if(m.default.query(N,m.default.Scope.BLOCK))L=U.editor.formatLine(K.index,K.length,T({},N,j));else{if(K.length===0)return U.selection.format(N,j),L;L=U.editor.formatText(K.index,K.length,T({},N,j))}return U.setSelection(K,d.default.sources.SILENT),L},J)}},{key:"formatLine",value:function(N,j,U,J,K){var L=this,x=void 0,V=Y(N,j,U,J,K),$=o(V,4);return N=$[0],j=$[1],x=$[2],K=$[3],Q.call(this,function(){return L.editor.formatLine(N,j,x)},K,N,0)}},{key:"formatText",value:function(N,j,U,J,K){var L=this,x=void 0,V=Y(N,j,U,J,K),$=o(V,4);return N=$[0],j=$[1],x=$[2],K=$[3],Q.call(this,function(){return L.editor.formatText(N,j,x)},K,N,0)}},{key:"getBounds",value:function(N){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=void 0;typeof N=="number"?U=this.selection.getBounds(N,j):U=this.selection.getBounds(N.index,N.length);var J=this.container.getBoundingClientRect();return{bottom:U.bottom-J.top,height:U.height,left:U.left-J.left,right:U.right-J.left,top:U.top-J.top,width:U.width}}},{key:"getContents",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-N,U=Y(N,j),J=o(U,2);return N=J[0],j=J[1],this.editor.getContents(N,j)}},{key:"getFormat",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof N=="number"?this.editor.getFormat(N,j):this.editor.getFormat(N.index,N.length)}},{key:"getIndex",value:function(N){return N.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(N){return this.scroll.leaf(N)}},{key:"getLine",value:function(N){return this.scroll.line(N)}},{key:"getLines",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof N!="number"?this.scroll.lines(N.index,N.length):this.scroll.lines(N,j)}},{key:"getModule",value:function(N){return this.theme.modules[N]}},{key:"getSelection",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return N&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-N,U=Y(N,j),J=o(U,2);return N=J[0],j=J[1],this.editor.getText(N,j)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(N,j,U){var J=this,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:X.sources.API;return Q.call(this,function(){return J.editor.insertEmbed(N,j,U)},K,N)}},{key:"insertText",value:function(N,j,U,J,K){var L=this,x=void 0,V=Y(N,0,U,J,K),$=o(V,4);return N=$[0],x=$[2],K=$[3],Q.call(this,function(){return L.editor.insertText(N,j,x)},K,N,j.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(N,j,U){this.clipboard.dangerouslyPasteHTML(N,j,U)}},{key:"removeFormat",value:function(N,j,U){var J=this,K=Y(N,j,U),L=o(K,4);return N=L[0],j=L[1],U=L[3],Q.call(this,function(){return J.editor.removeFormat(N,j)},U,N)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(N){var j=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return Q.call(this,function(){N=new u.default(N);var J=j.getLength(),K=j.editor.deleteText(0,J),L=j.editor.applyDelta(N),x=L.ops[L.ops.length-1];x!=null&&typeof x.insert=="string"&&x.insert[x.insert.length-1]===`
`&&(j.editor.deleteText(j.getLength()-1,1),L.delete(1));var V=K.compose(L);return V},U)}},{key:"setSelection",value:function(N,j,U){if(N==null)this.selection.setRange(null,j||X.sources.API);else{var J=Y(N,j,U),K=o(J,4);N=K[0],j=K[1],U=K[3],this.selection.setRange(new v.Range(N,j),U),U!==d.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(N){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API,U=new u.default().insert(N);return this.setContents(U,j)}},{key:"update",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.default.sources.USER,j=this.scroll.update(N);return this.selection.update(N),j}},{key:"updateContents",value:function(N){var j=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return Q.call(this,function(){return N=new u.default(N),j.editor.applyDelta(N,U)},U,!0)}}]),X}();D.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},D.events=d.default.events,D.sources=d.default.sources,D.version="1.3.7",D.imports={delta:u.default,parchment:m.default,"core/module":g.default,"core/theme":R.default};function q(X,F){if(F=(0,E.default)(!0,{container:X,modules:{clipboard:!0,keyboard:!0,history:!0}},F),!F.theme||F.theme===D.DEFAULTS.theme)F.theme=R.default;else if(F.theme=D.import("themes/"+F.theme),F.theme==null)throw new Error("Invalid theme "+F.theme+". Did you register it?");var N=(0,E.default)(!0,{},F.theme.DEFAULTS);[N,F].forEach(function(J){J.modules=J.modules||{},Object.keys(J.modules).forEach(function(K){J.modules[K]===!0&&(J.modules[K]={})})});var j=Object.keys(N.modules).concat(Object.keys(F.modules)),U=j.reduce(function(J,K){var L=D.import("modules/"+K);return L==null?C.error("Cannot load "+K+" module. Are you sure you registered it?"):J[K]=L.DEFAULTS||{},J},{});return F.modules!=null&&F.modules.toolbar&&F.modules.toolbar.constructor!==Object&&(F.modules.toolbar={container:F.modules.toolbar}),F=(0,E.default)(!0,{},D.DEFAULTS,{modules:U},N,F),["bounds","container","scrollingContainer"].forEach(function(J){typeof F[J]=="string"&&(F[J]=document.querySelector(F[J]))}),F.modules=Object.keys(F.modules).reduce(function(J,K){return F.modules[K]&&(J[K]=F.modules[K]),J},{}),F}function Q(X,F,N,j){if(this.options.strict&&!this.isEnabled()&&F===d.default.sources.USER)return new u.default;var U=N==null?null:this.getSelection(),J=this.editor.delta,K=X();if(U!=null&&(N===!0&&(N=U.index),j==null?U=ie(U,K,F):j!==0&&(U=ie(U,N,j,F)),this.setSelection(U,d.default.sources.SILENT)),K.length()>0){var L,x=[d.default.events.TEXT_CHANGE,K,J,F];if((L=this.emitter).emit.apply(L,[d.default.events.EDITOR_CHANGE].concat(x)),F!==d.default.sources.SILENT){var V;(V=this.emitter).emit.apply(V,x)}}return K}function Y(X,F,N,j,U){var J={};return typeof X.index=="number"&&typeof X.length=="number"?typeof F!="number"?(U=j,j=N,N=F,F=X.length,X=X.index):(F=X.length,X=X.index):typeof F!="number"&&(U=j,j=N,N=F,F=0),(typeof N>"u"?"undefined":s(N))==="object"?(J=N,U=j):typeof N=="string"&&(j!=null?J[N]=j:U=N),U=U||d.default.sources.API,[X,F,J,U]}function ie(X,F,N,j){if(X==null)return null;var U=void 0,J=void 0;if(F instanceof u.default){var K=[X.index,X.index+X.length].map(function($){return F.transformPosition($,j!==d.default.sources.USER)}),L=o(K,2);U=L[0],J=L[1]}else{var x=[X.index,X.index+X.length].map(function($){return $<F||$===F&&j===d.default.sources.USER?$:N>=0?$+N:Math.max(F,$+N)}),V=o(x,2);U=V[0],J=V[1]}return new v.Range(U,J-U)}r.expandConfig=q,r.overload=Y,r.default=D},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function b(m,v){for(var _=0;_<v.length;_++){var y=v[_];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,v,_){return v&&b(m.prototype,v),_&&b(m,_),m}}(),o=function b(m,v,_){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,v);if(y===void 0){var E=Object.getPrototypeOf(m);return E===null?void 0:b(E,v,_)}else{if("value"in y)return y.value;var k=y.get;return k===void 0?void 0:k.call(_)}},a=i(7),l=h(a),u=i(0),c=h(u);function h(b){return b&&b.__esModule?b:{default:b}}function f(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}function d(b,m){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:b}function p(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(b,m):b.__proto__=m)}var g=function(b){p(m,b);function m(){return f(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"formatAt",value:function(_,y,E,k){if(m.compare(this.statics.blotName,E)<0&&c.default.query(E,c.default.Scope.BLOT)){var S=this.isolate(_,y);k&&S.wrap(E,k)}else o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"formatAt",this).call(this,_,y,E,k)}},{key:"optimize",value:function(_){if(o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,_),this.parent instanceof m&&m.compare(this.statics.blotName,this.parent.statics.blotName)>0){var y=this.parent.isolate(this.offset(),this.length());this.moveChildren(y),y.wrap(this)}}}],[{key:"compare",value:function(_,y){var E=m.order.indexOf(_),k=m.order.indexOf(y);return E>=0||k>=0?E-k:_===y?0:_<y?-1:1}}]),m}(c.default.Inline);g.allowedChildren=[g,c.default.Embed,l.default],g.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default.Text);r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function v(_,y){for(var E=0;E<y.length;E++){var k=y[E];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(_,k.key,k)}}return function(_,y,E){return y&&v(_.prototype,y),E&&v(_,E),_}}(),o=function v(_,y,E){_===null&&(_=Function.prototype);var k=Object.getOwnPropertyDescriptor(_,y);if(k===void 0){var S=Object.getPrototypeOf(_);return S===null?void 0:v(S,y,E)}else{if("value"in k)return k.value;var I=k.get;return I===void 0?void 0:I.call(E)}},a=i(54),l=h(a),u=i(10),c=h(u);function h(v){return v&&v.__esModule?v:{default:v}}function f(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")}function d(v,_){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:v}function p(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);v.prototype=Object.create(_&&_.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(v,_):v.__proto__=_)}var g=(0,c.default)("quill:events"),b=["selectionchange","mousedown","mouseup","click"];b.forEach(function(v){document.addEventListener(v,function(){for(var _=arguments.length,y=Array(_),E=0;E<_;E++)y[E]=arguments[E];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(k){if(k.__quill&&k.__quill.emitter){var S;(S=k.__quill.emitter).handleDOM.apply(S,y)}})})});var m=function(v){p(_,v);function _(){f(this,_);var y=d(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));return y.listeners={},y.on("error",g.error),y}return s(_,[{key:"emit",value:function(){g.log.apply(g,arguments),o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(E){for(var k=arguments.length,S=Array(k>1?k-1:0),I=1;I<k;I++)S[I-1]=arguments[I];(this.listeners[E.type]||[]).forEach(function(R){var O=R.node,T=R.handler;(E.target===O||O.contains(E.target))&&T.apply(void 0,[E].concat(S))})}},{key:"listenDOM",value:function(E,k,S){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push({node:k,handler:S})}}]),_}(l.default);m.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},m.sources={API:"api",SILENT:"silent",USER:"user"},r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function s(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function a(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,a),this.quill=l,this.options=u};o.DEFAULTS={},r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=["error","warn","log","info"],o="warn";function a(u){if(s.indexOf(u)<=s.indexOf(o)){for(var c,h=arguments.length,f=Array(h>1?h-1:0),d=1;d<h;d++)f[d-1]=arguments[d];(c=console)[u].apply(c,f)}}function l(u){return s.reduce(function(c,h){return c[h]=a.bind(console,h,u),c},{})}a.level=l.level=function(u){o=u},r.default=l},function(n,r,i){var s=Array.prototype.slice,o=i(52),a=i(53),l=n.exports=function(f,d,p){return p||(p={}),f===d?!0:f instanceof Date&&d instanceof Date?f.getTime()===d.getTime():!f||!d||typeof f!="object"&&typeof d!="object"?p.strict?f===d:f==d:h(f,d,p)};function u(f){return f==null}function c(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function h(f,d,p){var g,b;if(u(f)||u(d)||f.prototype!==d.prototype)return!1;if(a(f))return a(d)?(f=s.call(f),d=s.call(d),l(f,d,p)):!1;if(c(f)){if(!c(d)||f.length!==d.length)return!1;for(g=0;g<f.length;g++)if(f[g]!==d[g])return!1;return!0}try{var m=o(f),v=o(d)}catch{return!1}if(m.length!=v.length)return!1;for(m.sort(),v.sort(),g=m.length-1;g>=0;g--)if(m[g]!=v[g])return!1;for(g=m.length-1;g>=0;g--)if(b=m[g],!l(f[b],d[b],p))return!1;return typeof f==typeof d}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=function(){function a(l,u,c){c===void 0&&(c={}),this.attrName=l,this.keyName=u;var h=s.Scope.TYPE&s.Scope.ATTRIBUTE;c.scope!=null?this.scope=c.scope&s.Scope.LEVEL|h:this.scope=s.Scope.ATTRIBUTE,c.whitelist!=null&&(this.whitelist=c.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(u){return u.name})},a.prototype.add=function(l,u){return this.canAdd(l,u)?(l.setAttribute(this.keyName,u),!0):!1},a.prototype.canAdd=function(l,u){var c=s.query(l,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return c==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var u=l.getAttribute(this.keyName);return this.canAdd(l,u)&&u?u:""},a}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var s=function(){function I(R,O){var T=[],A=!0,C=!1,D=void 0;try{for(var q=R[Symbol.iterator](),Q;!(A=(Q=q.next()).done)&&(T.push(Q.value),!(O&&T.length===O));A=!0);}catch(Y){C=!0,D=Y}finally{try{!A&&q.return&&q.return()}finally{if(C)throw D}}return T}return function(R,O){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return I(R,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function I(R,O){for(var T=0;T<O.length;T++){var A=O[T];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,A.key,A)}}return function(R,O,T){return O&&I(R.prototype,O),T&&I(R,T),R}}(),a=function I(R,O,T){R===null&&(R=Function.prototype);var A=Object.getOwnPropertyDescriptor(R,O);if(A===void 0){var C=Object.getPrototypeOf(R);return C===null?void 0:I(C,O,T)}else{if("value"in A)return A.value;var D=A.get;return D===void 0?void 0:D.call(T)}},l=i(2),u=v(l),c=i(0),h=v(c),f=i(4),d=v(f),p=i(6),g=v(p),b=i(7),m=v(b);function v(I){return I&&I.__esModule?I:{default:I}}function _(I,R){if(!(I instanceof R))throw new TypeError("Cannot call a class as a function")}function y(I,R){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:I}function E(I,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);I.prototype=Object.create(R&&R.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(I,R):I.__proto__=R)}var k=function(I){E(R,I);function R(){return _(this,R),y(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return R}(g.default);k.blotName="code",k.tagName="CODE";var S=function(I){E(R,I);function R(){return _(this,R),y(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return o(R,[{key:"delta",value:function(){var T=this,A=this.domNode.textContent;return A.endsWith(`
`)&&(A=A.slice(0,-1)),A.split(`
`).reduce(function(C,D){return C.insert(D).insert(`
`,T.formats())},new u.default)}},{key:"format",value:function(T,A){if(!(T===this.statics.blotName&&A)){var C=this.descendant(m.default,this.length()-1),D=s(C,1),q=D[0];q!=null&&q.deleteAt(q.length()-1,1),a(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"format",this).call(this,T,A)}}},{key:"formatAt",value:function(T,A,C,D){if(A!==0&&!(h.default.query(C,h.default.Scope.BLOCK)==null||C===this.statics.blotName&&D===this.statics.formats(this.domNode))){var q=this.newlineIndex(T);if(!(q<0||q>=T+A)){var Q=this.newlineIndex(T,!0)+1,Y=q-Q+1,ie=this.isolate(Q,Y),X=ie.next;ie.format(C,D),X instanceof R&&X.formatAt(0,T-Q+A-Y,C,D)}}}},{key:"insertAt",value:function(T,A,C){if(C==null){var D=this.descendant(m.default,T),q=s(D,2),Q=q[0],Y=q[1];Q.insertAt(Y,A)}}},{key:"length",value:function(){var T=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?T:T+1}},{key:"newlineIndex",value:function(T){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(A)return this.domNode.textContent.slice(0,T).lastIndexOf(`
`);var C=this.domNode.textContent.slice(T).indexOf(`
`);return C>-1?T+C:-1}},{key:"optimize",value:function(T){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),a(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,T);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(T),A.moveChildren(this),A.remove())}},{key:"replace",value:function(T){a(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"replace",this).call(this,T),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var C=h.default.find(A);C==null?A.parentNode.removeChild(A):C instanceof h.default.Embed?C.remove():C.unwrap()})}}],[{key:"create",value:function(T){var A=a(R.__proto__||Object.getPrototypeOf(R),"create",this).call(this,T);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),R}(d.default);S.blotName="code-block",S.tagName="PRE",S.TAB="  ",r.Code=k,r.default=S},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},o=function(){function X(F,N){var j=[],U=!0,J=!1,K=void 0;try{for(var L=F[Symbol.iterator](),x;!(U=(x=L.next()).done)&&(j.push(x.value),!(N&&j.length===N));U=!0);}catch(V){J=!0,K=V}finally{try{!U&&L.return&&L.return()}finally{if(J)throw K}}return j}return function(F,N){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return X(F,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function X(F,N){for(var j=0;j<N.length;j++){var U=N[j];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(F,U.key,U)}}return function(F,N,j){return N&&X(F.prototype,N),j&&X(F,j),F}}(),l=i(2),u=A(l),c=i(20),h=A(c),f=i(0),d=A(f),p=i(13),g=A(p),b=i(24),m=A(b),v=i(4),_=A(v),y=i(16),E=A(y),k=i(21),S=A(k),I=i(11),R=A(I),O=i(3),T=A(O);function A(X){return X&&X.__esModule?X:{default:X}}function C(X,F,N){return F in X?Object.defineProperty(X,F,{value:N,enumerable:!0,configurable:!0,writable:!0}):X[F]=N,X}function D(X,F){if(!(X instanceof F))throw new TypeError("Cannot call a class as a function")}var q=/^[ -~]*$/,Q=function(){function X(F){D(this,X),this.scroll=F,this.delta=this.getDelta()}return a(X,[{key:"applyDelta",value:function(N){var j=this,U=!1;this.scroll.update();var J=this.scroll.length();return this.scroll.batchStart(),N=ie(N),N.reduce(function(K,L){var x=L.retain||L.delete||L.insert.length||1,V=L.attributes||{};if(L.insert!=null){if(typeof L.insert=="string"){var $=L.insert;$.endsWith(`
`)&&U&&(U=!1,$=$.slice(0,-1)),K>=J&&!$.endsWith(`
`)&&(U=!0),j.scroll.insertAt(K,$);var ee=j.scroll.line(K),fe=o(ee,2),M=fe[0],B=fe[1],z=(0,T.default)({},(0,v.bubbleFormats)(M));if(M instanceof _.default){var re=M.descendant(d.default.Leaf,B),se=o(re,1),ae=se[0];z=(0,T.default)(z,(0,v.bubbleFormats)(ae))}V=h.default.attributes.diff(z,V)||{}}else if(s(L.insert)==="object"){var G=Object.keys(L.insert)[0];if(G==null)return K;j.scroll.insertAt(K,G,L.insert[G])}J+=x}return Object.keys(V).forEach(function(W){j.scroll.formatAt(K,x,W,V[W])}),K+x},0),N.reduce(function(K,L){return typeof L.delete=="number"?(j.scroll.deleteAt(K,L.delete),K):K+(L.retain||L.insert.length||1)},0),this.scroll.batchEnd(),this.update(N)}},{key:"deleteText",value:function(N,j){return this.scroll.deleteAt(N,j),this.update(new u.default().retain(N).delete(j))}},{key:"formatLine",value:function(N,j){var U=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(J).forEach(function(K){if(!(U.scroll.whitelist!=null&&!U.scroll.whitelist[K])){var L=U.scroll.lines(N,Math.max(j,1)),x=j;L.forEach(function(V){var $=V.length();if(!(V instanceof g.default))V.format(K,J[K]);else{var ee=N-V.offset(U.scroll),fe=V.newlineIndex(ee+x)-ee+1;V.formatAt(ee,fe,K,J[K])}x-=$})}}),this.scroll.optimize(),this.update(new u.default().retain(N).retain(j,(0,S.default)(J)))}},{key:"formatText",value:function(N,j){var U=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(J).forEach(function(K){U.scroll.formatAt(N,j,K,J[K])}),this.update(new u.default().retain(N).retain(j,(0,S.default)(J)))}},{key:"getContents",value:function(N,j){return this.delta.slice(N,N+j)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(N,j){return N.concat(j.delta())},new u.default)}},{key:"getFormat",value:function(N){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=[],J=[];j===0?this.scroll.path(N).forEach(function(L){var x=o(L,1),V=x[0];V instanceof _.default?U.push(V):V instanceof d.default.Leaf&&J.push(V)}):(U=this.scroll.lines(N,j),J=this.scroll.descendants(d.default.Leaf,N,j));var K=[U,J].map(function(L){if(L.length===0)return{};for(var x=(0,v.bubbleFormats)(L.shift());Object.keys(x).length>0;){var V=L.shift();if(V==null)return x;x=Y((0,v.bubbleFormats)(V),x)}return x});return T.default.apply(T.default,K)}},{key:"getText",value:function(N,j){return this.getContents(N,j).filter(function(U){return typeof U.insert=="string"}).map(function(U){return U.insert}).join("")}},{key:"insertEmbed",value:function(N,j,U){return this.scroll.insertAt(N,j,U),this.update(new u.default().retain(N).insert(C({},j,U)))}},{key:"insertText",value:function(N,j){var U=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return j=j.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(N,j),Object.keys(J).forEach(function(K){U.scroll.formatAt(N,j.length,K,J[K])}),this.update(new u.default().retain(N).insert(j,(0,S.default)(J)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var N=this.scroll.children.head;return N.statics.blotName!==_.default.blotName||N.children.length>1?!1:N.children.head instanceof E.default}},{key:"removeFormat",value:function(N,j){var U=this.getText(N,j),J=this.scroll.line(N+j),K=o(J,2),L=K[0],x=K[1],V=0,$=new u.default;L!=null&&(L instanceof g.default?V=L.newlineIndex(x)-x+1:V=L.length()-x,$=L.delta().slice(x,x+V-1).insert(`
`));var ee=this.getContents(N,j+V),fe=ee.diff(new u.default().insert(U).concat($)),M=new u.default().retain(N).concat(fe);return this.applyDelta(M)}},{key:"update",value:function(N){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,J=this.delta;if(j.length===1&&j[0].type==="characterData"&&j[0].target.data.match(q)&&d.default.find(j[0].target)){var K=d.default.find(j[0].target),L=(0,v.bubbleFormats)(K),x=K.offset(this.scroll),V=j[0].oldValue.replace(m.default.CONTENTS,""),$=new u.default().insert(V),ee=new u.default().insert(K.value()),fe=new u.default().retain(x).concat($.diff(ee,U));N=fe.reduce(function(M,B){return B.insert?M.insert(B.insert,L):M.push(B)},new u.default),this.delta=J.compose(N)}else this.delta=this.getDelta(),(!N||!(0,R.default)(J.compose(N),this.delta))&&(N=J.diff(this.delta,U));return N}}]),X}();function Y(X,F){return Object.keys(F).reduce(function(N,j){return X[j]==null||(F[j]===X[j]?N[j]=F[j]:Array.isArray(F[j])?F[j].indexOf(X[j])<0&&(N[j]=F[j].concat([X[j]])):N[j]=[F[j],X[j]]),N},{})}function ie(X){return X.reduce(function(F,N){if(N.insert===1){var j=(0,S.default)(N.attributes);return delete j.image,F.insert({image:N.attributes.image},j)}if(N.attributes!=null&&(N.attributes.list===!0||N.attributes.bullet===!0)&&(N=(0,S.default)(N),N.attributes.list?N.attributes.list="ordered":(N.attributes.list="bullet",delete N.attributes.bullet)),typeof N.insert=="string"){var U=N.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return F.insert(U,N.attributes)}return F.push(N)},new u.default)}r.default=Q},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var s=function(){function I(R,O){var T=[],A=!0,C=!1,D=void 0;try{for(var q=R[Symbol.iterator](),Q;!(A=(Q=q.next()).done)&&(T.push(Q.value),!(O&&T.length===O));A=!0);}catch(Y){C=!0,D=Y}finally{try{!A&&q.return&&q.return()}finally{if(C)throw D}}return T}return function(R,O){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return I(R,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function I(R,O){for(var T=0;T<O.length;T++){var A=O[T];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,A.key,A)}}return function(R,O,T){return O&&I(R.prototype,O),T&&I(R,T),R}}(),a=i(0),l=m(a),u=i(21),c=m(u),h=i(11),f=m(h),d=i(8),p=m(d),g=i(10),b=m(g);function m(I){return I&&I.__esModule?I:{default:I}}function v(I){if(Array.isArray(I)){for(var R=0,O=Array(I.length);R<I.length;R++)O[R]=I[R];return O}else return Array.from(I)}function _(I,R){if(!(I instanceof R))throw new TypeError("Cannot call a class as a function")}var y=(0,b.default)("quill:selection"),E=function I(R){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;_(this,I),this.index=R,this.length=O},k=function(){function I(R,O){var T=this;_(this,I),this.emitter=O,this.scroll=R,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new E(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){T.mouseDown||setTimeout(T.update.bind(T,p.default.sources.USER),1)}),this.emitter.on(p.default.events.EDITOR_CHANGE,function(A,C){A===p.default.events.TEXT_CHANGE&&C.length()>0&&T.update(p.default.sources.SILENT)}),this.emitter.on(p.default.events.SCROLL_BEFORE_UPDATE,function(){if(T.hasFocus()){var A=T.getNativeRange();A!=null&&A.start.node!==T.cursor.textNode&&T.emitter.once(p.default.events.SCROLL_UPDATE,function(){try{T.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch{}})}}),this.emitter.on(p.default.events.SCROLL_OPTIMIZE,function(A,C){if(C.range){var D=C.range,q=D.startNode,Q=D.startOffset,Y=D.endNode,ie=D.endOffset;T.setNativeRange(q,Q,Y,ie)}}),this.update(p.default.sources.SILENT)}return o(I,[{key:"handleComposition",value:function(){var O=this;this.root.addEventListener("compositionstart",function(){O.composing=!0}),this.root.addEventListener("compositionend",function(){if(O.composing=!1,O.cursor.parent){var T=O.cursor.restore();if(!T)return;setTimeout(function(){O.setNativeRange(T.startNode,T.startOffset,T.endNode,T.endOffset)},1)}})}},{key:"handleDragging",value:function(){var O=this;this.emitter.listenDOM("mousedown",document.body,function(){O.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){O.mouseDown=!1,O.update(p.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(O,T){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[O])){this.scroll.update();var A=this.getNativeRange();if(!(A==null||!A.native.collapsed||l.default.query(O,l.default.Scope.BLOCK))){if(A.start.node!==this.cursor.textNode){var C=l.default.find(A.start.node,!1);if(C==null)return;if(C instanceof l.default.Leaf){var D=C.split(A.start.offset);C.parent.insertBefore(this.cursor,D)}else C.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(O,T),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(O){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=this.scroll.length();O=Math.min(O,A-1),T=Math.min(O+T,A-1)-O;var C=void 0,D=this.scroll.leaf(O),q=s(D,2),Q=q[0],Y=q[1];if(Q==null)return null;var ie=Q.position(Y,!0),X=s(ie,2);C=X[0],Y=X[1];var F=document.createRange();if(T>0){F.setStart(C,Y);var N=this.scroll.leaf(O+T),j=s(N,2);if(Q=j[0],Y=j[1],Q==null)return null;var U=Q.position(Y,!0),J=s(U,2);return C=J[0],Y=J[1],F.setEnd(C,Y),F.getBoundingClientRect()}else{var K="left",L=void 0;return C instanceof Text?(Y<C.data.length?(F.setStart(C,Y),F.setEnd(C,Y+1)):(F.setStart(C,Y-1),F.setEnd(C,Y),K="right"),L=F.getBoundingClientRect()):(L=Q.domNode.getBoundingClientRect(),Y>0&&(K="right")),{bottom:L.top+L.height,height:L.height,left:L[K],right:L[K],top:L.top,width:0}}}},{key:"getNativeRange",value:function(){var O=document.getSelection();if(O==null||O.rangeCount<=0)return null;var T=O.getRangeAt(0);if(T==null)return null;var A=this.normalizeNative(T);return y.info("getNativeRange",A),A}},{key:"getRange",value:function(){var O=this.getNativeRange();if(O==null)return[null,null];var T=this.normalizedToRange(O);return[T,O]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(O){var T=this,A=[[O.start.node,O.start.offset]];O.native.collapsed||A.push([O.end.node,O.end.offset]);var C=A.map(function(Q){var Y=s(Q,2),ie=Y[0],X=Y[1],F=l.default.find(ie,!0),N=F.offset(T.scroll);return X===0?N:F instanceof l.default.Container?N+F.length():N+F.index(ie,X)}),D=Math.min(Math.max.apply(Math,v(C)),this.scroll.length()-1),q=Math.min.apply(Math,[D].concat(v(C)));return new E(q,D-q)}},{key:"normalizeNative",value:function(O){if(!S(this.root,O.startContainer)||!O.collapsed&&!S(this.root,O.endContainer))return null;var T={start:{node:O.startContainer,offset:O.startOffset},end:{node:O.endContainer,offset:O.endOffset},native:O};return[T.start,T.end].forEach(function(A){for(var C=A.node,D=A.offset;!(C instanceof Text)&&C.childNodes.length>0;)if(C.childNodes.length>D)C=C.childNodes[D],D=0;else if(C.childNodes.length===D)C=C.lastChild,D=C instanceof Text?C.data.length:C.childNodes.length+1;else break;A.node=C,A.offset=D}),T}},{key:"rangeToNative",value:function(O){var T=this,A=O.collapsed?[O.index]:[O.index,O.index+O.length],C=[],D=this.scroll.length();return A.forEach(function(q,Q){q=Math.min(D-1,q);var Y=void 0,ie=T.scroll.leaf(q),X=s(ie,2),F=X[0],N=X[1],j=F.position(N,Q!==0),U=s(j,2);Y=U[0],N=U[1],C.push(Y,N)}),C.length<2&&(C=C.concat(C)),C}},{key:"scrollIntoView",value:function(O){var T=this.lastRange;if(T!=null){var A=this.getBounds(T.index,T.length);if(A!=null){var C=this.scroll.length()-1,D=this.scroll.line(Math.min(T.index,C)),q=s(D,1),Q=q[0],Y=Q;if(T.length>0){var ie=this.scroll.line(Math.min(T.index+T.length,C)),X=s(ie,1);Y=X[0]}if(!(Q==null||Y==null)){var F=O.getBoundingClientRect();A.top<F.top?O.scrollTop-=F.top-A.top:A.bottom>F.bottom&&(O.scrollTop+=A.bottom-F.bottom)}}}}},{key:"setNativeRange",value:function(O,T){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O,C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T,D=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(y.info("setNativeRange",O,T,A,C),!(O!=null&&(this.root.parentNode==null||O.parentNode==null||A.parentNode==null))){var q=document.getSelection();if(q!=null)if(O!=null){this.hasFocus()||this.root.focus();var Q=(this.getNativeRange()||{}).native;if(Q==null||D||O!==Q.startContainer||T!==Q.startOffset||A!==Q.endContainer||C!==Q.endOffset){O.tagName=="BR"&&(T=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode),A.tagName=="BR"&&(C=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var Y=document.createRange();Y.setStart(O,T),Y.setEnd(A,C),q.removeAllRanges(),q.addRange(Y)}}else q.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(O){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;if(typeof T=="string"&&(A=T,T=!1),y.info("setRange",O),O!=null){var C=this.rangeToNative(O);this.setNativeRange.apply(this,v(C).concat([T]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,T=this.lastRange,A=this.getRange(),C=s(A,2),D=C[0],q=C[1];if(this.lastRange=D,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(T,this.lastRange)){var Q;!this.composing&&q!=null&&q.native.collapsed&&q.start.node!==this.cursor.textNode&&this.cursor.restore();var Y=[p.default.events.SELECTION_CHANGE,(0,c.default)(this.lastRange),(0,c.default)(T),O];if((Q=this.emitter).emit.apply(Q,[p.default.events.EDITOR_CHANGE].concat(Y)),O!==p.default.sources.SILENT){var ie;(ie=this.emitter).emit.apply(ie,Y)}}}}]),I}();function S(I,R){try{R.parentNode}catch{return!1}return R instanceof Text&&(R=R.parentNode),I.contains(R)}r.Range=E,r.default=k},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function p(g,b){for(var m=0;m<b.length;m++){var v=b[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,b,m){return b&&p(g.prototype,b),m&&p(g,m),g}}(),o=function p(g,b,m){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,b);if(v===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:p(_,b,m)}else{if("value"in v)return v.value;var y=v.get;return y===void 0?void 0:y.call(m)}},a=i(0),l=u(a);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function f(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var d=function(p){f(g,p);function g(){return c(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"insertInto",value:function(m,v){m.children.length===0?o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertInto",this).call(this,m,v):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),g}(l.default.Embed);d.blotName="break",d.tagName="BR",r.default=d},function(n,r,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){h(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(44),a=i(30),l=i(1),u=function(h){s(f,h);function f(d){var p=h.call(this,d)||this;return p.build(),p}return f.prototype.appendChild=function(d){this.insertBefore(d)},f.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(d){d.attach()})},f.prototype.build=function(){var d=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(p){try{var g=c(p);d.insertBefore(g,d.children.head||void 0)}catch(b){if(b instanceof l.ParchmentError)return;throw b}})},f.prototype.deleteAt=function(d,p){if(d===0&&p===this.length())return this.remove();this.children.forEachAt(d,p,function(g,b,m){g.deleteAt(b,m)})},f.prototype.descendant=function(d,p){var g=this.children.find(p),b=g[0],m=g[1];return d.blotName==null&&d(b)||d.blotName!=null&&b instanceof d?[b,m]:b instanceof f?b.descendant(d,m):[null,-1]},f.prototype.descendants=function(d,p,g){p===void 0&&(p=0),g===void 0&&(g=Number.MAX_VALUE);var b=[],m=g;return this.children.forEachAt(p,g,function(v,_,y){(d.blotName==null&&d(v)||d.blotName!=null&&v instanceof d)&&b.push(v),v instanceof f&&(b=b.concat(v.descendants(d,_,m))),m-=y}),b},f.prototype.detach=function(){this.children.forEach(function(d){d.detach()}),h.prototype.detach.call(this)},f.prototype.formatAt=function(d,p,g,b){this.children.forEachAt(d,p,function(m,v,_){m.formatAt(v,_,g,b)})},f.prototype.insertAt=function(d,p,g){var b=this.children.find(d),m=b[0],v=b[1];if(m)m.insertAt(v,p,g);else{var _=g==null?l.create("text",p):l.create(p,g);this.appendChild(_)}},f.prototype.insertBefore=function(d,p){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(g){return d instanceof g}))throw new l.ParchmentError("Cannot insert "+d.statics.blotName+" into "+this.statics.blotName);d.insertInto(this,p)},f.prototype.length=function(){return this.children.reduce(function(d,p){return d+p.length()},0)},f.prototype.moveChildren=function(d,p){this.children.forEach(function(g){d.insertBefore(g,p)})},f.prototype.optimize=function(d){if(h.prototype.optimize.call(this,d),this.children.length===0)if(this.statics.defaultChild!=null){var p=l.create(this.statics.defaultChild);this.appendChild(p),p.optimize(d)}else this.remove()},f.prototype.path=function(d,p){p===void 0&&(p=!1);var g=this.children.find(d,p),b=g[0],m=g[1],v=[[this,d]];return b instanceof f?v.concat(b.path(m,p)):(b!=null&&v.push([b,m]),v)},f.prototype.removeChild=function(d){this.children.remove(d)},f.prototype.replace=function(d){d instanceof f&&d.moveChildren(this),h.prototype.replace.call(this,d)},f.prototype.split=function(d,p){if(p===void 0&&(p=!1),!p){if(d===0)return this;if(d===this.length())return this.next}var g=this.clone();return this.parent.insertBefore(g,this.next),this.children.forEachAt(d,this.length(),function(b,m,v){b=b.split(m,p),g.appendChild(b)}),g},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(d,p){var g=this,b=[],m=[];d.forEach(function(v){v.target===g.domNode&&v.type==="childList"&&(b.push.apply(b,v.addedNodes),m.push.apply(m,v.removedNodes))}),m.forEach(function(v){if(!(v.parentNode!=null&&v.tagName!=="IFRAME"&&document.body.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var _=l.find(v);_!=null&&(_.domNode.parentNode==null||_.domNode.parentNode===g.domNode)&&_.detach()}}),b.filter(function(v){return v.parentNode==g.domNode}).sort(function(v,_){return v===_?0:v.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(v){var _=null;v.nextSibling!=null&&(_=l.find(v.nextSibling));var y=c(v);(y.next!=_||y.next==null)&&(y.parent!=null&&y.parent.removeChild(g),g.insertBefore(y,_||void 0))})},f}(a.default);function c(h){var f=l.find(h);if(f==null)try{f=l.create(h)}catch{f=l.create(l.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(p){f.domNode.appendChild(p)}),h.parentNode&&h.parentNode.replaceChild(f.domNode,h),f.attach()}return f}r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){h(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),a=i(31),l=i(17),u=i(1),c=function(h){s(f,h);function f(d){var p=h.call(this,d)||this;return p.attributes=new a.default(p.domNode),p}return f.formats=function(d){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return d.tagName.toLowerCase()},f.prototype.format=function(d,p){var g=u.query(d);g instanceof o.default?this.attributes.attribute(g,p):p&&g!=null&&(d!==this.statics.blotName||this.formats()[d]!==p)&&this.replaceWith(d,p)},f.prototype.formats=function(){var d=this.attributes.values(),p=this.statics.formats(this.domNode);return p!=null&&(d[this.statics.blotName]=p),d},f.prototype.replaceWith=function(d,p){var g=h.prototype.replaceWith.call(this,d,p);return this.attributes.copy(g),g},f.prototype.update=function(d,p){var g=this;h.prototype.update.call(this,d,p),d.some(function(b){return b.target===g.domNode&&b.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(d,p){var g=h.prototype.wrap.call(this,d,p);return g instanceof f&&g.statics.scope===this.statics.scope&&this.attributes.move(g),g},f}(l.default);r.default=c},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(30),a=i(1),l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.value=function(h){return!0},c.prototype.index=function(h,f){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},c.prototype.position=function(h,f){var d=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(d+=1),[this.parent.domNode,d]},c.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},c.scope=a.Scope.INLINE_BLOT,c}(o.default);r.default=l},function(n,r,i){var s=i(11),o=i(3),a={attributes:{compose:function(u,c,h){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var f=o(!0,{},c);h||(f=Object.keys(f).reduce(function(p,g){return f[g]!=null&&(p[g]=f[g]),p},{}));for(var d in u)u[d]!==void 0&&c[d]===void 0&&(f[d]=u[d]);return Object.keys(f).length>0?f:void 0},diff:function(u,c){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var h=Object.keys(u).concat(Object.keys(c)).reduce(function(f,d){return s(u[d],c[d])||(f[d]=c[d]===void 0?null:c[d]),f},{});return Object.keys(h).length>0?h:void 0},transform:function(u,c,h){if(typeof u!="object")return c;if(typeof c=="object"){if(!h)return c;var f=Object.keys(c).reduce(function(d,p){return u[p]===void 0&&(d[p]=c[p]),d},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(u){return new l(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function l(u){this.ops=u,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(u){u||(u=1/0);var c=this.ops[this.index];if(c){var h=this.offset,f=a.length(c);if(u>=f-h?(u=f-h,this.index+=1,this.offset=0):this.offset+=u,typeof c.delete=="number")return{delete:u};var d={};return c.attributes&&(d.attributes=c.attributes),typeof c.retain=="number"?d.retain=u:typeof c.insert=="string"?d.insert=c.insert.substr(h,u):d.insert=c.insert,d}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,c=this.index,h=this.next(),f=this.ops.slice(this.index);return this.offset=u,this.index=c,[h].concat(f)}else return[]},n.exports=a},function(n,r){var i=function(){function s(g,b){return b!=null&&g instanceof b}var o;try{o=Map}catch{o=function(){}}var a;try{a=Set}catch{a=function(){}}var l;try{l=Promise}catch{l=function(){}}function u(g,b,m,v,_){typeof b=="object"&&(m=b.depth,v=b.prototype,_=b.includeNonEnumerable,b=b.circular);var y=[],E=[],k=typeof Buffer<"u";typeof b>"u"&&(b=!0),typeof m>"u"&&(m=1/0);function S(I,R){if(I===null)return null;if(R===0)return I;var O,T;if(typeof I!="object")return I;if(s(I,o))O=new o;else if(s(I,a))O=new a;else if(s(I,l))O=new l(function(F,N){I.then(function(j){F(S(j,R-1))},function(j){N(S(j,R-1))})});else if(u.__isArray(I))O=[];else if(u.__isRegExp(I))O=new RegExp(I.source,p(I)),I.lastIndex&&(O.lastIndex=I.lastIndex);else if(u.__isDate(I))O=new Date(I.getTime());else{if(k&&Buffer.isBuffer(I))return Buffer.allocUnsafe?O=Buffer.allocUnsafe(I.length):O=new Buffer(I.length),I.copy(O),O;s(I,Error)?O=Object.create(I):typeof v>"u"?(T=Object.getPrototypeOf(I),O=Object.create(T)):(O=Object.create(v),T=v)}if(b){var A=y.indexOf(I);if(A!=-1)return E[A];y.push(I),E.push(O)}s(I,o)&&I.forEach(function(F,N){var j=S(N,R-1),U=S(F,R-1);O.set(j,U)}),s(I,a)&&I.forEach(function(F){var N=S(F,R-1);O.add(N)});for(var C in I){var D;T&&(D=Object.getOwnPropertyDescriptor(T,C)),!(D&&D.set==null)&&(O[C]=S(I[C],R-1))}if(Object.getOwnPropertySymbols)for(var q=Object.getOwnPropertySymbols(I),C=0;C<q.length;C++){var Q=q[C],Y=Object.getOwnPropertyDescriptor(I,Q);Y&&!Y.enumerable&&!_||(O[Q]=S(I[Q],R-1),Y.enumerable||Object.defineProperty(O,Q,{enumerable:!1}))}if(_)for(var ie=Object.getOwnPropertyNames(I),C=0;C<ie.length;C++){var X=ie[C],Y=Object.getOwnPropertyDescriptor(I,X);Y&&Y.enumerable||(O[X]=S(I[X],R-1),Object.defineProperty(O,X,{enumerable:!1}))}return O}return S(g,m)}u.clonePrototype=function(b){if(b===null)return null;var m=function(){};return m.prototype=b,new m};function c(g){return Object.prototype.toString.call(g)}u.__objToStr=c;function h(g){return typeof g=="object"&&c(g)==="[object Date]"}u.__isDate=h;function f(g){return typeof g=="object"&&c(g)==="[object Array]"}u.__isArray=f;function d(g){return typeof g=="object"&&c(g)==="[object RegExp]"}u.__isRegExp=d;function p(g){var b="";return g.global&&(b+="g"),g.ignoreCase&&(b+="i"),g.multiline&&(b+="m"),b}return u.__getRegExpFlags=p,u}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function O(T,A){var C=[],D=!0,q=!1,Q=void 0;try{for(var Y=T[Symbol.iterator](),ie;!(D=(ie=Y.next()).done)&&(C.push(ie.value),!(A&&C.length===A));D=!0);}catch(X){q=!0,Q=X}finally{try{!D&&Y.return&&Y.return()}finally{if(q)throw Q}}return C}return function(T,A){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return O(T,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function O(T,A){for(var C=0;C<A.length;C++){var D=A[C];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(T,D.key,D)}}return function(T,A,C){return A&&O(T.prototype,A),C&&O(T,C),T}}(),a=function O(T,A,C){T===null&&(T=Function.prototype);var D=Object.getOwnPropertyDescriptor(T,A);if(D===void 0){var q=Object.getPrototypeOf(T);return q===null?void 0:O(q,A,C)}else{if("value"in D)return D.value;var Q=D.get;return Q===void 0?void 0:Q.call(C)}},l=i(0),u=y(l),c=i(8),h=y(c),f=i(4),d=y(f),p=i(16),g=y(p),b=i(13),m=y(b),v=i(25),_=y(v);function y(O){return O&&O.__esModule?O:{default:O}}function E(O,T){if(!(O instanceof T))throw new TypeError("Cannot call a class as a function")}function k(O,T){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:O}function S(O,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);O.prototype=Object.create(T&&T.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(O,T):O.__proto__=T)}function I(O){return O instanceof d.default||O instanceof f.BlockEmbed}var R=function(O){S(T,O);function T(A,C){E(this,T);var D=k(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,A));return D.emitter=C.emitter,Array.isArray(C.whitelist)&&(D.whitelist=C.whitelist.reduce(function(q,Q){return q[Q]=!0,q},{})),D.domNode.addEventListener("DOMNodeInserted",function(){}),D.optimize(),D.enable(),D}return o(T,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(C,D){var q=this.line(C),Q=s(q,2),Y=Q[0],ie=Q[1],X=this.line(C+D),F=s(X,1),N=F[0];if(a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"deleteAt",this).call(this,C,D),N!=null&&Y!==N&&ie>0){if(Y instanceof f.BlockEmbed||N instanceof f.BlockEmbed){this.optimize();return}if(Y instanceof m.default){var j=Y.newlineIndex(Y.length(),!0);if(j>-1&&(Y=Y.split(j+1),Y===N)){this.optimize();return}}else if(N instanceof m.default){var U=N.newlineIndex(0);U>-1&&N.split(U+1)}var J=N.children.head instanceof g.default?null:N.children.head;Y.moveChildren(N,J),Y.remove()}this.optimize()}},{key:"enable",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",C)}},{key:"formatAt",value:function(C,D,q,Q){this.whitelist!=null&&!this.whitelist[q]||(a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"formatAt",this).call(this,C,D,q,Q),this.optimize())}},{key:"insertAt",value:function(C,D,q){if(!(q!=null&&this.whitelist!=null&&!this.whitelist[D])){if(C>=this.length())if(q==null||u.default.query(D,u.default.Scope.BLOCK)==null){var Q=u.default.create(this.statics.defaultChild);this.appendChild(Q),q==null&&D.endsWith(`
`)&&(D=D.slice(0,-1)),Q.insertAt(0,D,q)}else{var Y=u.default.create(D,q);this.appendChild(Y)}else a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,C,D,q);this.optimize()}}},{key:"insertBefore",value:function(C,D){if(C.statics.scope===u.default.Scope.INLINE_BLOT){var q=u.default.create(this.statics.defaultChild);q.appendChild(C),C=q}a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,C,D)}},{key:"leaf",value:function(C){return this.path(C).pop()||[null,-1]}},{key:"line",value:function(C){return C===this.length()?this.line(C-1):this.descendant(I,C)}},{key:"lines",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,q=function Q(Y,ie,X){var F=[],N=X;return Y.children.forEachAt(ie,X,function(j,U,J){I(j)?F.push(j):j instanceof u.default.Container&&(F=F.concat(Q(j,U,N))),N-=J}),F};return q(this,C,D)}},{key:"optimize",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,C,D),C.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,C,D))}},{key:"path",value:function(C){return a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"path",this).call(this,C).slice(1)}},{key:"update",value:function(C){if(this.batch!==!0){var D=h.default.sources.USER;typeof C=="string"&&(D=C),Array.isArray(C)||(C=this.observer.takeRecords()),C.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,D,C),a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"update",this).call(this,C.concat([])),C.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,D,C)}}}]),T}(u.default.Scroll);R.blotName="scroll",R.className="ql-editor",R.tagName="DIV",R.defaultChild="block",R.allowedChildren=[d.default,f.BlockEmbed,_.default],r.default=R},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},o=function(){function L(x,V){var $=[],ee=!0,fe=!1,M=void 0;try{for(var B=x[Symbol.iterator](),z;!(ee=(z=B.next()).done)&&($.push(z.value),!(V&&$.length===V));ee=!0);}catch(re){fe=!0,M=re}finally{try{!ee&&B.return&&B.return()}finally{if(fe)throw M}}return $}return function(x,V){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return L(x,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function L(x,V){for(var $=0;$<V.length;$++){var ee=V[$];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(x,ee.key,ee)}}return function(x,V,$){return V&&L(x.prototype,V),$&&L(x,$),x}}(),l=i(21),u=O(l),c=i(11),h=O(c),f=i(3),d=O(f),p=i(2),g=O(p),b=i(20),m=O(b),v=i(0),_=O(v),y=i(5),E=O(y),k=i(10),S=O(k),I=i(9),R=O(I);function O(L){return L&&L.__esModule?L:{default:L}}function T(L,x,V){return x in L?Object.defineProperty(L,x,{value:V,enumerable:!0,configurable:!0,writable:!0}):L[x]=V,L}function A(L,x){if(!(L instanceof x))throw new TypeError("Cannot call a class as a function")}function C(L,x){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:L}function D(L,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);L.prototype=Object.create(x&&x.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(L,x):L.__proto__=x)}var q=(0,S.default)("quill:keyboard"),Q=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Y=function(L){D(x,L),a(x,null,[{key:"match",value:function($,ee){return ee=K(ee),["altKey","ctrlKey","metaKey","shiftKey"].some(function(fe){return!!ee[fe]!==$[fe]&&ee[fe]!==null})?!1:ee.key===($.which||$.keyCode)}}]);function x(V,$){A(this,x);var ee=C(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,V,$));return ee.bindings={},Object.keys(ee.options.bindings).forEach(function(fe){fe==="list autofill"&&V.scroll.whitelist!=null&&!V.scroll.whitelist.list||ee.options.bindings[fe]&&ee.addBinding(ee.options.bindings[fe])}),ee.addBinding({key:x.keys.ENTER,shiftKey:null},j),ee.addBinding({key:x.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ee.addBinding({key:x.keys.BACKSPACE},{collapsed:!0},X),ee.addBinding({key:x.keys.DELETE},{collapsed:!0},F)):(ee.addBinding({key:x.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},X),ee.addBinding({key:x.keys.DELETE},{collapsed:!0,suffix:/^.?$/},F)),ee.addBinding({key:x.keys.BACKSPACE},{collapsed:!1},N),ee.addBinding({key:x.keys.DELETE},{collapsed:!1},N),ee.addBinding({key:x.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},X),ee.listen(),ee}return a(x,[{key:"addBinding",value:function($){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},M=K($);if(M==null||M.key==null)return q.warn("Attempted to add invalid keyboard binding",M);typeof ee=="function"&&(ee={handler:ee}),typeof fe=="function"&&(fe={handler:fe}),M=(0,d.default)(M,ee,fe),this.bindings[M.key]=this.bindings[M.key]||[],this.bindings[M.key].push(M)}},{key:"listen",value:function(){var $=this;this.quill.root.addEventListener("keydown",function(ee){if(!ee.defaultPrevented){var fe=ee.which||ee.keyCode,M=($.bindings[fe]||[]).filter(function(Te){return x.match(ee,Te)});if(M.length!==0){var B=$.quill.getSelection();if(!(B==null||!$.quill.hasFocus())){var z=$.quill.getLine(B.index),re=o(z,2),se=re[0],ae=re[1],G=$.quill.getLeaf(B.index),W=o(G,2),te=W[0],Z=W[1],ne=B.length===0?[te,Z]:$.quill.getLeaf(B.index+B.length),ue=o(ne,2),ce=ue[0],de=ue[1],_e=te instanceof _.default.Text?te.value().slice(0,Z):"",Ie=ce instanceof _.default.Text?ce.value().slice(de):"",me={collapsed:B.length===0,empty:B.length===0&&se.length()<=1,format:$.quill.getFormat(B),offset:ae,prefix:_e,suffix:Ie},He=M.some(function(Te){if(Te.collapsed!=null&&Te.collapsed!==me.collapsed||Te.empty!=null&&Te.empty!==me.empty||Te.offset!=null&&Te.offset!==me.offset)return!1;if(Array.isArray(Te.format)){if(Te.format.every(function(Ze){return me.format[Ze]==null}))return!1}else if(s(Te.format)==="object"&&!Object.keys(Te.format).every(function(Ze){return Te.format[Ze]===!0?me.format[Ze]!=null:Te.format[Ze]===!1?me.format[Ze]==null:(0,h.default)(Te.format[Ze],me.format[Ze])}))return!1;return Te.prefix!=null&&!Te.prefix.test(me.prefix)||Te.suffix!=null&&!Te.suffix.test(me.suffix)?!1:Te.handler.call($,B,me)!==!0});He&&ee.preventDefault()}}}})}}]),x}(R.default);Y.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Y.DEFAULTS={bindings:{bold:J("bold"),italic:J("italic"),underline:J("underline"),indent:{key:Y.keys.TAB,format:["blockquote","indent","list"],handler:function(x,V){if(V.collapsed&&V.offset!==0)return!0;this.quill.format("indent","+1",E.default.sources.USER)}},outdent:{key:Y.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(x,V){if(V.collapsed&&V.offset!==0)return!0;this.quill.format("indent","-1",E.default.sources.USER)}},"outdent backspace":{key:Y.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(x,V){V.format.indent!=null?this.quill.format("indent","-1",E.default.sources.USER):V.format.list!=null&&this.quill.format("list",!1,E.default.sources.USER)}},"indent code-block":U(!0),"outdent code-block":U(!1),"remove tab":{key:Y.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(x){this.quill.deleteText(x.index-1,1,E.default.sources.USER)}},tab:{key:Y.keys.TAB,handler:function(x){this.quill.history.cutoff();var V=new g.default().retain(x.index).delete(x.length).insert("	");this.quill.updateContents(V,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(x.index+1,E.default.sources.SILENT)}},"list empty enter":{key:Y.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(x,V){this.quill.format("list",!1,E.default.sources.USER),V.format.indent&&this.quill.format("indent",!1,E.default.sources.USER)}},"checklist enter":{key:Y.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(x){var V=this.quill.getLine(x.index),$=o(V,2),ee=$[0],fe=$[1],M=(0,d.default)({},ee.formats(),{list:"checked"}),B=new g.default().retain(x.index).insert(`
`,M).retain(ee.length()-fe-1).retain(1,{list:"unchecked"});this.quill.updateContents(B,E.default.sources.USER),this.quill.setSelection(x.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Y.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(x,V){var $=this.quill.getLine(x.index),ee=o($,2),fe=ee[0],M=ee[1],B=new g.default().retain(x.index).insert(`
`,V.format).retain(fe.length()-M-1).retain(1,{header:null});this.quill.updateContents(B,E.default.sources.USER),this.quill.setSelection(x.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(x,V){var $=V.prefix.length,ee=this.quill.getLine(x.index),fe=o(ee,2),M=fe[0],B=fe[1];if(B>$)return!0;var z=void 0;switch(V.prefix.trim()){case"[]":case"[ ]":z="unchecked";break;case"[x]":z="checked";break;case"-":case"*":z="bullet";break;default:z="ordered"}this.quill.insertText(x.index," ",E.default.sources.USER),this.quill.history.cutoff();var re=new g.default().retain(x.index-B).delete($+1).retain(M.length()-2-B).retain(1,{list:z});this.quill.updateContents(re,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(x.index-$,E.default.sources.SILENT)}},"code exit":{key:Y.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(x){var V=this.quill.getLine(x.index),$=o(V,2),ee=$[0],fe=$[1],M=new g.default().retain(x.index+ee.length()-fe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(M,E.default.sources.USER)}},"embed left":ie(Y.keys.LEFT,!1),"embed left shift":ie(Y.keys.LEFT,!0),"embed right":ie(Y.keys.RIGHT,!1),"embed right shift":ie(Y.keys.RIGHT,!0)}};function ie(L,x){var V,$=L===Y.keys.LEFT?"prefix":"suffix";return V={key:L,shiftKey:x,altKey:null},T(V,$,/^$/),T(V,"handler",function(fe){var M=fe.index;L===Y.keys.RIGHT&&(M+=fe.length+1);var B=this.quill.getLeaf(M),z=o(B,1),re=z[0];return re instanceof _.default.Embed?(L===Y.keys.LEFT?x?this.quill.setSelection(fe.index-1,fe.length+1,E.default.sources.USER):this.quill.setSelection(fe.index-1,E.default.sources.USER):x?this.quill.setSelection(fe.index,fe.length+1,E.default.sources.USER):this.quill.setSelection(fe.index+fe.length+1,E.default.sources.USER),!1):!0}),V}function X(L,x){if(!(L.index===0||this.quill.getLength()<=1)){var V=this.quill.getLine(L.index),$=o(V,1),ee=$[0],fe={};if(x.offset===0){var M=this.quill.getLine(L.index-1),B=o(M,1),z=B[0];if(z!=null&&z.length()>1){var re=ee.formats(),se=this.quill.getFormat(L.index-1,1);fe=m.default.attributes.diff(re,se)||{}}}var ae=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(x.prefix)?2:1;this.quill.deleteText(L.index-ae,ae,E.default.sources.USER),Object.keys(fe).length>0&&this.quill.formatLine(L.index-ae,ae,fe,E.default.sources.USER),this.quill.focus()}}function F(L,x){var V=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(x.suffix)?2:1;if(!(L.index>=this.quill.getLength()-V)){var $={},ee=0,fe=this.quill.getLine(L.index),M=o(fe,1),B=M[0];if(x.offset>=B.length()-1){var z=this.quill.getLine(L.index+1),re=o(z,1),se=re[0];if(se){var ae=B.formats(),G=this.quill.getFormat(L.index,1);$=m.default.attributes.diff(ae,G)||{},ee=se.length()}}this.quill.deleteText(L.index,V,E.default.sources.USER),Object.keys($).length>0&&this.quill.formatLine(L.index+ee-1,V,$,E.default.sources.USER)}}function N(L){var x=this.quill.getLines(L),V={};if(x.length>1){var $=x[0].formats(),ee=x[x.length-1].formats();V=m.default.attributes.diff(ee,$)||{}}this.quill.deleteText(L,E.default.sources.USER),Object.keys(V).length>0&&this.quill.formatLine(L.index,1,V,E.default.sources.USER),this.quill.setSelection(L.index,E.default.sources.SILENT),this.quill.focus()}function j(L,x){var V=this;L.length>0&&this.quill.scroll.deleteAt(L.index,L.length);var $=Object.keys(x.format).reduce(function(ee,fe){return _.default.query(fe,_.default.Scope.BLOCK)&&!Array.isArray(x.format[fe])&&(ee[fe]=x.format[fe]),ee},{});this.quill.insertText(L.index,`
`,$,E.default.sources.USER),this.quill.setSelection(L.index+1,E.default.sources.SILENT),this.quill.focus(),Object.keys(x.format).forEach(function(ee){$[ee]==null&&(Array.isArray(x.format[ee])||ee!=="link"&&V.quill.format(ee,x.format[ee],E.default.sources.USER))})}function U(L){return{key:Y.keys.TAB,shiftKey:!L,format:{"code-block":!0},handler:function(V){var $=_.default.query("code-block"),ee=V.index,fe=V.length,M=this.quill.scroll.descendant($,ee),B=o(M,2),z=B[0],re=B[1];if(z!=null){var se=this.quill.getIndex(z),ae=z.newlineIndex(re,!0)+1,G=z.newlineIndex(se+re+fe),W=z.domNode.textContent.slice(ae,G).split(`
`);re=0,W.forEach(function(te,Z){L?(z.insertAt(ae+re,$.TAB),re+=$.TAB.length,Z===0?ee+=$.TAB.length:fe+=$.TAB.length):te.startsWith($.TAB)&&(z.deleteAt(ae+re,$.TAB.length),re-=$.TAB.length,Z===0?ee-=$.TAB.length:fe-=$.TAB.length),re+=te.length+1}),this.quill.update(E.default.sources.USER),this.quill.setSelection(ee,fe,E.default.sources.SILENT)}}}}function J(L){return{key:L[0].toUpperCase(),shortKey:!0,handler:function(V,$){this.quill.format(L,!$.format[L],E.default.sources.USER)}}}function K(L){if(typeof L=="string"||typeof L=="number")return K({key:L});if((typeof L>"u"?"undefined":s(L))==="object"&&(L=(0,u.default)(L,!1)),typeof L.key=="string")if(Y.keys[L.key.toUpperCase()]!=null)L.key=Y.keys[L.key.toUpperCase()];else if(L.key.length===1)L.key=L.key.toUpperCase().charCodeAt(0);else return null;return L.shortKey&&(L[Q]=L.shortKey,delete L.shortKey),L}r.default=Y,r.SHORTKEY=Q},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function m(v,_){var y=[],E=!0,k=!1,S=void 0;try{for(var I=v[Symbol.iterator](),R;!(E=(R=I.next()).done)&&(y.push(R.value),!(_&&y.length===_));E=!0);}catch(O){k=!0,S=O}finally{try{!E&&I.return&&I.return()}finally{if(k)throw S}}return y}return function(v,_){if(Array.isArray(v))return v;if(Symbol.iterator in Object(v))return m(v,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function m(v,_,y){v===null&&(v=Function.prototype);var E=Object.getOwnPropertyDescriptor(v,_);if(E===void 0){var k=Object.getPrototypeOf(v);return k===null?void 0:m(k,_,y)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(y)}},a=function(){function m(v,_){for(var y=0;y<_.length;y++){var E=_[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(v,E.key,E)}}return function(v,_,y){return _&&m(v.prototype,_),y&&m(v,y),v}}(),l=i(0),u=f(l),c=i(7),h=f(c);function f(m){return m&&m.__esModule?m:{default:m}}function d(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function p(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function g(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var b=function(m){g(v,m),a(v,null,[{key:"value",value:function(){}}]);function v(_,y){d(this,v);var E=p(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,_));return E.selection=y,E.textNode=document.createTextNode(v.CONTENTS),E.domNode.appendChild(E.textNode),E._length=0,E}return a(v,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(y,E){if(this._length!==0)return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,y,E);for(var k=this,S=0;k!=null&&k.statics.scope!==u.default.Scope.BLOCK_BLOT;)S+=k.offset(k.parent),k=k.parent;k!=null&&(this._length=v.CONTENTS.length,k.optimize(),k.formatAt(S,v.CONTENTS.length,y,E),this._length=0)}},{key:"index",value:function(y,E){return y===this.textNode?0:o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"index",this).call(this,y,E)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var y=this.textNode,E=this.selection.getNativeRange(),k=void 0,S=void 0,I=void 0;if(E!=null&&E.start.node===y&&E.end.node===y){var R=[y,E.start.offset,E.end.offset];k=R[0],S=R[1],I=R[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==v.CONTENTS){var O=this.textNode.data.split(v.CONTENTS).join("");this.next instanceof h.default?(k=this.next.domNode,this.next.insertAt(0,O),this.textNode.data=v.CONTENTS):(this.textNode.data=O,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(v.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),S!=null){var T=[S,I].map(function(C){return Math.max(0,Math.min(k.data.length,C-1))}),A=s(T,2);return S=A[0],I=A[1],{startNode:k,startOffset:S,endNode:k,endOffset:I}}}}},{key:"update",value:function(y,E){var k=this;if(y.some(function(I){return I.type==="characterData"&&I.target===k.textNode})){var S=this.restore();S&&(E.range=S)}}},{key:"value",value:function(){return""}}]),v}(u.default.Embed);b.blotName="cursor",b.className="ql-cursor",b.tagName="span",b.CONTENTS="\uFEFF",r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=u(s),a=i(4),l=u(a);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function f(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var d=function(p){f(g,p);function g(){return c(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(o.default.Container);d.allowedChildren=[l.default,a.BlockEmbed,d],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var s=function(){function b(m,v){for(var _=0;_<v.length;_++){var y=v[_];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,v,_){return v&&b(m.prototype,v),_&&b(m,_),m}}(),o=function b(m,v,_){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,v);if(y===void 0){var E=Object.getPrototypeOf(m);return E===null?void 0:b(E,v,_)}else{if("value"in y)return y.value;var k=y.get;return k===void 0?void 0:k.call(_)}},a=i(0),l=u(a);function u(b){return b&&b.__esModule?b:{default:b}}function c(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}function h(b,m){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:b}function f(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(b,m):b.__proto__=m)}var d=function(b){f(m,b);function m(){return c(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"value",value:function(_){var y=o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,_);return y.startsWith("rgb(")?(y=y.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+y.split(",").map(function(E){return("00"+parseInt(E).toString(16)).slice(-2)}).join("")):y}}]),m}(l.default.Attributor.Style),p=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),g=new d("color","color",{scope:l.default.Scope.INLINE});r.ColorAttributor=d,r.ColorClass=p,r.ColorStyle=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var s=function(){function g(b,m){for(var v=0;v<m.length;v++){var _=m[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,m,v){return m&&g(b.prototype,m),v&&g(b,v),b}}(),o=function g(b,m,v){b===null&&(b=Function.prototype);var _=Object.getOwnPropertyDescriptor(b,m);if(_===void 0){var y=Object.getPrototypeOf(b);return y===null?void 0:g(y,m,v)}else{if("value"in _)return _.value;var E=_.get;return E===void 0?void 0:E.call(v)}},a=i(6),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function h(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function f(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var d=function(g){f(b,g);function b(){return c(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"format",value:function(v,_){if(v!==this.statics.blotName||!_)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,v,_);_=this.constructor.sanitize(_),this.domNode.setAttribute("href",_)}}],[{key:"create",value:function(v){var _=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,v);return v=this.sanitize(v),_.setAttribute("href",v),_.setAttribute("rel","noopener noreferrer"),_.setAttribute("target","_blank"),_}},{key:"formats",value:function(v){return v.getAttribute("href")}},{key:"sanitize",value:function(v){return p(v,this.PROTOCOL_WHITELIST)?v:this.SANITIZED_URL}}]),b}(l.default);d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function p(g,b){var m=document.createElement("a");m.href=g;var v=m.href.slice(0,m.href.indexOf(":"));return b.indexOf(v)>-1}r.default=d,r.sanitize=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},o=function(){function b(m,v){for(var _=0;_<v.length;_++){var y=v[_];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,v,_){return v&&b(m.prototype,v),_&&b(m,_),m}}(),a=i(23),l=h(a),u=i(107),c=h(u);function h(b){return b&&b.__esModule?b:{default:b}}function f(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}var d=0;function p(b,m){b.setAttribute(m,b.getAttribute(m)!=="true")}var g=function(){function b(m){var v=this;f(this,b),this.select=m,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){v.togglePicker()}),this.label.addEventListener("keydown",function(_){switch(_.keyCode){case l.default.keys.ENTER:v.togglePicker();break;case l.default.keys.ESCAPE:v.escape(),_.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(b,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),p(this.label,"aria-expanded"),p(this.options,"aria-hidden")}},{key:"buildItem",value:function(v){var _=this,y=document.createElement("span");return y.tabIndex="0",y.setAttribute("role","button"),y.classList.add("ql-picker-item"),v.hasAttribute("value")&&y.setAttribute("data-value",v.getAttribute("value")),v.textContent&&y.setAttribute("data-label",v.textContent),y.addEventListener("click",function(){_.selectItem(y,!0)}),y.addEventListener("keydown",function(E){switch(E.keyCode){case l.default.keys.ENTER:_.selectItem(y,!0),E.preventDefault();break;case l.default.keys.ESCAPE:_.escape(),E.preventDefault();break}}),y}},{key:"buildLabel",value:function(){var v=document.createElement("span");return v.classList.add("ql-picker-label"),v.innerHTML=c.default,v.tabIndex="0",v.setAttribute("role","button"),v.setAttribute("aria-expanded","false"),this.container.appendChild(v),v}},{key:"buildOptions",value:function(){var v=this,_=document.createElement("span");_.classList.add("ql-picker-options"),_.setAttribute("aria-hidden","true"),_.tabIndex="-1",_.id="ql-picker-options-"+d,d+=1,this.label.setAttribute("aria-controls",_.id),this.options=_,[].slice.call(this.select.options).forEach(function(y){var E=v.buildItem(y);_.appendChild(E),y.selected===!0&&v.selectItem(E)}),this.container.appendChild(_)}},{key:"buildPicker",value:function(){var v=this;[].slice.call(this.select.attributes).forEach(function(_){v.container.setAttribute(_.name,_.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var v=this;this.close(),setTimeout(function(){return v.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(v){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=this.container.querySelector(".ql-selected");if(v!==y&&(y!=null&&y.classList.remove("ql-selected"),v!=null&&(v.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(v.parentNode.children,v),v.hasAttribute("data-value")?this.label.setAttribute("data-value",v.getAttribute("data-value")):this.label.removeAttribute("data-value"),v.hasAttribute("data-label")?this.label.setAttribute("data-label",v.getAttribute("data-label")):this.label.removeAttribute("data-label"),_))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var E=document.createEvent("Event");E.initEvent("change",!0,!0),this.select.dispatchEvent(E)}this.close()}}},{key:"update",value:function(){var v=void 0;if(this.select.selectedIndex>-1){var _=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];v=this.select.options[this.select.selectedIndex],this.selectItem(_)}else this.selectItem(null);var y=v!=null&&v!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",y)}}]),b}();r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=q(s),a=i(5),l=q(a),u=i(4),c=q(u),h=i(16),f=q(h),d=i(25),p=q(d),g=i(24),b=q(g),m=i(35),v=q(m),_=i(6),y=q(_),E=i(22),k=q(E),S=i(7),I=q(S),R=i(55),O=q(R),T=i(42),A=q(T),C=i(23),D=q(C);function q(Q){return Q&&Q.__esModule?Q:{default:Q}}l.default.register({"blots/block":c.default,"blots/block/embed":u.BlockEmbed,"blots/break":f.default,"blots/container":p.default,"blots/cursor":b.default,"blots/embed":v.default,"blots/inline":y.default,"blots/scroll":k.default,"blots/text":I.default,"modules/clipboard":O.default,"modules/history":A.default,"modules/keyboard":D.default}),o.default.register(c.default,f.default,b.default,y.default,k.default,I.default),r.default=l.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=function(){function a(l){this.domNode=l,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?u=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?u=document.createElement(l):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return s.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},a.prototype.deleteAt=function(l,u){var c=this.isolate(l,u);c.remove()},a.prototype.formatAt=function(l,u,c,h){var f=this.isolate(l,u);if(s.query(c,s.Scope.BLOT)!=null&&h)f.wrap(c,h);else if(s.query(c,s.Scope.ATTRIBUTE)!=null){var d=s.create(this.statics.scope);f.wrap(d),d.format(c,h)}},a.prototype.insertAt=function(l,u,c){var h=c==null?s.create("text",u):s.create(u,c),f=this.split(l);this.parent.insertBefore(h,f)},a.prototype.insertInto=function(l,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var c=null;l.children.insertBefore(this,u),u!=null&&(c=u.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=c)&&l.domNode.insertBefore(this.domNode,c),this.parent=l,this.attach()},a.prototype.isolate=function(l,u){var c=this.split(l);return c.split(u),c},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return c.replace(this),c},a.prototype.split=function(l,u){return l===0?this:this.next},a.prototype.update=function(l,u){},a.prototype.wrap=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return this.parent!=null&&this.parent.insertBefore(c,this.next),c.appendChild(this),c},a.blotName="abstract",a}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),o=i(32),a=i(33),l=i(1),u=function(){function c(h){this.attributes={},this.domNode=h,this.build()}return c.prototype.attribute=function(h,f){f?h.add(this.domNode,f)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},c.prototype.build=function(){var h=this;this.attributes={};var f=s.default.keys(this.domNode),d=o.default.keys(this.domNode),p=a.default.keys(this.domNode);f.concat(d).concat(p).forEach(function(g){var b=l.query(g,l.Scope.ATTRIBUTE);b instanceof s.default&&(h.attributes[b.attrName]=b)})},c.prototype.copy=function(h){var f=this;Object.keys(this.attributes).forEach(function(d){var p=f.attributes[d].value(f.domNode);h.format(d,p)})},c.prototype.move=function(h){var f=this;this.copy(h),Object.keys(this.attributes).forEach(function(d){f.attributes[d].remove(f.domNode)}),this.attributes={}},c.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(f,d){return f[d]=h.attributes[d].value(h.domNode),f},{})},c}();r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u,c){var h=u.getAttribute("class")||"";return h.split(/\s+/).filter(function(f){return f.indexOf(c+"-")===0})}var l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},c.prototype.add=function(h,f){return this.canAdd(h,f)?(this.remove(h),h.classList.add(this.keyName+"-"+f),!0):!1},c.prototype.remove=function(h){var f=a(h,this.keyName);f.forEach(function(d){h.classList.remove(d)}),h.classList.length===0&&h.removeAttribute("class")},c.prototype.value=function(h){var f=a(h,this.keyName)[0]||"",d=f.slice(this.keyName.length+1);return this.canAdd(h,d)?d:""},c}(o.default);r.default=l},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u){var c=u.split("-"),h=c.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return c[0]+h}var l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(f){var d=f.split(":");return d[0].trim()})},c.prototype.add=function(h,f){return this.canAdd(h,f)?(h.style[a(this.keyName)]=f,!0):!1},c.prototype.remove=function(h){h.style[a(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},c.prototype.value=function(h){var f=h.style[a(this.keyName)];return this.canAdd(h,f)?f:""},c}(o.default);r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function l(u,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,c,h){return c&&l(u.prototype,c),h&&l(u,h),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(u,c){o(this,l),this.quill=u,this.options=c,this.modules={}}return s(l,[{key:"init",value:function(){var c=this;Object.keys(this.options.modules).forEach(function(h){c.modules[h]==null&&c.addModule(h)})}},{key:"addModule",value:function(c){var h=this.quill.constructor.import("modules/"+c);return this.modules[c]=new h(this.quill,this.options.modules[c]||{}),this.modules[c]}}]),l}();a.DEFAULTS={modules:{}},a.themes={default:a},r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function m(v,_){for(var y=0;y<_.length;y++){var E=_[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(v,E.key,E)}}return function(v,_,y){return _&&m(v.prototype,_),y&&m(v,y),v}}(),o=function m(v,_,y){v===null&&(v=Function.prototype);var E=Object.getOwnPropertyDescriptor(v,_);if(E===void 0){var k=Object.getPrototypeOf(v);return k===null?void 0:m(k,_,y)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(y)}},a=i(0),l=h(a),u=i(7),c=h(u);function h(m){return m&&m.__esModule?m:{default:m}}function f(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function d(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function p(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var g="\uFEFF",b=function(m){p(v,m);function v(_){f(this,v);var y=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,_));return y.contentNode=document.createElement("span"),y.contentNode.setAttribute("contenteditable",!1),[].slice.call(y.domNode.childNodes).forEach(function(E){y.contentNode.appendChild(E)}),y.leftGuard=document.createTextNode(g),y.rightGuard=document.createTextNode(g),y.domNode.appendChild(y.leftGuard),y.domNode.appendChild(y.contentNode),y.domNode.appendChild(y.rightGuard),y}return s(v,[{key:"index",value:function(y,E){return y===this.leftGuard?0:y===this.rightGuard?1:o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"index",this).call(this,y,E)}},{key:"restore",value:function(y){var E=void 0,k=void 0,S=y.data.split(g).join("");if(y===this.leftGuard)if(this.prev instanceof c.default){var I=this.prev.length();this.prev.insertAt(I,S),E={startNode:this.prev.domNode,startOffset:I+S.length}}else k=document.createTextNode(S),this.parent.insertBefore(l.default.create(k),this),E={startNode:k,startOffset:S.length};else y===this.rightGuard&&(this.next instanceof c.default?(this.next.insertAt(0,S),E={startNode:this.next.domNode,startOffset:S.length}):(k=document.createTextNode(S),this.parent.insertBefore(l.default.create(k),this.next),E={startNode:k,startOffset:S.length}));return y.data=g,E}},{key:"update",value:function(y,E){var k=this;y.forEach(function(S){if(S.type==="characterData"&&(S.target===k.leftGuard||S.target===k.rightGuard)){var I=k.restore(S.target);I&&(E.range=I)}})}}]),v}(l.default.Embed);r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",l),c=new o.default.Attributor.Class("align","ql-align",l),h=new o.default.Attributor.Style("align","text-align",l);r.AlignAttribute=u,r.AlignClass=c,r.AlignStyle=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var s=i(0),o=l(s),a=i(26);function l(h){return h&&h.__esModule?h:{default:h}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),c=new a.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=u,r.BackgroundStyle=c},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",l),c=new o.default.Attributor.Class("direction","ql-direction",l),h=new o.default.Attributor.Style("direction","direction",l);r.DirectionAttribute=u,r.DirectionClass=c,r.DirectionStyle=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var s=function(){function m(v,_){for(var y=0;y<_.length;y++){var E=_[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(v,E.key,E)}}return function(v,_,y){return _&&m(v.prototype,_),y&&m(v,y),v}}(),o=function m(v,_,y){v===null&&(v=Function.prototype);var E=Object.getOwnPropertyDescriptor(v,_);if(E===void 0){var k=Object.getPrototypeOf(v);return k===null?void 0:m(k,_,y)}else{if("value"in E)return E.value;var S=E.get;return S===void 0?void 0:S.call(y)}},a=i(0),l=u(a);function u(m){return m&&m.__esModule?m:{default:m}}function c(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}function h(m,v){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:m}function f(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}var d={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},p=new l.default.Attributor.Class("font","ql-font",d),g=function(m){f(v,m);function v(){return c(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"value",value:function(y){return o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,y).replace(/["']/g,"")}}]),v}(l.default.Attributor.Style),b=new g("font","font-family",d);r.FontStyle=b,r.FontClass=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var s=i(0),o=a(s);function a(c){return c&&c.__esModule?c:{default:c}}var l=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=l,r.SizeStyle=u},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var s=function(){function _(y,E){for(var k=0;k<E.length;k++){var S=E[k];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,E,k){return E&&_(y.prototype,E),k&&_(y,k),y}}(),o=i(0),a=f(o),l=i(5),u=f(l),c=i(9),h=f(c);function f(_){return _&&_.__esModule?_:{default:_}}function d(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function p(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function g(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var b=function(_){g(y,_);function y(E,k){d(this,y);var S=p(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,E,k));return S.lastRecorded=0,S.ignoreChange=!1,S.clear(),S.quill.on(u.default.events.EDITOR_CHANGE,function(I,R,O,T){I!==u.default.events.TEXT_CHANGE||S.ignoreChange||(!S.options.userOnly||T===u.default.sources.USER?S.record(R,O):S.transform(R))}),S.quill.keyboard.addBinding({key:"Z",shortKey:!0},S.undo.bind(S)),S.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},S.redo.bind(S)),/Win/i.test(navigator.platform)&&S.quill.keyboard.addBinding({key:"Y",shortKey:!0},S.redo.bind(S)),S}return s(y,[{key:"change",value:function(k,S){if(this.stack[k].length!==0){var I=this.stack[k].pop();this.stack[S].push(I),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(I[k],u.default.sources.USER),this.ignoreChange=!1;var R=v(I[k]);this.quill.setSelection(R)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(k,S){if(k.ops.length!==0){this.stack.redo=[];var I=this.quill.getContents().diff(S),R=Date.now();if(this.lastRecorded+this.options.delay>R&&this.stack.undo.length>0){var O=this.stack.undo.pop();I=I.compose(O.undo),k=O.redo.compose(k)}else this.lastRecorded=R;this.stack.undo.push({redo:k,undo:I}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(k){this.stack.undo.forEach(function(S){S.undo=k.transform(S.undo,!0),S.redo=k.transform(S.redo,!0)}),this.stack.redo.forEach(function(S){S.undo=k.transform(S.undo,!0),S.redo=k.transform(S.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),y}(h.default);b.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function m(_){var y=_.ops[_.ops.length-1];return y==null?!1:y.insert!=null?typeof y.insert=="string"&&y.insert.endsWith(`
`):y.attributes!=null?Object.keys(y.attributes).some(function(E){return a.default.query(E,a.default.Scope.BLOCK)!=null}):!1}function v(_){var y=_.reduce(function(k,S){return k+=S.delete||0,k},0),E=_.length()-y;return m(_)&&(E-=1),E}r.default=b,r.getLastChangeIndex=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var s=function(){function j(U,J){for(var K=0;K<J.length;K++){var L=J[K];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(U,L.key,L)}}return function(U,J,K){return J&&j(U.prototype,J),K&&j(U,K),U}}(),o=function j(U,J,K){U===null&&(U=Function.prototype);var L=Object.getOwnPropertyDescriptor(U,J);if(L===void 0){var x=Object.getPrototypeOf(U);return x===null?void 0:j(x,J,K)}else{if("value"in L)return L.value;var V=L.get;return V===void 0?void 0:V.call(K)}},a=i(3),l=R(a),u=i(2),c=R(u),h=i(8),f=R(h),d=i(23),p=R(d),g=i(34),b=R(g),m=i(59),v=R(m),_=i(60),y=R(_),E=i(28),k=R(E),S=i(61),I=R(S);function R(j){return j&&j.__esModule?j:{default:j}}function O(j,U){if(!(j instanceof U))throw new TypeError("Cannot call a class as a function")}function T(j,U){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:j}function A(j,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);j.prototype=Object.create(U&&U.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(j,U):j.__proto__=U)}var C=[!1,"center","right","justify"],D=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],q=[!1,"serif","monospace"],Q=["1","2","3",!1],Y=["small",!1,"large","huge"],ie=function(j){A(U,j);function U(J,K){O(this,U);var L=T(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,J,K)),x=function V($){if(!document.body.contains(J.root))return document.body.removeEventListener("click",V);L.tooltip!=null&&!L.tooltip.root.contains($.target)&&document.activeElement!==L.tooltip.textbox&&!L.quill.hasFocus()&&L.tooltip.hide(),L.pickers!=null&&L.pickers.forEach(function(ee){ee.container.contains($.target)||ee.close()})};return J.emitter.listenDOM("click",document.body,x),L}return s(U,[{key:"addModule",value:function(K){var L=o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"addModule",this).call(this,K);return K==="toolbar"&&this.extendToolbar(L),L}},{key:"buildButtons",value:function(K,L){K.forEach(function(x){var V=x.getAttribute("class")||"";V.split(/\s+/).forEach(function($){if($.startsWith("ql-")&&($=$.slice(3),L[$]!=null))if($==="direction")x.innerHTML=L[$][""]+L[$].rtl;else if(typeof L[$]=="string")x.innerHTML=L[$];else{var ee=x.value||"";ee!=null&&L[$][ee]&&(x.innerHTML=L[$][ee])}})})}},{key:"buildPickers",value:function(K,L){var x=this;this.pickers=K.map(function($){if($.classList.contains("ql-align"))return $.querySelector("option")==null&&N($,C),new y.default($,L.align);if($.classList.contains("ql-background")||$.classList.contains("ql-color")){var ee=$.classList.contains("ql-background")?"background":"color";return $.querySelector("option")==null&&N($,D,ee==="background"?"#ffffff":"#000000"),new v.default($,L[ee])}else return $.querySelector("option")==null&&($.classList.contains("ql-font")?N($,q):$.classList.contains("ql-header")?N($,Q):$.classList.contains("ql-size")&&N($,Y)),new k.default($)});var V=function(){x.pickers.forEach(function(ee){ee.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,V)}}]),U}(b.default);ie.DEFAULTS=(0,l.default)(!0,{},b.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var U=this,J=this.container.querySelector("input.ql-image[type=file]");J==null&&(J=document.createElement("input"),J.setAttribute("type","file"),J.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),J.classList.add("ql-image"),J.addEventListener("change",function(){if(J.files!=null&&J.files[0]!=null){var K=new FileReader;K.onload=function(L){var x=U.quill.getSelection(!0);U.quill.updateContents(new c.default().retain(x.index).delete(x.length).insert({image:L.target.result}),f.default.sources.USER),U.quill.setSelection(x.index+1,f.default.sources.SILENT),J.value=""},K.readAsDataURL(J.files[0])}}),this.container.appendChild(J)),J.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var X=function(j){A(U,j);function U(J,K){O(this,U);var L=T(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,J,K));return L.textbox=L.root.querySelector('input[type="text"]'),L.listen(),L}return s(U,[{key:"listen",value:function(){var K=this;this.textbox.addEventListener("keydown",function(L){p.default.match(L,"enter")?(K.save(),L.preventDefault()):p.default.match(L,"escape")&&(K.cancel(),L.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),L!=null?this.textbox.value=L:K!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+K)||""),this.root.setAttribute("data-mode",K)}},{key:"restoreFocus",value:function(){var K=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=K}},{key:"save",value:function(){var K=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var L=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",K,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",K,f.default.sources.USER)),this.quill.root.scrollTop=L;break}case"video":K=F(K);case"formula":{if(!K)break;var x=this.quill.getSelection(!0);if(x!=null){var V=x.index+x.length;this.quill.insertEmbed(V,this.root.getAttribute("data-mode"),K,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(V+1," ",f.default.sources.USER),this.quill.setSelection(V+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),U}(I.default);function F(j){var U=j.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||j.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return U?(U[1]||"https")+"://www.youtube.com/embed/"+U[2]+"?showinfo=0":(U=j.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(U[1]||"https")+"://player.vimeo.com/video/"+U[2]+"/":j}function N(j,U){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;U.forEach(function(K){var L=document.createElement("option");K===J?L.setAttribute("selected","selected"):L.setAttribute("value",K),j.appendChild(L)})}r.BaseTooltip=X,r.default=ie},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},o.prototype.contains=function(a){for(var l,u=this.iterator();l=u();)if(l===a)return!0;return!1},o.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},o.prototype.offset=function(a){for(var l=0,u=this.head;u!=null;){if(u===a)return l;l+=u.length(),u=u.next}return-1},o.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},o.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},o.prototype.find=function(a,l){l===void 0&&(l=!1);for(var u,c=this.iterator();u=c();){var h=u.length();if(a<h||l&&a===h&&(u.next==null||u.next.length()!==0))return[u,a];a-=h}return[null,0]},o.prototype.forEach=function(a){for(var l,u=this.iterator();l=u();)a(l)},o.prototype.forEachAt=function(a,l,u){if(!(l<=0))for(var c=this.find(a),h=c[0],f=c[1],d,p=a-f,g=this.iterator(h);(d=g())&&p<a+l;){var b=d.length();a>p?u(d,a-p,Math.min(l,p+b-a)):u(d,0,Math.min(b,a+l-p)),p+=b}},o.prototype.map=function(a){return this.reduce(function(l,u){return l.push(a(u)),l},[])},o.prototype.reduce=function(a,l){for(var u,c=this.iterator();u=c();)l=a(l,u);return l},o}();r.default=s},function(n,r,i){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){h(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),a=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,c=function(h){s(f,h);function f(d){var p=h.call(this,d)||this;return p.scroll=p,p.observer=new MutationObserver(function(g){p.update(g)}),p.observer.observe(p.domNode,l),p.attach(),p}return f.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(d,p){this.update(),d===0&&p===this.length()?this.children.forEach(function(g){g.remove()}):h.prototype.deleteAt.call(this,d,p)},f.prototype.formatAt=function(d,p,g,b){this.update(),h.prototype.formatAt.call(this,d,p,g,b)},f.prototype.insertAt=function(d,p,g){this.update(),h.prototype.insertAt.call(this,d,p,g)},f.prototype.optimize=function(d,p){var g=this;d===void 0&&(d=[]),p===void 0&&(p={}),h.prototype.optimize.call(this,p);for(var b=[].slice.call(this.observer.takeRecords());b.length>0;)d.push(b.pop());for(var m=function(E,k){k===void 0&&(k=!0),!(E==null||E===g)&&E.domNode.parentNode!=null&&(E.domNode[a.DATA_KEY].mutations==null&&(E.domNode[a.DATA_KEY].mutations=[]),k&&m(E.parent))},v=function(E){E.domNode[a.DATA_KEY]==null||E.domNode[a.DATA_KEY].mutations==null||(E instanceof o.default&&E.children.forEach(v),E.optimize(p))},_=d,y=0;_.length>0;y+=1){if(y>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(_.forEach(function(E){var k=a.find(E.target,!0);k!=null&&(k.domNode===E.target&&(E.type==="childList"?(m(a.find(E.previousSibling,!1)),[].forEach.call(E.addedNodes,function(S){var I=a.find(S,!1);m(I,!1),I instanceof o.default&&I.children.forEach(function(R){m(R,!1)})})):E.type==="attributes"&&m(k.prev)),m(k))}),this.children.forEach(v),_=[].slice.call(this.observer.takeRecords()),b=_.slice();b.length>0;)d.push(b.pop())}},f.prototype.update=function(d,p){var g=this;p===void 0&&(p={}),d=d||this.observer.takeRecords(),d.map(function(b){var m=a.find(b.target,!0);return m==null?null:m.domNode[a.DATA_KEY].mutations==null?(m.domNode[a.DATA_KEY].mutations=[b],m):(m.domNode[a.DATA_KEY].mutations.push(b),null)}).forEach(function(b){b==null||b===g||b.domNode[a.DATA_KEY]==null||b.update(b.domNode[a.DATA_KEY].mutations||[],p)}),this.domNode[a.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,p),this.optimize(d,p)},f.blotName="scroll",f.defaultChild="block",f.scope=a.Scope.BLOCK_BLOT,f.tagName="DIV",f}(o.default);r.default=c},function(n,r,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var d in f)f.hasOwnProperty(d)&&(h[d]=f[d])};return function(h,f){c(h,f);function d(){this.constructor=h}h.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1);function l(c,h){if(Object.keys(c).length!==Object.keys(h).length)return!1;for(var f in c)if(c[f]!==h[f])return!1;return!0}var u=function(c){s(h,c);function h(){return c!==null&&c.apply(this,arguments)||this}return h.formats=function(f){if(f.tagName!==h.tagName)return c.formats.call(this,f)},h.prototype.format=function(f,d){var p=this;f===this.statics.blotName&&!d?(this.children.forEach(function(g){g instanceof o.default||(g=g.wrap(h.blotName,!0)),p.attributes.copy(g)}),this.unwrap()):c.prototype.format.call(this,f,d)},h.prototype.formatAt=function(f,d,p,g){if(this.formats()[p]!=null||a.query(p,a.Scope.ATTRIBUTE)){var b=this.isolate(f,d);b.format(p,g)}else c.prototype.formatAt.call(this,f,d,p,g)},h.prototype.optimize=function(f){c.prototype.optimize.call(this,f);var d=this.formats();if(Object.keys(d).length===0)return this.unwrap();var p=this.next;p instanceof h&&p.prev===this&&l(d,p.formats())&&(p.moveChildren(this),p.remove())},h.blotName="inline",h.scope=a.Scope.INLINE_BLOT,h.tagName="SPAN",h}(o.default);r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1),l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.formats=function(h){var f=a.query(c.blotName).tagName;if(h.tagName!==f)return u.formats.call(this,h)},c.prototype.format=function(h,f){a.query(h,a.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!f?this.replaceWith(c.blotName):u.prototype.format.call(this,h,f))},c.prototype.formatAt=function(h,f,d,p){a.query(d,a.Scope.BLOCK)!=null?this.format(d,p):u.prototype.formatAt.call(this,h,f,d,p)},c.prototype.insertAt=function(h,f,d){if(d==null||a.query(f,a.Scope.INLINE)!=null)u.prototype.insertAt.call(this,h,f,d);else{var p=this.split(h),g=a.create(f,d);p.parent.insertBefore(g,p)}},c.prototype.update=function(h,f){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,h,f)},c.blotName="block",c.scope=a.Scope.BLOCK_BLOT,c.tagName="P",c}(o.default);r.default=l},function(n,r,i){var s=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var h in c)c.hasOwnProperty(h)&&(u[h]=c[h])};return function(u,c){l(u,c);function h(){this.constructor=u}u.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=function(l){s(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.formats=function(c){},u.prototype.format=function(c,h){l.prototype.formatAt.call(this,0,this.length(),c,h)},u.prototype.formatAt=function(c,h,f,d){c===0&&h===this.length()?this.format(f,d):l.prototype.formatAt.call(this,c,h,f,d)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u}(o.default);r.default=a},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=i(1),l=function(u){s(c,u);function c(h){var f=u.call(this,h)||this;return f.text=f.statics.value(f.domNode),f}return c.create=function(h){return document.createTextNode(h)},c.value=function(h){var f=h.data;return f.normalize&&(f=f.normalize()),f},c.prototype.deleteAt=function(h,f){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+f)},c.prototype.index=function(h,f){return this.domNode===h?f:-1},c.prototype.insertAt=function(h,f,d){d==null?(this.text=this.text.slice(0,h)+f+this.text.slice(h),this.domNode.data=this.text):u.prototype.insertAt.call(this,h,f,d)},c.prototype.length=function(){return this.text.length},c.prototype.optimize=function(h){u.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof c&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},c.prototype.position=function(h,f){return[this.domNode,h]},c.prototype.split=function(h,f){if(f===void 0&&(f=!1),!f){if(h===0)return this;if(h===this.length())return this.next}var d=a.create(this.domNode.splitText(h));return this.parent.insertBefore(d,this.next),this.text=this.statics.value(this.domNode),d},c.prototype.update=function(h,f){var d=this;h.some(function(p){return p.type==="characterData"&&p.target===d.domNode})&&(this.text=this.statics.value(this.domNode))},c.prototype.value=function(){return this.text},c.blotName="text",c.scope=a.Scope.INLINE_BLOT,c}(o.default);r.default=l},function(n,r,i){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:o.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var u=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>u.length)&&(l=u.length),l-=a.length;var c=u.indexOf(a,l);return c!==-1&&c===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),c=u.length>>>0,h=arguments[1],f,d=0;d<c;d++)if(f=u[d],l.call(h,f,d,u))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,s=1,o=0;function a(y,E,k){if(y==E)return y?[[o,y]]:[];(k<0||y.length<k)&&(k=null);var S=h(y,E),I=y.substring(0,S);y=y.substring(S),E=E.substring(S),S=f(y,E);var R=y.substring(y.length-S);y=y.substring(0,y.length-S),E=E.substring(0,E.length-S);var O=l(y,E);return I&&O.unshift([o,I]),R&&O.push([o,R]),p(O),k!=null&&(O=m(O,k)),O=v(O),O}function l(y,E){var k;if(!y)return[[s,E]];if(!E)return[[i,y]];var S=y.length>E.length?y:E,I=y.length>E.length?E:y,R=S.indexOf(I);if(R!=-1)return k=[[s,S.substring(0,R)],[o,I],[s,S.substring(R+I.length)]],y.length>E.length&&(k[0][0]=k[2][0]=i),k;if(I.length==1)return[[i,y],[s,E]];var O=d(y,E);if(O){var T=O[0],A=O[1],C=O[2],D=O[3],q=O[4],Q=a(T,C),Y=a(A,D);return Q.concat([[o,q]],Y)}return u(y,E)}function u(y,E){for(var k=y.length,S=E.length,I=Math.ceil((k+S)/2),R=I,O=2*I,T=new Array(O),A=new Array(O),C=0;C<O;C++)T[C]=-1,A[C]=-1;T[R+1]=0,A[R+1]=0;for(var D=k-S,q=D%2!=0,Q=0,Y=0,ie=0,X=0,F=0;F<I;F++){for(var N=-F+Q;N<=F-Y;N+=2){var j=R+N,U;N==-F||N!=F&&T[j-1]<T[j+1]?U=T[j+1]:U=T[j-1]+1;for(var J=U-N;U<k&&J<S&&y.charAt(U)==E.charAt(J);)U++,J++;if(T[j]=U,U>k)Y+=2;else if(J>S)Q+=2;else if(q){var K=R+D-N;if(K>=0&&K<O&&A[K]!=-1){var L=k-A[K];if(U>=L)return c(y,E,U,J)}}}for(var x=-F+ie;x<=F-X;x+=2){var K=R+x,L;x==-F||x!=F&&A[K-1]<A[K+1]?L=A[K+1]:L=A[K-1]+1;for(var V=L-x;L<k&&V<S&&y.charAt(k-L-1)==E.charAt(S-V-1);)L++,V++;if(A[K]=L,L>k)X+=2;else if(V>S)ie+=2;else if(!q){var j=R+D-x;if(j>=0&&j<O&&T[j]!=-1){var U=T[j],J=R+U-j;if(L=k-L,U>=L)return c(y,E,U,J)}}}}return[[i,y],[s,E]]}function c(y,E,k,S){var I=y.substring(0,k),R=E.substring(0,S),O=y.substring(k),T=E.substring(S),A=a(I,R),C=a(O,T);return A.concat(C)}function h(y,E){if(!y||!E||y.charAt(0)!=E.charAt(0))return 0;for(var k=0,S=Math.min(y.length,E.length),I=S,R=0;k<I;)y.substring(R,I)==E.substring(R,I)?(k=I,R=k):S=I,I=Math.floor((S-k)/2+k);return I}function f(y,E){if(!y||!E||y.charAt(y.length-1)!=E.charAt(E.length-1))return 0;for(var k=0,S=Math.min(y.length,E.length),I=S,R=0;k<I;)y.substring(y.length-I,y.length-R)==E.substring(E.length-I,E.length-R)?(k=I,R=k):S=I,I=Math.floor((S-k)/2+k);return I}function d(y,E){var k=y.length>E.length?y:E,S=y.length>E.length?E:y;if(k.length<4||S.length*2<k.length)return null;function I(Y,ie,X){for(var F=Y.substring(X,X+Math.floor(Y.length/4)),N=-1,j="",U,J,K,L;(N=ie.indexOf(F,N+1))!=-1;){var x=h(Y.substring(X),ie.substring(N)),V=f(Y.substring(0,X),ie.substring(0,N));j.length<V+x&&(j=ie.substring(N-V,N)+ie.substring(N,N+x),U=Y.substring(0,X-V),J=Y.substring(X+x),K=ie.substring(0,N-V),L=ie.substring(N+x))}return j.length*2>=Y.length?[U,J,K,L,j]:null}var R=I(k,S,Math.ceil(k.length/4)),O=I(k,S,Math.ceil(k.length/2)),T;if(!R&&!O)return null;O?R?T=R[4].length>O[4].length?R:O:T=O:T=R;var A,C,D,q;y.length>E.length?(A=T[0],C=T[1],D=T[2],q=T[3]):(D=T[0],q=T[1],A=T[2],C=T[3]);var Q=T[4];return[A,C,D,q,Q]}function p(y){y.push([o,""]);for(var E=0,k=0,S=0,I="",R="",O;E<y.length;)switch(y[E][0]){case s:S++,R+=y[E][1],E++;break;case i:k++,I+=y[E][1],E++;break;case o:k+S>1?(k!==0&&S!==0&&(O=h(R,I),O!==0&&(E-k-S>0&&y[E-k-S-1][0]==o?y[E-k-S-1][1]+=R.substring(0,O):(y.splice(0,0,[o,R.substring(0,O)]),E++),R=R.substring(O),I=I.substring(O)),O=f(R,I),O!==0&&(y[E][1]=R.substring(R.length-O)+y[E][1],R=R.substring(0,R.length-O),I=I.substring(0,I.length-O))),k===0?y.splice(E-S,k+S,[s,R]):S===0?y.splice(E-k,k+S,[i,I]):y.splice(E-k-S,k+S,[i,I],[s,R]),E=E-k-S+(k?1:0)+(S?1:0)+1):E!==0&&y[E-1][0]==o?(y[E-1][1]+=y[E][1],y.splice(E,1)):E++,S=0,k=0,I="",R="";break}y[y.length-1][1]===""&&y.pop();var T=!1;for(E=1;E<y.length-1;)y[E-1][0]==o&&y[E+1][0]==o&&(y[E][1].substring(y[E][1].length-y[E-1][1].length)==y[E-1][1]?(y[E][1]=y[E-1][1]+y[E][1].substring(0,y[E][1].length-y[E-1][1].length),y[E+1][1]=y[E-1][1]+y[E+1][1],y.splice(E-1,1),T=!0):y[E][1].substring(0,y[E+1][1].length)==y[E+1][1]&&(y[E-1][1]+=y[E+1][1],y[E][1]=y[E][1].substring(y[E+1][1].length)+y[E+1][1],y.splice(E+1,1),T=!0)),E++;T&&p(y)}var g=a;g.INSERT=s,g.DELETE=i,g.EQUAL=o,n.exports=g;function b(y,E){if(E===0)return[o,y];for(var k=0,S=0;S<y.length;S++){var I=y[S];if(I[0]===i||I[0]===o){var R=k+I[1].length;if(E===R)return[S+1,y];if(E<R){y=y.slice();var O=E-k,T=[I[0],I[1].slice(0,O)],A=[I[0],I[1].slice(O)];return y.splice(S,1,T,A),[S+1,y]}else k=R}}throw new Error("cursor_pos is out of bounds!")}function m(y,E){var k=b(y,E),S=k[1],I=k[0],R=S[I],O=S[I+1];if(R==null)return y;if(R[0]!==o)return y;if(O!=null&&R[1]+O[1]===O[1]+R[1])return S.splice(I,2,O,R),_(S,I,2);if(O!=null&&O[1].indexOf(R[1])===0){S.splice(I,2,[O[0],R[1]],[0,R[1]]);var T=O[1].slice(R[1].length);return T.length>0&&S.splice(I+2,0,[O[0],T]),_(S,I,3)}else return y}function v(y){for(var E=!1,k=function(O){return O.charCodeAt(0)>=56320&&O.charCodeAt(0)<=57343},S=function(O){return O.charCodeAt(O.length-1)>=55296&&O.charCodeAt(O.length-1)<=56319},I=2;I<y.length;I+=1)y[I-2][0]===o&&S(y[I-2][1])&&y[I-1][0]===i&&k(y[I-1][1])&&y[I][0]===s&&k(y[I][1])&&(E=!0,y[I-1][1]=y[I-2][1].slice(-1)+y[I-1][1],y[I][1]=y[I-2][1].slice(-1)+y[I][1],y[I-2][1]=y[I-2][1].slice(0,-1));if(!E)return y;for(var R=[],I=0;I<y.length;I+=1)y[I][1].length>0&&R.push(y[I]);return R}function _(y,E,k){for(var S=E+k-1;S>=0&&S>=E-1;S--)if(S+1<y.length){var I=y[S],R=y[S+1];I[0]===R[1]&&y.splice(S,2,[I[0],I[1]+R[1]])}return y}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(s){var o=[];for(var a in s)o.push(a);return o}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?s:o,r.supported=s;function s(a){return Object.prototype.toString.call(a)=="[object Arguments]"}r.unsupported=o;function o(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,s="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(s=!1));function a(u,c,h){this.fn=u,this.context=c,this.once=h||!1}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],h,f;if(this._eventsCount===0)return c;for(f in h=this._events)i.call(h,f)&&c.push(s?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},l.prototype.listeners=function(c,h){var f=s?s+c:c,d=this._events[f];if(h)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var p=0,g=d.length,b=new Array(g);p<g;p++)b[p]=d[p].fn;return b},l.prototype.emit=function(c,h,f,d,p,g){var b=s?s+c:c;if(!this._events[b])return!1;var m=this._events[b],v=arguments.length,_,y;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,h),!0;case 3:return m.fn.call(m.context,h,f),!0;case 4:return m.fn.call(m.context,h,f,d),!0;case 5:return m.fn.call(m.context,h,f,d,p),!0;case 6:return m.fn.call(m.context,h,f,d,p,g),!0}for(y=1,_=new Array(v-1);y<v;y++)_[y-1]=arguments[y];m.fn.apply(m.context,_)}else{var E=m.length,k;for(y=0;y<E;y++)switch(m[y].once&&this.removeListener(c,m[y].fn,void 0,!0),v){case 1:m[y].fn.call(m[y].context);break;case 2:m[y].fn.call(m[y].context,h);break;case 3:m[y].fn.call(m[y].context,h,f);break;case 4:m[y].fn.call(m[y].context,h,f,d);break;default:if(!_)for(k=1,_=new Array(v-1);k<v;k++)_[k-1]=arguments[k];m[y].fn.apply(m[y].context,_)}}return!0},l.prototype.on=function(c,h,f){var d=new a(h,f||this),p=s?s+c:c;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],d]:this._events[p].push(d):(this._events[p]=d,this._eventsCount++),this},l.prototype.once=function(c,h,f){var d=new a(h,f||this,!0),p=s?s+c:c;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],d]:this._events[p].push(d):(this._events[p]=d,this._eventsCount++),this},l.prototype.removeListener=function(c,h,f,d){var p=s?s+c:c;if(!this._events[p])return this;if(!h)return--this._eventsCount===0?this._events=new o:delete this._events[p],this;var g=this._events[p];if(g.fn)g.fn===h&&(!d||g.once)&&(!f||g.context===f)&&(--this._eventsCount===0?this._events=new o:delete this._events[p]);else{for(var b=0,m=[],v=g.length;b<v;b++)(g[b].fn!==h||d&&!g[b].once||f&&g[b].context!==f)&&m.push(g[b]);m.length?this._events[p]=m.length===1?m[0]:m:--this._eventsCount===0?this._events=new o:delete this._events[p]}return this},l.prototype.removeAllListeners=function(c){var h;return c?(h=s?s+c:c,this._events[h]&&(--this._eventsCount===0?this._events=new o:delete this._events[h])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=s,l.EventEmitter=l,typeof n<"u"&&(n.exports=l)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},o=function(){function G(W,te){var Z=[],ne=!0,ue=!1,ce=void 0;try{for(var de=W[Symbol.iterator](),_e;!(ne=(_e=de.next()).done)&&(Z.push(_e.value),!(te&&Z.length===te));ne=!0);}catch(Ie){ue=!0,ce=Ie}finally{try{!ne&&de.return&&de.return()}finally{if(ue)throw ce}}return Z}return function(W,te){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return G(W,te);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function G(W,te){for(var Z=0;Z<te.length;Z++){var ne=te[Z];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(W,ne.key,ne)}}return function(W,te,Z){return te&&G(W.prototype,te),Z&&G(W,Z),W}}(),l=i(3),u=A(l),c=i(2),h=A(c),f=i(0),d=A(f),p=i(5),g=A(p),b=i(10),m=A(b),v=i(9),_=A(v),y=i(36),E=i(37),k=i(13),S=A(k),I=i(26),R=i(38),O=i(39),T=i(40);function A(G){return G&&G.__esModule?G:{default:G}}function C(G,W,te){return W in G?Object.defineProperty(G,W,{value:te,enumerable:!0,configurable:!0,writable:!0}):G[W]=te,G}function D(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}function q(G,W){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:G}function Q(G,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);G.prototype=Object.create(W&&W.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(G,W):G.__proto__=W)}var Y=(0,m.default)("quill:clipboard"),ie="__ql-matcher",X=[[Node.TEXT_NODE,ae],[Node.TEXT_NODE,z],["br",fe],[Node.ELEMENT_NODE,z],[Node.ELEMENT_NODE,ee],[Node.ELEMENT_NODE,re],[Node.ELEMENT_NODE,$],[Node.ELEMENT_NODE,se],["li",B],["b",V.bind(V,"bold")],["i",V.bind(V,"italic")],["style",M]],F=[y.AlignAttribute,R.DirectionAttribute].reduce(function(G,W){return G[W.keyName]=W,G},{}),N=[y.AlignStyle,E.BackgroundStyle,I.ColorStyle,R.DirectionStyle,O.FontStyle,T.SizeStyle].reduce(function(G,W){return G[W.keyName]=W,G},{}),j=function(G){Q(W,G);function W(te,Z){D(this,W);var ne=q(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,te,Z));return ne.quill.root.addEventListener("paste",ne.onPaste.bind(ne)),ne.container=ne.quill.addContainer("ql-clipboard"),ne.container.setAttribute("contenteditable",!0),ne.container.setAttribute("tabindex",-1),ne.matchers=[],X.concat(ne.options.matchers).forEach(function(ue){var ce=o(ue,2),de=ce[0],_e=ce[1];!Z.matchVisual&&_e===re||ne.addMatcher(de,_e)}),ne}return a(W,[{key:"addMatcher",value:function(Z,ne){this.matchers.push([Z,ne])}},{key:"convert",value:function(Z){if(typeof Z=="string")return this.container.innerHTML=Z.replace(/\>\r?\n +\</g,"><"),this.convert();var ne=this.quill.getFormat(this.quill.selection.savedRange.index);if(ne[S.default.blotName]){var ue=this.container.innerText;return this.container.innerHTML="",new h.default().insert(ue,C({},S.default.blotName,ne[S.default.blotName]))}var ce=this.prepareMatching(),de=o(ce,2),_e=de[0],Ie=de[1],me=x(this.container,_e,Ie);return K(me,`
`)&&me.ops[me.ops.length-1].attributes==null&&(me=me.compose(new h.default().retain(me.length()-1).delete(1))),Y.log("convert",this.container.innerHTML,me),this.container.innerHTML="",me}},{key:"dangerouslyPasteHTML",value:function(Z,ne){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof Z=="string")this.quill.setContents(this.convert(Z),ne),this.quill.setSelection(0,g.default.sources.SILENT);else{var ce=this.convert(ne);this.quill.updateContents(new h.default().retain(Z).concat(ce),ue),this.quill.setSelection(Z+ce.length(),g.default.sources.SILENT)}}},{key:"onPaste",value:function(Z){var ne=this;if(!(Z.defaultPrevented||!this.quill.isEnabled())){var ue=this.quill.getSelection(),ce=new h.default().retain(ue.index),de=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(g.default.sources.SILENT),setTimeout(function(){ce=ce.concat(ne.convert()).delete(ue.length),ne.quill.updateContents(ce,g.default.sources.USER),ne.quill.setSelection(ce.length()-ue.length,g.default.sources.SILENT),ne.quill.scrollingContainer.scrollTop=de,ne.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Z=this,ne=[],ue=[];return this.matchers.forEach(function(ce){var de=o(ce,2),_e=de[0],Ie=de[1];switch(_e){case Node.TEXT_NODE:ue.push(Ie);break;case Node.ELEMENT_NODE:ne.push(Ie);break;default:[].forEach.call(Z.container.querySelectorAll(_e),function(me){me[ie]=me[ie]||[],me[ie].push(Ie)});break}}),[ne,ue]}}]),W}(_.default);j.DEFAULTS={matchers:[],matchVisual:!0};function U(G,W,te){return(typeof W>"u"?"undefined":s(W))==="object"?Object.keys(W).reduce(function(Z,ne){return U(Z,ne,W[ne])},G):G.reduce(function(Z,ne){return ne.attributes&&ne.attributes[W]?Z.push(ne):Z.insert(ne.insert,(0,u.default)({},C({},W,te),ne.attributes))},new h.default)}function J(G){if(G.nodeType!==Node.ELEMENT_NODE)return{};var W="__ql-computed-style";return G[W]||(G[W]=window.getComputedStyle(G))}function K(G,W){for(var te="",Z=G.ops.length-1;Z>=0&&te.length<W.length;--Z){var ne=G.ops[Z];if(typeof ne.insert!="string")break;te=ne.insert+te}return te.slice(-1*W.length)===W}function L(G){if(G.childNodes.length===0)return!1;var W=J(G);return["block","list-item"].indexOf(W.display)>-1}function x(G,W,te){return G.nodeType===G.TEXT_NODE?te.reduce(function(Z,ne){return ne(G,Z)},new h.default):G.nodeType===G.ELEMENT_NODE?[].reduce.call(G.childNodes||[],function(Z,ne){var ue=x(ne,W,te);return ne.nodeType===G.ELEMENT_NODE&&(ue=W.reduce(function(ce,de){return de(ne,ce)},ue),ue=(ne[ie]||[]).reduce(function(ce,de){return de(ne,ce)},ue)),Z.concat(ue)},new h.default):new h.default}function V(G,W,te){return U(te,G,!0)}function $(G,W){var te=d.default.Attributor.Attribute.keys(G),Z=d.default.Attributor.Class.keys(G),ne=d.default.Attributor.Style.keys(G),ue={};return te.concat(Z).concat(ne).forEach(function(ce){var de=d.default.query(ce,d.default.Scope.ATTRIBUTE);de!=null&&(ue[de.attrName]=de.value(G),ue[de.attrName])||(de=F[ce],de!=null&&(de.attrName===ce||de.keyName===ce)&&(ue[de.attrName]=de.value(G)||void 0),de=N[ce],de!=null&&(de.attrName===ce||de.keyName===ce)&&(de=N[ce],ue[de.attrName]=de.value(G)||void 0))}),Object.keys(ue).length>0&&(W=U(W,ue)),W}function ee(G,W){var te=d.default.query(G);if(te==null)return W;if(te.prototype instanceof d.default.Embed){var Z={},ne=te.value(G);ne!=null&&(Z[te.blotName]=ne,W=new h.default().insert(Z,te.formats(G)))}else typeof te.formats=="function"&&(W=U(W,te.blotName,te.formats(G)));return W}function fe(G,W){return K(W,`
`)||W.insert(`
`),W}function M(){return new h.default}function B(G,W){var te=d.default.query(G);if(te==null||te.blotName!=="list-item"||!K(W,`
`))return W;for(var Z=-1,ne=G.parentNode;!ne.classList.contains("ql-clipboard");)(d.default.query(ne)||{}).blotName==="list"&&(Z+=1),ne=ne.parentNode;return Z<=0?W:W.compose(new h.default().retain(W.length()-1).retain(1,{indent:Z}))}function z(G,W){return K(W,`
`)||(L(G)||W.length()>0&&G.nextSibling&&L(G.nextSibling))&&W.insert(`
`),W}function re(G,W){if(L(G)&&G.nextElementSibling!=null&&!K(W,`

`)){var te=G.offsetHeight+parseFloat(J(G).marginTop)+parseFloat(J(G).marginBottom);G.nextElementSibling.offsetTop>G.offsetTop+te*1.5&&W.insert(`
`)}return W}function se(G,W){var te={},Z=G.style||{};return Z.fontStyle&&J(G).fontStyle==="italic"&&(te.italic=!0),Z.fontWeight&&(J(G).fontWeight.startsWith("bold")||parseInt(J(G).fontWeight)>=700)&&(te.bold=!0),Object.keys(te).length>0&&(W=U(W,te)),parseFloat(Z.textIndent||0)>0&&(W=new h.default().insert("	").concat(W)),W}function ae(G,W){var te=G.data;if(G.parentNode.tagName==="O:P")return W.insert(te.trim());if(te.trim().length===0&&G.parentNode.classList.contains("ql-clipboard"))return W;if(!J(G.parentNode).whiteSpace.startsWith("pre")){var Z=function(ue,ce){return ce=ce.replace(/[^\u00a0]/g,""),ce.length<1&&ue?" ":ce};te=te.replace(/\r\n/g," ").replace(/\n/g," "),te=te.replace(/\s\s+/g,Z.bind(Z,!0)),(G.previousSibling==null&&L(G.parentNode)||G.previousSibling!=null&&L(G.previousSibling))&&(te=te.replace(/^\s+/,Z.bind(Z,!1))),(G.nextSibling==null&&L(G.parentNode)||G.nextSibling!=null&&L(G.nextSibling))&&(te=te.replace(/\s+$/,Z.bind(Z,!1)))}return W.insert(te)}r.default=j,r.matchAttributor=$,r.matchBlot=ee,r.matchNewline=z,r.matchSpacing=re,r.matchText=ae},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function p(g,b){for(var m=0;m<b.length;m++){var v=b[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,b,m){return b&&p(g.prototype,b),m&&p(g,m),g}}(),o=function p(g,b,m){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,b);if(v===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:p(_,b,m)}else{if("value"in v)return v.value;var y=v.get;return y===void 0?void 0:y.call(m)}},a=i(6),l=u(a);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function f(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var d=function(p){f(g,p);function g(){return c(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"optimize",value:function(m){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,m),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),g}(l.default);d.blotName="bold",d.tagName=["STRONG","B"],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var s=function(){function T(A,C){var D=[],q=!0,Q=!1,Y=void 0;try{for(var ie=A[Symbol.iterator](),X;!(q=(X=ie.next()).done)&&(D.push(X.value),!(C&&D.length===C));q=!0);}catch(F){Q=!0,Y=F}finally{try{!q&&ie.return&&ie.return()}finally{if(Q)throw Y}}return D}return function(A,C){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return T(A,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function T(A,C){for(var D=0;D<C.length;D++){var q=C[D];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(A,q.key,q)}}return function(A,C,D){return C&&T(A.prototype,C),D&&T(A,D),A}}(),a=i(2),l=m(a),u=i(0),c=m(u),h=i(5),f=m(h),d=i(10),p=m(d),g=i(9),b=m(g);function m(T){return T&&T.__esModule?T:{default:T}}function v(T,A,C){return A in T?Object.defineProperty(T,A,{value:C,enumerable:!0,configurable:!0,writable:!0}):T[A]=C,T}function _(T,A){if(!(T instanceof A))throw new TypeError("Cannot call a class as a function")}function y(T,A){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:T}function E(T,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);T.prototype=Object.create(A&&A.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(T,A):T.__proto__=A)}var k=(0,p.default)("quill:toolbar"),S=function(T){E(A,T);function A(C,D){_(this,A);var q=y(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,D));if(Array.isArray(q.options.container)){var Q=document.createElement("div");R(Q,q.options.container),C.container.parentNode.insertBefore(Q,C.container),q.container=Q}else typeof q.options.container=="string"?q.container=document.querySelector(q.options.container):q.container=q.options.container;if(!(q.container instanceof HTMLElement)){var Y;return Y=k.error("Container required for toolbar",q.options),y(q,Y)}return q.container.classList.add("ql-toolbar"),q.controls=[],q.handlers={},Object.keys(q.options.handlers).forEach(function(ie){q.addHandler(ie,q.options.handlers[ie])}),[].forEach.call(q.container.querySelectorAll("button, select"),function(ie){q.attach(ie)}),q.quill.on(f.default.events.EDITOR_CHANGE,function(ie,X){ie===f.default.events.SELECTION_CHANGE&&q.update(X)}),q.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var ie=q.quill.selection.getRange(),X=s(ie,1),F=X[0];q.update(F)}),q}return o(A,[{key:"addHandler",value:function(D,q){this.handlers[D]=q}},{key:"attach",value:function(D){var q=this,Q=[].find.call(D.classList,function(ie){return ie.indexOf("ql-")===0});if(Q){if(Q=Q.slice(3),D.tagName==="BUTTON"&&D.setAttribute("type","button"),this.handlers[Q]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Q]==null){k.warn("ignoring attaching to disabled format",Q,D);return}if(c.default.query(Q)==null){k.warn("ignoring attaching to nonexistent format",Q,D);return}}var Y=D.tagName==="SELECT"?"change":"click";D.addEventListener(Y,function(ie){var X=void 0;if(D.tagName==="SELECT"){if(D.selectedIndex<0)return;var F=D.options[D.selectedIndex];F.hasAttribute("selected")?X=!1:X=F.value||!1}else D.classList.contains("ql-active")?X=!1:X=D.value||!D.hasAttribute("value"),ie.preventDefault();q.quill.focus();var N=q.quill.selection.getRange(),j=s(N,1),U=j[0];if(q.handlers[Q]!=null)q.handlers[Q].call(q,X);else if(c.default.query(Q).prototype instanceof c.default.Embed){if(X=prompt("Enter "+Q),!X)return;q.quill.updateContents(new l.default().retain(U.index).delete(U.length).insert(v({},Q,X)),f.default.sources.USER)}else q.quill.format(Q,X,f.default.sources.USER);q.update(U)}),this.controls.push([Q,D])}}},{key:"update",value:function(D){var q=D==null?{}:this.quill.getFormat(D);this.controls.forEach(function(Q){var Y=s(Q,2),ie=Y[0],X=Y[1];if(X.tagName==="SELECT"){var F=void 0;if(D==null)F=null;else if(q[ie]==null)F=X.querySelector("option[selected]");else if(!Array.isArray(q[ie])){var N=q[ie];typeof N=="string"&&(N=N.replace(/\"/g,'\\"')),F=X.querySelector('option[value="'+N+'"]')}F==null?(X.value="",X.selectedIndex=-1):F.selected=!0}else if(D==null)X.classList.remove("ql-active");else if(X.hasAttribute("value")){var j=q[ie]===X.getAttribute("value")||q[ie]!=null&&q[ie].toString()===X.getAttribute("value")||q[ie]==null&&!X.getAttribute("value");X.classList.toggle("ql-active",j)}else X.classList.toggle("ql-active",q[ie]!=null)})}}]),A}(b.default);S.DEFAULTS={};function I(T,A,C){var D=document.createElement("button");D.setAttribute("type","button"),D.classList.add("ql-"+A),C!=null&&(D.value=C),T.appendChild(D)}function R(T,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(C){var D=document.createElement("span");D.classList.add("ql-formats"),C.forEach(function(q){if(typeof q=="string")I(D,q);else{var Q=Object.keys(q)[0],Y=q[Q];Array.isArray(Y)?O(D,Q,Y):I(D,Q,Y)}}),T.appendChild(D)})}function O(T,A,C){var D=document.createElement("select");D.classList.add("ql-"+A),C.forEach(function(q){var Q=document.createElement("option");q!==!1?Q.setAttribute("value",q):Q.setAttribute("selected","selected"),D.appendChild(Q)}),T.appendChild(D)}S.DEFAULTS={container:null,handlers:{clean:function(){var A=this,C=this.quill.getSelection();if(C!=null)if(C.length==0){var D=this.quill.getFormat();Object.keys(D).forEach(function(q){c.default.query(q,c.default.Scope.INLINE)!=null&&A.quill.format(q,!1)})}else this.quill.removeFormat(C,f.default.sources.USER)},direction:function(A){var C=this.quill.getFormat().align;A==="rtl"&&C==null?this.quill.format("align","right",f.default.sources.USER):!A&&C==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",A,f.default.sources.USER)},indent:function(A){var C=this.quill.getSelection(),D=this.quill.getFormat(C),q=parseInt(D.indent||0);if(A==="+1"||A==="-1"){var Q=A==="+1"?1:-1;D.direction==="rtl"&&(Q*=-1),this.quill.format("indent",q+Q,f.default.sources.USER)}},link:function(A){A===!0&&(A=prompt("Enter link URL:")),this.quill.format("link",A,f.default.sources.USER)},list:function(A){var C=this.quill.getSelection(),D=this.quill.getFormat(C);A==="check"?D.list==="checked"||D.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",A,f.default.sources.USER)}}},r.default=S,r.addControls=R},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function p(g,b){for(var m=0;m<b.length;m++){var v=b[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,b,m){return b&&p(g.prototype,b),m&&p(g,m),g}}(),o=function p(g,b,m){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,b);if(v===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:p(_,b,m)}else{if("value"in v)return v.value;var y=v.get;return y===void 0?void 0:y.call(m)}},a=i(28),l=u(a);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function f(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var d=function(p){f(g,p);function g(b,m){c(this,g);var v=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,b));return v.label.innerHTML=m,v.container.classList.add("ql-color-picker"),[].slice.call(v.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(_){_.classList.add("ql-primary")}),v}return s(g,[{key:"buildItem",value:function(m){var v=o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"buildItem",this).call(this,m);return v.style.backgroundColor=m.getAttribute("value")||"",v}},{key:"selectItem",value:function(m,v){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,m,v);var _=this.label.querySelector(".ql-color-label"),y=m&&m.getAttribute("data-value")||"";_&&(_.tagName==="line"?_.style.stroke=y:_.style.fill=y)}}]),g}(l.default);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function p(g,b){for(var m=0;m<b.length;m++){var v=b[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,b,m){return b&&p(g.prototype,b),m&&p(g,m),g}}(),o=function p(g,b,m){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,b);if(v===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:p(_,b,m)}else{if("value"in v)return v.value;var y=v.get;return y===void 0?void 0:y.call(m)}},a=i(28),l=u(a);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function f(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var d=function(p){f(g,p);function g(b,m){c(this,g);var v=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,b));return v.container.classList.add("ql-icon-picker"),[].forEach.call(v.container.querySelectorAll(".ql-picker-item"),function(_){_.innerHTML=m[_.getAttribute("data-value")||""]}),v.defaultItem=v.container.querySelector(".ql-selected"),v.selectItem(v.defaultItem),v}return s(g,[{key:"selectItem",value:function(m,v){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,m,v),m=m||this.defaultItem,this.label.innerHTML=m.innerHTML}}]),g}(l.default);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function l(u,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,c,h){return c&&l(u.prototype,c),h&&l(u,h),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(u,c){var h=this;o(this,l),this.quill=u,this.boundsContainer=c||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return s(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(c){var h=c.left+c.width/2-this.root.offsetWidth/2,f=c.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var d=this.boundsContainer.getBoundingClientRect(),p=this.root.getBoundingClientRect(),g=0;if(p.right>d.right&&(g=d.right-p.right,this.root.style.left=h+g+"px"),p.left<d.left&&(g=d.left-p.left,this.root.style.left=h+g+"px"),p.bottom>d.bottom){var b=p.bottom-p.top,m=c.bottom-c.top+b;this.root.style.top=f-m+"px",this.root.classList.add("ql-flip")}return g}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function O(T,A){var C=[],D=!0,q=!1,Q=void 0;try{for(var Y=T[Symbol.iterator](),ie;!(D=(ie=Y.next()).done)&&(C.push(ie.value),!(A&&C.length===A));D=!0);}catch(X){q=!0,Q=X}finally{try{!D&&Y.return&&Y.return()}finally{if(q)throw Q}}return C}return function(T,A){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return O(T,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function O(T,A,C){T===null&&(T=Function.prototype);var D=Object.getOwnPropertyDescriptor(T,A);if(D===void 0){var q=Object.getPrototypeOf(T);return q===null?void 0:O(q,A,C)}else{if("value"in D)return D.value;var Q=D.get;return Q===void 0?void 0:Q.call(C)}},a=function(){function O(T,A){for(var C=0;C<A.length;C++){var D=A[C];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(T,D.key,D)}}return function(T,A,C){return A&&O(T.prototype,A),C&&O(T,C),T}}(),l=i(3),u=_(l),c=i(8),h=_(c),f=i(43),d=_(f),p=i(27),g=_(p),b=i(15),m=i(41),v=_(m);function _(O){return O&&O.__esModule?O:{default:O}}function y(O,T){if(!(O instanceof T))throw new TypeError("Cannot call a class as a function")}function E(O,T){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:O}function k(O,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);O.prototype=Object.create(T&&T.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(O,T):O.__proto__=T)}var S=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],I=function(O){k(T,O);function T(A,C){y(this,T),C.modules.toolbar!=null&&C.modules.toolbar.container==null&&(C.modules.toolbar.container=S);var D=E(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,A,C));return D.quill.container.classList.add("ql-snow"),D}return a(T,[{key:"extendToolbar",value:function(C){C.container.classList.add("ql-snow"),this.buildButtons([].slice.call(C.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(C.container.querySelectorAll("select")),v.default),this.tooltip=new R(this.quill,this.options.bounds),C.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(D,q){C.handlers.link.call(C,!q.format.link)})}}]),T}(d.default);I.DEFAULTS=(0,u.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){if(T){var A=this.quill.getSelection();if(A==null||A.length==0)return;var C=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(C)&&C.indexOf("mailto:")!==0&&(C="mailto:"+C);var D=this.quill.theme.tooltip;D.edit("link",C)}else this.quill.format("link",!1)}}}}});var R=function(O){k(T,O);function T(A,C){y(this,T);var D=E(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,A,C));return D.preview=D.root.querySelector("a.ql-preview"),D}return a(T,[{key:"listen",value:function(){var C=this;o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(D){C.root.classList.contains("ql-editing")?C.save():C.edit("link",C.preview.textContent),D.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(D){if(C.linkRange!=null){var q=C.linkRange;C.restoreFocus(),C.quill.formatText(q,"link",!1,h.default.sources.USER),delete C.linkRange}D.preventDefault(),C.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(D,q,Q){if(D!=null){if(D.length===0&&Q===h.default.sources.USER){var Y=C.quill.scroll.descendant(g.default,D.index),ie=s(Y,2),X=ie[0],F=ie[1];if(X!=null){C.linkRange=new b.Range(D.index-F,X.length());var N=g.default.formats(X.domNode);C.preview.textContent=N,C.preview.setAttribute("href",N),C.show(),C.position(C.quill.getBounds(C.linkRange));return}}else delete C.linkRange;C.hide()}})}},{key:"show",value:function(){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),T}(f.BaseTooltip);R.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=I},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(29),o=ne(s),a=i(36),l=i(38),u=i(64),c=i(65),h=ne(c),f=i(66),d=ne(f),p=i(67),g=ne(p),b=i(37),m=i(26),v=i(39),_=i(40),y=i(56),E=ne(y),k=i(68),S=ne(k),I=i(27),R=ne(I),O=i(69),T=ne(O),A=i(70),C=ne(A),D=i(71),q=ne(D),Q=i(72),Y=ne(Q),ie=i(73),X=ne(ie),F=i(13),N=ne(F),j=i(74),U=ne(j),J=i(75),K=ne(J),L=i(57),x=ne(L),V=i(41),$=ne(V),ee=i(28),fe=ne(ee),M=i(59),B=ne(M),z=i(60),re=ne(z),se=i(61),ae=ne(se),G=i(108),W=ne(G),te=i(62),Z=ne(te);function ne(ue){return ue&&ue.__esModule?ue:{default:ue}}o.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":b.BackgroundClass,"attributors/class/color":m.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":v.FontClass,"attributors/class/size":_.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":b.BackgroundStyle,"attributors/style/color":m.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":v.FontStyle,"attributors/style/size":_.SizeStyle},!0),o.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":u.IndentClass,"formats/background":b.BackgroundStyle,"formats/color":m.ColorStyle,"formats/font":v.FontClass,"formats/size":_.SizeClass,"formats/blockquote":h.default,"formats/code-block":N.default,"formats/header":d.default,"formats/list":g.default,"formats/bold":E.default,"formats/code":F.Code,"formats/italic":S.default,"formats/link":R.default,"formats/script":T.default,"formats/strike":C.default,"formats/underline":q.default,"formats/image":Y.default,"formats/video":X.default,"formats/list/item":p.ListItem,"modules/formula":U.default,"modules/syntax":K.default,"modules/toolbar":x.default,"themes/bubble":W.default,"themes/snow":Z.default,"ui/icons":$.default,"ui/picker":fe.default,"ui/icon-picker":re.default,"ui/color-picker":B.default,"ui/tooltip":ae.default},!0),r.default=o.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var s=function(){function g(b,m){for(var v=0;v<m.length;v++){var _=m[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,m,v){return m&&g(b.prototype,m),v&&g(b,v),b}}(),o=function g(b,m,v){b===null&&(b=Function.prototype);var _=Object.getOwnPropertyDescriptor(b,m);if(_===void 0){var y=Object.getPrototypeOf(b);return y===null?void 0:g(y,m,v)}else{if("value"in _)return _.value;var E=_.get;return E===void 0?void 0:E.call(v)}},a=i(0),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function h(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function f(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var d=function(g){f(b,g);function b(){return c(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"add",value:function(v,_){if(_==="+1"||_==="-1"){var y=this.value(v)||0;_=_==="+1"?y+1:y-1}return _===0?(this.remove(v),!0):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"add",this).call(this,v,_)}},{key:"canAdd",value:function(v,_){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,v,_)||o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,v,parseInt(_))}},{key:"value",value:function(v){return parseInt(o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,v))||void 0}}]),b}(l.default.Attributor.Class),p=new d("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(4),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);h.blotName="blockquote",h.tagName="blockquote",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function d(p,g){for(var b=0;b<g.length;b++){var m=g[b];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(p,m.key,m)}}return function(p,g,b){return g&&d(p.prototype,g),b&&d(p,b),p}}(),o=i(4),a=l(o);function l(d){return d&&d.__esModule?d:{default:d}}function u(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function c(d,p){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:d}function h(d,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);d.prototype=Object.create(p&&p.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(d,p):d.__proto__=p)}var f=function(d){h(p,d);function p(){return u(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return s(p,null,[{key:"formats",value:function(b){return this.tagName.indexOf(b.tagName)+1}}]),p}(a.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],r.default=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var s=function(){function y(E,k){for(var S=0;S<k.length;S++){var I=k[S];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(E,I.key,I)}}return function(E,k,S){return k&&y(E.prototype,k),S&&y(E,S),E}}(),o=function y(E,k,S){E===null&&(E=Function.prototype);var I=Object.getOwnPropertyDescriptor(E,k);if(I===void 0){var R=Object.getPrototypeOf(E);return R===null?void 0:y(R,k,S)}else{if("value"in I)return I.value;var O=I.get;return O===void 0?void 0:O.call(S)}},a=i(0),l=d(a),u=i(4),c=d(u),h=i(25),f=d(h);function d(y){return y&&y.__esModule?y:{default:y}}function p(y,E,k){return E in y?Object.defineProperty(y,E,{value:k,enumerable:!0,configurable:!0,writable:!0}):y[E]=k,y}function g(y,E){if(!(y instanceof E))throw new TypeError("Cannot call a class as a function")}function b(y,E){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:y}function m(y,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);y.prototype=Object.create(E&&E.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(y,E):y.__proto__=E)}var v=function(y){m(E,y);function E(){return g(this,E),b(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return s(E,[{key:"format",value:function(S,I){S===_.blotName&&!I?this.replaceWith(l.default.create(this.statics.scope)):o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,S,I)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(S,I){return this.parent.isolate(this.offset(this.parent),this.length()),S===this.parent.statics.blotName?(this.parent.replaceWith(S,I),this):(this.parent.unwrap(),o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,S,I))}}],[{key:"formats",value:function(S){return S.tagName===this.tagName?void 0:o(E.__proto__||Object.getPrototypeOf(E),"formats",this).call(this,S)}}]),E}(c.default);v.blotName="list-item",v.tagName="LI";var _=function(y){m(E,y),s(E,null,[{key:"create",value:function(S){var I=S==="ordered"?"OL":"UL",R=o(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,I);return(S==="checked"||S==="unchecked")&&R.setAttribute("data-checked",S==="checked"),R}},{key:"formats",value:function(S){if(S.tagName==="OL")return"ordered";if(S.tagName==="UL")return S.hasAttribute("data-checked")?S.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function E(k){g(this,E);var S=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,k)),I=function(O){if(O.target.parentNode===k){var T=S.statics.formats(k),A=l.default.find(O.target);T==="checked"?A.format("list","unchecked"):T==="unchecked"&&A.format("list","checked")}};return k.addEventListener("touchstart",I),k.addEventListener("mousedown",I),S}return s(E,[{key:"format",value:function(S,I){this.children.length>0&&this.children.tail.format(S,I)}},{key:"formats",value:function(){return p({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(S,I){if(S instanceof v)o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,S,I);else{var R=I==null?this.length():I.offset(this),O=this.split(R);O.parent.insertBefore(S,O)}}},{key:"optimize",value:function(S){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,S);var I=this.next;I!=null&&I.prev===this&&I.statics.blotName===this.statics.blotName&&I.domNode.tagName===this.domNode.tagName&&I.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(I.moveChildren(this),I.remove())}},{key:"replace",value:function(S){if(S.statics.blotName!==this.statics.blotName){var I=l.default.create(this.statics.defaultChild);S.moveChildren(I),this.appendChild(I)}o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,S)}}]),E}(f.default);_.blotName="list",_.scope=l.default.Scope.BLOCK_BLOT,_.tagName=["OL","UL"],_.defaultChild="list-item",_.allowedChildren=[v],r.ListItem=v,r.default=_},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(56),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);h.blotName="italic",h.tagName=["EM","I"],r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function p(g,b){for(var m=0;m<b.length;m++){var v=b[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,b,m){return b&&p(g.prototype,b),m&&p(g,m),g}}(),o=function p(g,b,m){g===null&&(g=Function.prototype);var v=Object.getOwnPropertyDescriptor(g,b);if(v===void 0){var _=Object.getPrototypeOf(g);return _===null?void 0:p(_,b,m)}else{if("value"in v)return v.value;var y=v.get;return y===void 0?void 0:y.call(m)}},a=i(6),l=u(a);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function h(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function f(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var d=function(p){f(g,p);function g(){return c(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,null,[{key:"create",value:function(m){return m==="super"?document.createElement("sup"):m==="sub"?document.createElement("sub"):o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,m)}},{key:"formats",value:function(m){if(m.tagName==="SUB")return"sub";if(m.tagName==="SUP")return"super"}}]),g}(l.default);d.blotName="script",d.tagName=["SUB","SUP"],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);h.blotName="strike",h.tagName="S",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(o.default);h.blotName="underline",h.tagName="U",r.default=h},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function b(m,v){for(var _=0;_<v.length;_++){var y=v[_];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,v,_){return v&&b(m.prototype,v),_&&b(m,_),m}}(),o=function b(m,v,_){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,v);if(y===void 0){var E=Object.getPrototypeOf(m);return E===null?void 0:b(E,v,_)}else{if("value"in y)return y.value;var k=y.get;return k===void 0?void 0:k.call(_)}},a=i(0),l=c(a),u=i(27);function c(b){return b&&b.__esModule?b:{default:b}}function h(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}function f(b,m){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:b}function d(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(b,m):b.__proto__=m)}var p=["alt","height","width"],g=function(b){d(m,b);function m(){return h(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"format",value:function(_,y){p.indexOf(_)>-1?y?this.domNode.setAttribute(_,y):this.domNode.removeAttribute(_):o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,_,y)}}],[{key:"create",value:function(_){var y=o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,_);return typeof _=="string"&&y.setAttribute("src",this.sanitize(_)),y}},{key:"formats",value:function(_){return p.reduce(function(y,E){return _.hasAttribute(E)&&(y[E]=_.getAttribute(E)),y},{})}},{key:"match",value:function(_){return/\.(jpe?g|gif|png)$/.test(_)||/^data:image\/.+;base64/.test(_)}},{key:"sanitize",value:function(_){return(0,u.sanitize)(_,["http","https","data"])?_:"//:0"}},{key:"value",value:function(_){return _.getAttribute("src")}}]),m}(l.default.Embed);g.blotName="image",g.tagName="IMG",r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function b(m,v){for(var _=0;_<v.length;_++){var y=v[_];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(m,y.key,y)}}return function(m,v,_){return v&&b(m.prototype,v),_&&b(m,_),m}}(),o=function b(m,v,_){m===null&&(m=Function.prototype);var y=Object.getOwnPropertyDescriptor(m,v);if(y===void 0){var E=Object.getPrototypeOf(m);return E===null?void 0:b(E,v,_)}else{if("value"in y)return y.value;var k=y.get;return k===void 0?void 0:k.call(_)}},a=i(4),l=i(27),u=c(l);function c(b){return b&&b.__esModule?b:{default:b}}function h(b,m){if(!(b instanceof m))throw new TypeError("Cannot call a class as a function")}function f(b,m){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:b}function d(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);b.prototype=Object.create(m&&m.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(b,m):b.__proto__=m)}var p=["height","width"],g=function(b){d(m,b);function m(){return h(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"format",value:function(_,y){p.indexOf(_)>-1?y?this.domNode.setAttribute(_,y):this.domNode.removeAttribute(_):o(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,_,y)}}],[{key:"create",value:function(_){var y=o(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,_);return y.setAttribute("frameborder","0"),y.setAttribute("allowfullscreen",!0),y.setAttribute("src",this.sanitize(_)),y}},{key:"formats",value:function(_){return p.reduce(function(y,E){return _.hasAttribute(E)&&(y[E]=_.getAttribute(E)),y},{})}},{key:"sanitize",value:function(_){return u.default.sanitize(_)}},{key:"value",value:function(_){return _.getAttribute("src")}}]),m}(a.BlockEmbed);g.blotName="video",g.className="ql-video",g.tagName="IFRAME",r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var s=function(){function _(y,E){for(var k=0;k<E.length;k++){var S=E[k];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,E,k){return E&&_(y.prototype,E),k&&_(y,k),y}}(),o=function _(y,E,k){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,E);if(S===void 0){var I=Object.getPrototypeOf(y);return I===null?void 0:_(I,E,k)}else{if("value"in S)return S.value;var R=S.get;return R===void 0?void 0:R.call(k)}},a=i(35),l=d(a),u=i(5),c=d(u),h=i(9),f=d(h);function d(_){return _&&_.__esModule?_:{default:_}}function p(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function g(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:_}function b(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}var m=function(_){b(y,_);function y(){return p(this,y),g(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,null,[{key:"create",value:function(k){var S=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,k);return typeof k=="string"&&(window.katex.render(k,S,{throwOnError:!1,errorColor:"#f00"}),S.setAttribute("data-value",k)),S}},{key:"value",value:function(k){return k.getAttribute("data-value")}}]),y}(l.default);m.blotName="formula",m.className="ql-formula",m.tagName="SPAN";var v=function(_){b(y,_),s(y,null,[{key:"register",value:function(){c.default.register(m,!0)}}]);function y(){p(this,y);var E=g(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return E}return y}(f.default);r.FormulaBlot=m,r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var s=function(){function k(S,I){for(var R=0;R<I.length;R++){var O=I[R];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(S,O.key,O)}}return function(S,I,R){return I&&k(S.prototype,I),R&&k(S,R),S}}(),o=function k(S,I,R){S===null&&(S=Function.prototype);var O=Object.getOwnPropertyDescriptor(S,I);if(O===void 0){var T=Object.getPrototypeOf(S);return T===null?void 0:k(T,I,R)}else{if("value"in O)return O.value;var A=O.get;return A===void 0?void 0:A.call(R)}},a=i(0),l=g(a),u=i(5),c=g(u),h=i(9),f=g(h),d=i(13),p=g(d);function g(k){return k&&k.__esModule?k:{default:k}}function b(k,S){if(!(k instanceof S))throw new TypeError("Cannot call a class as a function")}function m(k,S){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:k}function v(k,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);k.prototype=Object.create(S&&S.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(k,S):k.__proto__=S)}var _=function(k){v(S,k);function S(){return b(this,S),m(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return s(S,[{key:"replaceWith",value:function(R){this.domNode.textContent=this.domNode.textContent,this.attach(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,R)}},{key:"highlight",value:function(R){var O=this.domNode.textContent;this.cachedText!==O&&((O.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=R(O),this.domNode.normalize(),this.attach()),this.cachedText=O)}}]),S}(p.default);_.className="ql-syntax";var y=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),E=function(k){v(S,k),s(S,null,[{key:"register",value:function(){c.default.register(y,!0),c.default.register(_,!0)}}]);function S(I,R){b(this,S);var O=m(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,I,R));if(typeof O.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var T=null;return O.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(T),T=setTimeout(function(){O.highlight(),T=null},O.options.interval)}),O.highlight(),O}return s(S,[{key:"highlight",value:function(){var R=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var O=this.quill.getSelection();this.quill.scroll.descendants(_).forEach(function(T){T.highlight(R.options.highlight)}),this.quill.update(c.default.sources.SILENT),O!=null&&this.quill.setSelection(O,c.default.sources.SILENT)}}}]),S}(f.default);E.DEFAULTS={highlight:function(){return window.hljs==null?null:function(k){var S=window.hljs.highlightAuto(k);return S.value}}(),interval:1e3},r.CodeBlock=_,r.CodeToken=y,r.default=E},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var s=function S(I,R,O){I===null&&(I=Function.prototype);var T=Object.getOwnPropertyDescriptor(I,R);if(T===void 0){var A=Object.getPrototypeOf(I);return A===null?void 0:S(A,R,O)}else{if("value"in T)return T.value;var C=T.get;return C===void 0?void 0:C.call(O)}},o=function(){function S(I,R){for(var O=0;O<R.length;O++){var T=R[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(I,T.key,T)}}return function(I,R,O){return R&&S(I.prototype,R),O&&S(I,O),I}}(),a=i(3),l=b(a),u=i(8),c=b(u),h=i(43),f=b(h),d=i(15),p=i(41),g=b(p);function b(S){return S&&S.__esModule?S:{default:S}}function m(S,I){if(!(S instanceof I))throw new TypeError("Cannot call a class as a function")}function v(S,I){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:S}function _(S,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);S.prototype=Object.create(I&&I.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(S,I):S.__proto__=I)}var y=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],E=function(S){_(I,S);function I(R,O){m(this,I),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=y);var T=v(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,R,O));return T.quill.container.classList.add("ql-bubble"),T}return o(I,[{key:"extendToolbar",value:function(O){this.tooltip=new k(this.quill,this.options.bounds),this.tooltip.root.appendChild(O.container),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),g.default)}}]),I}(f.default);E.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(I){I?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var k=function(S){_(I,S);function I(R,O){m(this,I);var T=v(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,R,O));return T.quill.on(c.default.events.EDITOR_CHANGE,function(A,C,D,q){if(A===c.default.events.SELECTION_CHANGE)if(C!=null&&C.length>0&&q===c.default.sources.USER){T.show(),T.root.style.left="0px",T.root.style.width="",T.root.style.width=T.root.offsetWidth+"px";var Q=T.quill.getLines(C.index,C.length);if(Q.length===1)T.position(T.quill.getBounds(C));else{var Y=Q[Q.length-1],ie=T.quill.getIndex(Y),X=Math.min(Y.length()-1,C.index+C.length-ie),F=T.quill.getBounds(new d.Range(ie,X));T.position(F)}}else document.activeElement!==T.textbox&&T.quill.hasFocus()&&T.hide()}),T}return o(I,[{key:"listen",value:function(){var O=this;s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){O.root.classList.remove("ql-editing")}),this.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!O.root.classList.contains("ql-hidden")){var T=O.quill.getSelection();T!=null&&O.position(O.quill.getBounds(T))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(O){var T=s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"position",this).call(this,O),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",T===0)return T;A.style.marginLeft=-1*T-A.offsetWidth/2+"px"}}]),I}(h.BaseTooltip);k.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=k,r.default=E},function(n,r,i){n.exports=i(63)}]).default})})(Nw);var pM=Nw.exports;const Yf=tw(pM);var Wn=-1,On=1,Zt=0;function ua(t,e,n,r){if(t===e)return t?[[Zt,t]]:[];if(n!=null){var i=bM(t,e,n);if(i)return i}var s=fg(t,e),o=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=hg(t,e);var a=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var l=gM(t,e);return o&&l.unshift([Zt,o]),a&&l.push([Zt,a]),Rw(l,r),l}function gM(t,e){var n;if(!t)return[[On,e]];if(!e)return[[Wn,t]];var r=t.length>e.length?t:e,i=t.length>e.length?e:t,s=r.indexOf(i);if(s!==-1)return n=[[On,r.substring(0,s)],[Zt,i],[On,r.substring(s+i.length)]],t.length>e.length&&(n[0][0]=n[2][0]=Wn),n;if(i.length===1)return[[Wn,t],[On,e]];var o=vM(t,e);if(o){var a=o[0],l=o[1],u=o[2],c=o[3],h=o[4],f=ua(a,u),d=ua(l,c);return f.concat([[Zt,h]],d)}return mM(t,e)}function mM(t,e){for(var n=t.length,r=e.length,i=Math.ceil((n+r)/2),s=i,o=2*i,a=new Array(o),l=new Array(o),u=0;u<o;u++)a[u]=-1,l[u]=-1;a[s+1]=0,l[s+1]=0;for(var c=n-r,h=c%2!==0,f=0,d=0,p=0,g=0,b=0;b<i;b++){for(var m=-b+f;m<=b-d;m+=2){var v=s+m,_;m===-b||m!==b&&a[v-1]<a[v+1]?_=a[v+1]:_=a[v-1]+1;for(var y=_-m;_<n&&y<r&&t.charAt(_)===e.charAt(y);)_++,y++;if(a[v]=_,_>n)d+=2;else if(y>r)f+=2;else if(h){var E=s+c-m;if(E>=0&&E<o&&l[E]!==-1){var k=n-l[E];if(_>=k)return dy(t,e,_,y)}}}for(var S=-b+p;S<=b-g;S+=2){var E=s+S,k;S===-b||S!==b&&l[E-1]<l[E+1]?k=l[E+1]:k=l[E-1]+1;for(var I=k-S;k<n&&I<r&&t.charAt(n-k-1)===e.charAt(r-I-1);)k++,I++;if(l[E]=k,k>n)g+=2;else if(I>r)p+=2;else if(!h){var v=s+c-S;if(v>=0&&v<o&&a[v]!==-1){var _=a[v],y=s+_-v;if(k=n-k,_>=k)return dy(t,e,_,y)}}}}return[[Wn,t],[On,e]]}function dy(t,e,n,r){var i=t.substring(0,n),s=e.substring(0,r),o=t.substring(n),a=e.substring(r),l=ua(i,s),u=ua(o,a);return l.concat(u)}function fg(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(s,i)==e.substring(s,i)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return Pw(t.charCodeAt(i-1))&&i--,i}function hg(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,s=0;n<i;)t.substring(t.length-i,t.length-s)==e.substring(e.length-i,e.length-s)?(n=i,s=n):r=i,i=Math.floor((r-n)/2+n);return xw(t.charCodeAt(t.length-i))&&i--,i}function vM(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||r.length*2<n.length)return null;function i(d,p,g){for(var b=d.substring(g,g+Math.floor(d.length/4)),m=-1,v="",_,y,E,k;(m=p.indexOf(b,m+1))!==-1;){var S=fg(d.substring(g),p.substring(m)),I=hg(d.substring(0,g),p.substring(0,m));v.length<I+S&&(v=p.substring(m-I,m)+p.substring(m,m+S),_=d.substring(0,g-I),y=d.substring(g+S),E=p.substring(0,m-I),k=p.substring(m+S))}return v.length*2>=d.length?[_,y,E,k,v]:null}var s=i(n,r,Math.ceil(n.length/4)),o=i(n,r,Math.ceil(n.length/2)),a;if(!s&&!o)return null;o?s?a=s[4].length>o[4].length?s:o:a=o:a=s;var l,u,c,h;t.length>e.length?(l=a[0],u=a[1],c=a[2],h=a[3]):(c=a[0],h=a[1],l=a[2],u=a[3]);var f=a[4];return[l,u,c,h,f]}function Rw(t,e){t.push([Zt,""]);for(var n=0,r=0,i=0,s="",o="",a;n<t.length;){if(n<t.length-1&&!t[n][1]){t.splice(n,1);continue}switch(t[n][0]){case On:i++,o+=t[n][1],n++;break;case Wn:r++,s+=t[n][1],n++;break;case Zt:var l=n-i-r-1;if(e){if(l>=0&&Lw(t[l][1])){var u=t[l][1].slice(-1);if(t[l][1]=t[l][1].slice(0,-1),s=u+s,o=u+o,!t[l][1]){t.splice(l,1),n--;var c=l-1;t[c]&&t[c][0]===On&&(i++,o=t[c][1]+o,c--),t[c]&&t[c][0]===Wn&&(r++,s=t[c][1]+s,c--),l=c}}if(Dw(t[n][1])){var u=t[n][1].charAt(0);t[n][1]=t[n][1].slice(1),s+=u,o+=u}}if(n<t.length-1&&!t[n][1]){t.splice(n,1);break}if(s.length>0||o.length>0){s.length>0&&o.length>0&&(a=fg(o,s),a!==0&&(l>=0?t[l][1]+=o.substring(0,a):(t.splice(0,0,[Zt,o.substring(0,a)]),n++),o=o.substring(a),s=s.substring(a)),a=hg(o,s),a!==0&&(t[n][1]=o.substring(o.length-a)+t[n][1],o=o.substring(0,o.length-a),s=s.substring(0,s.length-a)));var h=i+r;s.length===0&&o.length===0?(t.splice(n-h,h),n=n-h):s.length===0?(t.splice(n-h,h,[On,o]),n=n-h+1):o.length===0?(t.splice(n-h,h,[Wn,s]),n=n-h+1):(t.splice(n-h,h,[Wn,s],[On,o]),n=n-h+2)}n!==0&&t[n-1][0]===Zt?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,s="",o="";break}}t[t.length-1][1]===""&&t.pop();var f=!1;for(n=1;n<t.length-1;)t[n-1][0]===Zt&&t[n+1][0]===Zt&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)===t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),f=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),f=!0)),n++;f&&Rw(t,e)}function Pw(t){return t>=55296&&t<=56319}function xw(t){return t>=56320&&t<=57343}function Dw(t){return xw(t.charCodeAt(0))}function Lw(t){return Pw(t.charCodeAt(t.length-1))}function yM(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}function Xf(t,e,n,r){return Lw(t)||Dw(r)?null:yM([[Zt,t],[Wn,e],[On,n],[Zt,r]])}function bM(t,e,n){var r=typeof n=="number"?{index:n,length:0}:n.oldRange,i=typeof n=="number"?null:n.newRange,s=t.length,o=e.length;if(r.length===0&&(i===null||i.length===0)){var a=r.index,l=t.slice(0,a),u=t.slice(a),c=i?i.index:null;e:{var h=a+o-s;if(c!==null&&c!==h||h<0||h>o)break e;var f=e.slice(0,h),d=e.slice(h);if(d!==u)break e;var p=Math.min(a,h),g=l.slice(0,p),b=f.slice(0,p);if(g!==b)break e;var m=l.slice(p),v=f.slice(p);return Xf(g,m,v,u)}e:{if(c!==null&&c!==a)break e;var _=a,f=e.slice(0,_),d=e.slice(_);if(f!==l)break e;var y=Math.min(s-_,o-_),E=u.slice(u.length-y),k=d.slice(d.length-y);if(E!==k)break e;var m=u.slice(0,u.length-y),v=d.slice(0,d.length-y);return Xf(l,m,v,E)}}if(r.length>0&&i&&i.length===0)e:{var g=t.slice(0,r.index),E=t.slice(r.index+r.length),p=g.length,y=E.length;if(o<p+y)break e;var b=e.slice(0,p),k=e.slice(o-y);if(g!==b||E!==k)break e;var m=t.slice(p,s-y),v=e.slice(p,o-y);return Xf(g,m,v,E)}return null}function _c(t,e,n){return ua(t,e,n,!0)}_c.INSERT=On;_c.DELETE=Wn;_c.EQUAL=Zt;var _M=_c,vu={exports:{}};vu.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",h="[object GeneratorFunction]",f="[object Map]",d="[object Number]",p="[object Object]",g="[object Promise]",b="[object RegExp]",m="[object Set]",v="[object String]",_="[object Symbol]",y="[object WeakMap]",E="[object ArrayBuffer]",k="[object DataView]",S="[object Float32Array]",I="[object Float64Array]",R="[object Int8Array]",O="[object Int16Array]",T="[object Int32Array]",A="[object Uint8Array]",C="[object Uint8ClampedArray]",D="[object Uint16Array]",q="[object Uint32Array]",Q=/[\\^$.*+?()[\]{}|]/g,Y=/\w*$/,ie=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,F={};F[s]=F[o]=F[E]=F[k]=F[a]=F[l]=F[S]=F[I]=F[R]=F[O]=F[T]=F[f]=F[d]=F[p]=F[b]=F[m]=F[v]=F[_]=F[A]=F[C]=F[D]=F[q]=!0,F[u]=F[c]=F[y]=!1;var N=typeof qe=="object"&&qe&&qe.Object===Object&&qe,j=typeof self=="object"&&self&&self.Object===Object&&self,U=N||j||Function("return this")(),J=e&&!e.nodeType&&e,K=J&&!0&&t&&!t.nodeType&&t,L=K&&K.exports===J;function x(w,P){return w.set(P[0],P[1]),w}function V(w,P){return w.add(P),w}function $(w,P){for(var H=-1,oe=w?w.length:0;++H<oe&&P(w[H],H,w)!==!1;);return w}function ee(w,P){for(var H=-1,oe=P.length,Se=w.length;++H<oe;)w[Se+H]=P[H];return w}function fe(w,P,H,oe){var Se=-1,ye=w?w.length:0;for(oe&&ye&&(H=w[++Se]);++Se<ye;)H=P(H,w[Se],Se,w);return H}function M(w,P){for(var H=-1,oe=Array(w);++H<w;)oe[H]=P(H);return oe}function B(w,P){return w==null?void 0:w[P]}function z(w){var P=!1;if(w!=null&&typeof w.toString!="function")try{P=!!(w+"")}catch{}return P}function re(w){var P=-1,H=Array(w.size);return w.forEach(function(oe,Se){H[++P]=[Se,oe]}),H}function se(w,P){return function(H){return w(P(H))}}function ae(w){var P=-1,H=Array(w.size);return w.forEach(function(oe){H[++P]=oe}),H}var G=Array.prototype,W=Function.prototype,te=Object.prototype,Z=U["__core-js_shared__"],ne=function(){var w=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),ue=W.toString,ce=te.hasOwnProperty,de=te.toString,_e=RegExp("^"+ue.call(ce).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=L?U.Buffer:void 0,me=U.Symbol,He=U.Uint8Array,Te=se(Object.getPrototypeOf,Object),Ze=Object.create,ti=te.propertyIsEnumerable,nr=G.splice,Sr=Object.getOwnPropertySymbols,et=Ie?Ie.isBuffer:void 0,Bt=se(Object.keys,Object),rr=Tn(U,"DataView"),ni=Tn(U,"Map"),En=Tn(U,"Promise"),Vi=Tn(U,"Set"),Us=Tn(U,"WeakMap"),ri=Tn(Object,"create"),qs=Ut(rr),ii=Ut(ni),$s=Ut(En),Hs=Ut(Vi),Vs=Ut(Us),Or=me?me.prototype:void 0,qa=Or?Or.valueOf:void 0;function ir(w){var P=-1,H=w?w.length:0;for(this.clear();++P<H;){var oe=w[P];this.set(oe[0],oe[1])}}function wc(){this.__data__=ri?ri(null):{}}function Ec(w){return this.has(w)&&delete this.__data__[w]}function Tc(w){var P=this.__data__;if(ri){var H=P[w];return H===r?void 0:H}return ce.call(P,w)?P[w]:void 0}function $a(w){var P=this.__data__;return ri?P[w]!==void 0:ce.call(P,w)}function zs(w,P){var H=this.__data__;return H[w]=ri&&P===void 0?r:P,this}ir.prototype.clear=wc,ir.prototype.delete=Ec,ir.prototype.get=Tc,ir.prototype.has=$a,ir.prototype.set=zs;function vt(w){var P=-1,H=w?w.length:0;for(this.clear();++P<H;){var oe=w[P];this.set(oe[0],oe[1])}}function Ac(){this.__data__=[]}function Ic(w){var P=this.__data__,H=Ki(P,w);if(H<0)return!1;var oe=P.length-1;return H==oe?P.pop():nr.call(P,H,1),!0}function Sc(w){var P=this.__data__,H=Ki(P,w);return H<0?void 0:P[H][1]}function Oc(w){return Ki(this.__data__,w)>-1}function kc(w,P){var H=this.__data__,oe=Ki(H,w);return oe<0?H.push([w,P]):H[oe][1]=P,this}vt.prototype.clear=Ac,vt.prototype.delete=Ic,vt.prototype.get=Sc,vt.prototype.has=Oc,vt.prototype.set=kc;function St(w){var P=-1,H=w?w.length:0;for(this.clear();++P<H;){var oe=w[P];this.set(oe[0],oe[1])}}function Cc(){this.__data__={hash:new ir,map:new(ni||vt),string:new ir}}function Nc(w){return oi(this,w).delete(w)}function Rc(w){return oi(this,w).get(w)}function Pc(w){return oi(this,w).has(w)}function xc(w,P){return oi(this,w).set(w,P),this}St.prototype.clear=Cc,St.prototype.delete=Nc,St.prototype.get=Rc,St.prototype.has=Pc,St.prototype.set=xc;function Qt(w){this.__data__=new vt(w)}function Dc(){this.__data__=new vt}function Lc(w){return this.__data__.delete(w)}function Mc(w){return this.__data__.get(w)}function jc(w){return this.__data__.has(w)}function Fc(w,P){var H=this.__data__;if(H instanceof vt){var oe=H.__data__;if(!ni||oe.length<n-1)return oe.push([w,P]),this;H=this.__data__=new St(oe)}return H.set(w,P),this}Qt.prototype.clear=Dc,Qt.prototype.delete=Lc,Qt.prototype.get=Mc,Qt.prototype.has=jc,Qt.prototype.set=Fc;function zi(w,P){var H=Qs(w)||Gi(w)?M(w.length,String):[],oe=H.length,Se=!!oe;for(var ye in w)(P||ce.call(w,ye))&&!(Se&&(ye=="length"||Jc(ye,oe)))&&H.push(ye);return H}function Ha(w,P,H){var oe=w[P];(!(ce.call(w,P)&&Ga(oe,H))||H===void 0&&!(P in w))&&(w[P]=H)}function Ki(w,P){for(var H=w.length;H--;)if(Ga(w[H][0],P))return H;return-1}function Ln(w,P){return w&&Gs(P,Xs(P),w)}function Ks(w,P,H,oe,Se,ye,Pe){var De;if(oe&&(De=ye?oe(w,Se,ye,Pe):oe(w)),De!==void 0)return De;if(!jn(w))return w;var tt=Qs(w);if(tt){if(De=Yc(w),!P)return Wc(w,De)}else{var Be=or(w),Ot=Be==c||Be==h;if(Qa(w))return Wi(w,P);if(Be==p||Be==s||Ot&&!ye){if(z(w))return ye?w:{};if(De=Mn(Ot?{}:w),!P)return Gc(w,Ln(De,w))}else{if(!F[Be])return ye?w:{};De=Xc(w,Be,Ks,P)}}Pe||(Pe=new Qt);var Yt=Pe.get(w);if(Yt)return Yt;if(Pe.set(w,De),!tt)var at=H?Qc(w):Xs(w);return $(at||w,function(kt,yt){at&&(yt=kt,kt=w[yt]),Ha(De,yt,Ks(kt,P,H,oe,yt,w,Pe))}),De}function Bc(w){return jn(w)?Ze(w):{}}function Uc(w,P,H){var oe=P(w);return Qs(w)?oe:ee(oe,H(w))}function qc(w){return de.call(w)}function $c(w){if(!jn(w)||ef(w))return!1;var P=Ys(w)||z(w)?_e:ie;return P.test(Ut(w))}function Hc(w){if(!Ka(w))return Bt(w);var P=[];for(var H in Object(w))ce.call(w,H)&&H!="constructor"&&P.push(H);return P}function Wi(w,P){if(P)return w.slice();var H=new w.constructor(w.length);return w.copy(H),H}function Ws(w){var P=new w.constructor(w.byteLength);return new He(P).set(new He(w)),P}function si(w,P){var H=P?Ws(w.buffer):w.buffer;return new w.constructor(H,w.byteOffset,w.byteLength)}function Va(w,P,H){var oe=P?H(re(w),!0):re(w);return fe(oe,x,new w.constructor)}function za(w){var P=new w.constructor(w.source,Y.exec(w));return P.lastIndex=w.lastIndex,P}function Vc(w,P,H){var oe=P?H(ae(w),!0):ae(w);return fe(oe,V,new w.constructor)}function zc(w){return qa?Object(qa.call(w)):{}}function Kc(w,P){var H=P?Ws(w.buffer):w.buffer;return new w.constructor(H,w.byteOffset,w.length)}function Wc(w,P){var H=-1,oe=w.length;for(P||(P=Array(oe));++H<oe;)P[H]=w[H];return P}function Gs(w,P,H,oe){H||(H={});for(var Se=-1,ye=P.length;++Se<ye;){var Pe=P[Se],De=oe?oe(H[Pe],w[Pe],Pe,H,w):void 0;Ha(H,Pe,De===void 0?w[Pe]:De)}return H}function Gc(w,P){return Gs(w,sr(w),P)}function Qc(w){return Uc(w,Xs,sr)}function oi(w,P){var H=w.__data__;return Zc(P)?H[typeof P=="string"?"string":"hash"]:H.map}function Tn(w,P){var H=B(w,P);return $c(H)?H:void 0}var sr=Sr?se(Sr,Object):nf,or=qc;(rr&&or(new rr(new ArrayBuffer(1)))!=k||ni&&or(new ni)!=f||En&&or(En.resolve())!=g||Vi&&or(new Vi)!=m||Us&&or(new Us)!=y)&&(or=function(w){var P=de.call(w),H=P==p?w.constructor:void 0,oe=H?Ut(H):void 0;if(oe)switch(oe){case qs:return k;case ii:return f;case $s:return g;case Hs:return m;case Vs:return y}return P});function Yc(w){var P=w.length,H=w.constructor(P);return P&&typeof w[0]=="string"&&ce.call(w,"index")&&(H.index=w.index,H.input=w.input),H}function Mn(w){return typeof w.constructor=="function"&&!Ka(w)?Bc(Te(w)):{}}function Xc(w,P,H,oe){var Se=w.constructor;switch(P){case E:return Ws(w);case a:case l:return new Se(+w);case k:return si(w,oe);case S:case I:case R:case O:case T:case A:case C:case D:case q:return Kc(w,oe);case f:return Va(w,oe,H);case d:case v:return new Se(w);case b:return za(w);case m:return Vc(w,oe,H);case _:return zc(w)}}function Jc(w,P){return P=P??i,!!P&&(typeof w=="number"||X.test(w))&&w>-1&&w%1==0&&w<P}function Zc(w){var P=typeof w;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?w!=="__proto__":w===null}function ef(w){return!!ne&&ne in w}function Ka(w){var P=w&&w.constructor,H=typeof P=="function"&&P.prototype||te;return w===H}function Ut(w){if(w!=null){try{return ue.call(w)}catch{}try{return w+""}catch{}}return""}function Wa(w){return Ks(w,!0,!0)}function Ga(w,P){return w===P||w!==w&&P!==P}function Gi(w){return tf(w)&&ce.call(w,"callee")&&(!ti.call(w,"callee")||de.call(w)==s)}var Qs=Array.isArray;function Qi(w){return w!=null&&Ya(w.length)&&!Ys(w)}function tf(w){return Xa(w)&&Qi(w)}var Qa=et||rf;function Ys(w){var P=jn(w)?de.call(w):"";return P==c||P==h}function Ya(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=i}function jn(w){var P=typeof w;return!!w&&(P=="object"||P=="function")}function Xa(w){return!!w&&typeof w=="object"}function Xs(w){return Qi(w)?zi(w):Hc(w)}function nf(){return[]}function rf(){return!1}t.exports=Wa})(vu,vu.exports);var Mw=vu.exports,dg={},jw=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dg,"__esModule",{value:!0});var wM=jw(Mw),EM=jw(Jp),od;(function(t){function e(s,o,a){s===void 0&&(s={}),o===void 0&&(o={}),typeof s!="object"&&(s={}),typeof o!="object"&&(o={});var l=wM.default(o);a||(l=Object.keys(l).reduce(function(c,h){return l[h]!=null&&(c[h]=l[h]),c},{}));for(var u in s)s[u]!==void 0&&o[u]===void 0&&(l[u]=s[u]);return Object.keys(l).length>0?l:void 0}t.compose=e;function n(s,o){s===void 0&&(s={}),o===void 0&&(o={}),typeof s!="object"&&(s={}),typeof o!="object"&&(o={});var a=Object.keys(s).concat(Object.keys(o)).reduce(function(l,u){return EM.default(s[u],o[u])||(l[u]=o[u]===void 0?null:o[u]),l},{});return Object.keys(a).length>0?a:void 0}t.diff=n;function r(s,o){s===void 0&&(s={}),o===void 0&&(o={}),s=s||{};var a=Object.keys(o).reduce(function(l,u){return o[u]!==s[u]&&s[u]!==void 0&&(l[u]=o[u]),l},{});return Object.keys(s).reduce(function(l,u){return s[u]!==o[u]&&o[u]===void 0&&(l[u]=null),l},a)}t.invert=r;function i(s,o,a){if(a===void 0&&(a=!1),typeof s!="object")return o;if(typeof o=="object"){if(!a)return o;var l=Object.keys(o).reduce(function(u,c){return s[c]===void 0&&(u[c]=o[c]),u},{});return Object.keys(l).length>0?l:void 0}}t.transform=i})(od||(od={}));dg.default=od;var bl={},_l={},py;function TM(){if(py)return _l;py=1;var t=qe&&qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_l,"__esModule",{value:!0});var e=t(Fw()),n=function(){function r(i){this.ops=i,this.index=0,this.offset=0}return r.prototype.hasNext=function(){return this.peekLength()<1/0},r.prototype.next=function(i){i||(i=1/0);var s=this.ops[this.index];if(s){var o=this.offset,a=e.default.length(s);if(i>=a-o?(i=a-o,this.index+=1,this.offset=0):this.offset+=i,typeof s.delete=="number")return{delete:i};var l={};return s.attributes&&(l.attributes=s.attributes),typeof s.retain=="number"?l.retain=i:typeof s.insert=="string"?l.insert=s.insert.substr(o,i):l.insert=s.insert,l}else return{retain:1/0}},r.prototype.peek=function(){return this.ops[this.index]},r.prototype.peekLength=function(){return this.ops[this.index]?e.default.length(this.ops[this.index])-this.offset:1/0},r.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},r.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var i=this.offset,s=this.index,o=this.next(),a=this.ops.slice(this.index);return this.offset=i,this.index=s,[o].concat(a)}else return[]},r}();return _l.default=n,_l}var gy;function Fw(){if(gy)return bl;gy=1;var t=qe&&qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bl,"__esModule",{value:!0});var e=t(TM()),n;return function(r){function i(o){return new e.default(o)}r.iterator=i;function s(o){return typeof o.delete=="number"?o.delete:typeof o.retain=="number"?o.retain:typeof o.insert=="string"?o.insert.length:1}r.length=s}(n||(n={})),bl.default=n,bl}var Ba=qe&&qe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},wl=Ba(_M),AM=Ba(Mw),Jf=Ba(Jp),co=Ba(dg),bt=Ba(Fw()),IM=String.fromCharCode(0),SM=function(){function t(e){Array.isArray(e)?this.ops=e:e!=null&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}return t.prototype.insert=function(e,n){var r={};return typeof e=="string"&&e.length===0?this:(r.insert=e,n!=null&&typeof n=="object"&&Object.keys(n).length>0&&(r.attributes=n),this.push(r))},t.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},t.prototype.retain=function(e,n){if(e<=0)return this;var r={retain:e};return n!=null&&typeof n=="object"&&Object.keys(n).length>0&&(r.attributes=n),this.push(r)},t.prototype.push=function(e){var n=this.ops.length,r=this.ops[n-1];if(e=AM.default(e),typeof r=="object"){if(typeof e.delete=="number"&&typeof r.delete=="number")return this.ops[n-1]={delete:r.delete+e.delete},this;if(typeof r.delete=="number"&&e.insert!=null&&(n-=1,r=this.ops[n-1],typeof r!="object"))return this.ops.unshift(e),this;if(Jf.default(e.attributes,r.attributes)){if(typeof e.insert=="string"&&typeof r.insert=="string")return this.ops[n-1]={insert:r.insert+e.insert},typeof e.attributes=="object"&&(this.ops[n-1].attributes=e.attributes),this;if(typeof e.retain=="number"&&typeof r.retain=="number")return this.ops[n-1]={retain:r.retain+e.retain},typeof e.attributes=="object"&&(this.ops[n-1].attributes=e.attributes),this}}return n===this.ops.length?this.ops.push(e):this.ops.splice(n,0,e),this},t.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},t.prototype.filter=function(e){return this.ops.filter(e)},t.prototype.forEach=function(e){this.ops.forEach(e)},t.prototype.map=function(e){return this.ops.map(e)},t.prototype.partition=function(e){var n=[],r=[];return this.forEach(function(i){var s=e(i)?n:r;s.push(i)}),[n,r]},t.prototype.reduce=function(e,n){return this.ops.reduce(e,n)},t.prototype.changeLength=function(){return this.reduce(function(e,n){return n.insert?e+bt.default.length(n):n.delete?e-n.delete:e},0)},t.prototype.length=function(){return this.reduce(function(e,n){return e+bt.default.length(n)},0)},t.prototype.slice=function(e,n){e===void 0&&(e=0),n===void 0&&(n=1/0);for(var r=[],i=bt.default.iterator(this.ops),s=0;s<n&&i.hasNext();){var o=void 0;s<e?o=i.next(e-s):(o=i.next(n-s),r.push(o)),s+=bt.default.length(o)}return new t(r)},t.prototype.compose=function(e){var n=bt.default.iterator(this.ops),r=bt.default.iterator(e.ops),i=[],s=r.peek();if(s!=null&&typeof s.retain=="number"&&s.attributes==null){for(var o=s.retain;n.peekType()==="insert"&&n.peekLength()<=o;)o-=n.peekLength(),i.push(n.next());s.retain-o>0&&r.next(s.retain-o)}for(var a=new t(i);n.hasNext()||r.hasNext();)if(r.peekType()==="insert")a.push(r.next());else if(n.peekType()==="delete")a.push(n.next());else{var l=Math.min(n.peekLength(),r.peekLength()),u=n.next(l),c=r.next(l);if(typeof c.retain=="number"){var h={};typeof u.retain=="number"?h.retain=l:h.insert=u.insert;var f=co.default.compose(u.attributes,c.attributes,typeof u.retain=="number");if(f&&(h.attributes=f),a.push(h),!r.hasNext()&&Jf.default(a.ops[a.ops.length-1],h)){var d=new t(n.rest());return a.concat(d).chop()}}else typeof c.delete=="number"&&typeof u.retain=="number"&&a.push(c)}return a.chop()},t.prototype.concat=function(e){var n=new t(this.ops.slice());return e.ops.length>0&&(n.push(e.ops[0]),n.ops=n.ops.concat(e.ops.slice(1))),n},t.prototype.diff=function(e,n){if(this.ops===e.ops)return new t;var r=[this,e].map(function(l){return l.map(function(u){if(u.insert!=null)return typeof u.insert=="string"?u.insert:IM;var c=l===e?"on":"with";throw new Error("diff() called "+c+" non-document")}).join("")}),i=new t,s=wl.default(r[0],r[1],n),o=bt.default.iterator(this.ops),a=bt.default.iterator(e.ops);return s.forEach(function(l){for(var u=l[1].length;u>0;){var c=0;switch(l[0]){case wl.default.INSERT:c=Math.min(a.peekLength(),u),i.push(a.next(c));break;case wl.default.DELETE:c=Math.min(u,o.peekLength()),o.next(c),i.delete(c);break;case wl.default.EQUAL:c=Math.min(o.peekLength(),a.peekLength(),u);var h=o.next(c),f=a.next(c);Jf.default(h.insert,f.insert)?i.retain(c,co.default.diff(h.attributes,f.attributes)):i.push(f).delete(c);break}u-=c}}),i.chop()},t.prototype.eachLine=function(e,n){n===void 0&&(n=`
`);for(var r=bt.default.iterator(this.ops),i=new t,s=0;r.hasNext();){if(r.peekType()!=="insert")return;var o=r.peek(),a=bt.default.length(o)-r.peekLength(),l=typeof o.insert=="string"?o.insert.indexOf(n,a)-a:-1;if(l<0)i.push(r.next());else if(l>0)i.push(r.next(l));else{if(e(i,r.next(1).attributes||{},s)===!1)return;s+=1,i=new t}}i.length()>0&&e(i,{},s)},t.prototype.invert=function(e){var n=new t;return this.reduce(function(r,i){if(i.insert)n.delete(bt.default.length(i));else{if(i.retain&&i.attributes==null)return n.retain(i.retain),r+i.retain;if(i.delete||i.retain&&i.attributes){var s=i.delete||i.retain,o=e.slice(r,r+s);return o.forEach(function(a){i.delete?n.push(a):i.retain&&i.attributes&&n.retain(bt.default.length(a),co.default.invert(i.attributes,a.attributes))}),r+s}}return r},0),n.chop()},t.prototype.transform=function(e,n){if(n===void 0&&(n=!1),n=!!n,typeof e=="number")return this.transformPosition(e,n);for(var r=e,i=bt.default.iterator(this.ops),s=bt.default.iterator(r.ops),o=new t;i.hasNext()||s.hasNext();)if(i.peekType()==="insert"&&(n||s.peekType()!=="insert"))o.retain(bt.default.length(i.next()));else if(s.peekType()==="insert")o.push(s.next());else{var a=Math.min(i.peekLength(),s.peekLength()),l=i.next(a),u=s.next(a);if(l.delete)continue;u.delete?o.push(u):o.retain(a,co.default.transform(l.attributes,u.attributes,n))}return o.chop()},t.prototype.transformPosition=function(e,n){n===void 0&&(n=!1),n=!!n;for(var r=bt.default.iterator(this.ops),i=0;r.hasNext()&&i<=e;){var s=r.peekLength(),o=r.peekType();if(r.next(),o==="delete"){e-=Math.min(s,e-i);continue}else o==="insert"&&(i<e||!n)&&(e+=s);i+=s}return e},t.Op=bt.default,t.AttributeMap=co.default,t}(),OM=SM;const kM=tw(OM);/*!
 * VueQuill @vueup/vue-quill v1.2.0
 * https://vueup.github.io/vue-quill/
 * 
 * Includes quill v1.3.7
 * https://quilljs.com/
 * 
 * Copyright (c) 2023 Ahmad Luthfi Masruri
 * Released under the MIT license
 * Date: 2023-05-12T08:44:03.742Z
 */const my={essential:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}],["blockquote","code-block","link"],[{color:[]},"clean"]],minimal:[[{header:1},{header:2}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"},{align:[]}]],full:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","video","image"],["clean"]]},CM=fa({name:"QuillEditor",inheritAttrs:!1,props:{content:{type:[String,Object]},contentType:{type:String,default:"delta",validator:t=>["delta","html","text"].includes(t)},enable:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},placeholder:{type:String,required:!1},theme:{type:String,default:"snow",validator:t=>["snow","bubble",""].includes(t)},toolbar:{type:[String,Array,Object],required:!1,validator:t=>typeof t=="string"&&t!==""?t.charAt(0)==="#"?!0:Object.keys(my).indexOf(t)!==-1:!0},modules:{type:Object,required:!1},options:{type:Object,required:!1},globalOptions:{type:Object,required:!1}},emits:["textChange","selectionChange","editorChange","update:content","focus","blur","ready"],setup:(t,e)=>{ku(()=>{s()}),Cu(()=>{n=null});let n,r;const i=pt(),s=()=>{var T;if(i.value){if(r=o(),t.modules)if(Array.isArray(t.modules))for(const A of t.modules)Yf.register(`modules/${A.name}`,A.module);else Yf.register(`modules/${t.modules.name}`,t.modules.module);n=new Yf(i.value,r),_(t.content),n.on("text-change",h),n.on("selection-change",d),n.on("editor-change",p),t.theme!=="bubble"&&i.value.classList.remove("ql-bubble"),t.theme!=="snow"&&i.value.classList.remove("ql-snow"),(T=n.getModule("toolbar"))===null||T===void 0||T.container.addEventListener("mousedown",A=>{A.preventDefault()}),e.emit("ready",n)}},o=()=>{const T={};if(t.theme!==""&&(T.theme=t.theme),t.readOnly&&(T.readOnly=t.readOnly),t.placeholder&&(T.placeholder=t.placeholder),t.toolbar&&t.toolbar!==""&&(T.modules={toolbar:(()=>{if(typeof t.toolbar=="object")return t.toolbar;if(typeof t.toolbar=="string")return t.toolbar.charAt(0)==="#"?t.toolbar:my[t.toolbar]})()}),t.modules){const A=(()=>{var C,D;const q={};if(Array.isArray(t.modules))for(const Q of t.modules)q[Q.name]=(C=Q.options)!==null&&C!==void 0?C:{};else q[t.modules.name]=(D=t.modules.options)!==null&&D!==void 0?D:{};return q})();T.modules=Object.assign({},T.modules,A)}return Object.assign({},t.globalOptions,t.options,T)},a=T=>typeof T=="object"&&T?T.slice():T,l=T=>Object.values(T.ops).some(A=>!A.retain||Object.keys(A).length!==1);let u;const c=T=>{if(typeof u==typeof T){if(T===u)return!0;if(typeof T=="object"&&T&&typeof u=="object"&&u)return!l(u.diff(T))}return!1},h=(T,A,C)=>{u=a(v()),c(t.content)||e.emit("update:content",u),e.emit("textChange",{delta:T,oldContents:A,source:C})},f=pt(),d=(T,A,C)=>{f.value=!!(n!=null&&n.hasFocus()),e.emit("selectionChange",{range:T,oldRange:A,source:C})};Cn(f,T=>{T?e.emit("focus",i):e.emit("blur",i)});const p=(...T)=>{T[0]==="text-change"&&e.emit("editorChange",{name:T[0],delta:T[1],oldContents:T[2],source:T[3]}),T[0]==="selection-change"&&e.emit("editorChange",{name:T[0],range:T[1],oldRange:T[2],source:T[3]})},g=()=>i.value,b=()=>{var T;return(T=n==null?void 0:n.getModule("toolbar"))===null||T===void 0?void 0:T.container},m=()=>{if(n)return n;throw`The quill editor hasn't been instantiated yet,
                  make sure to call this method when the editor ready
                  or use v-on:ready="onReady(quill)" event instead.`},v=(T,A)=>t.contentType==="html"?k():t.contentType==="text"?y(T,A):n==null?void 0:n.getContents(T,A),_=(T,A="api")=>{const C=T||(t.contentType==="delta"?new kM:"");t.contentType==="html"?S(C):t.contentType==="text"?E(C,A):n==null||n.setContents(C,A),u=a(C)},y=(T,A)=>{var C;return(C=n==null?void 0:n.getText(T,A))!==null&&C!==void 0?C:""},E=(T,A="api")=>{n==null||n.setText(T,A)},k=()=>{var T;return(T=n==null?void 0:n.root.innerHTML)!==null&&T!==void 0?T:""},S=T=>{n&&(n.root.innerHTML=T)},I=(T,A="api")=>{const C=n==null?void 0:n.clipboard.convert(T);C&&(n==null||n.setContents(C,A))},R=()=>{n==null||n.focus()},O=()=>{jo(()=>{var T;!e.slots.toolbar&&n&&((T=n.getModule("toolbar"))===null||T===void 0||T.container.remove()),s()})};return Cn(()=>t.content,T=>{if(!n||!T||c(T))return;const A=n.getSelection();A&&jo(()=>n==null?void 0:n.setSelection(A)),_(T)},{deep:!0}),Cn(()=>t.enable,T=>{n&&n.enable(T)}),{editor:i,getEditor:g,getToolbar:b,getQuill:m,getContents:v,setContents:_,getHTML:k,setHTML:S,pasteHTML:I,focus:R,getText:y,setText:E,reinit:O}},render(){var t,e;return[(e=(t=this.$slots).toolbar)===null||e===void 0?void 0:e.call(t),Du("div",{ref:"editor",...this.$attrs})]}});const NM={name:"picture-input",props:{width:{type:[String,Number],default:Number.MAX_SAFE_INTEGER},height:{type:[String,Number],default:Number.MAX_SAFE_INTEGER},margin:{type:[String,Number],default:0},accept:{type:String,default:"image/*"},capture:{type:String,default:null},size:{type:[String,Number],default:Number.MAX_SAFE_INTEGER},name:{type:String,default:null},id:{type:[String,Number],default:null},buttonClass:{type:String,default:"btn btn-primary button"},removeButtonClass:{type:String,default:"btn btn-secondary button secondary"},aspectButtonClass:{type:String,default:"btn btn-secondary button secondary"},prefill:{type:typeof File>"u"||typeof Blob>"u"?[String]:[String,File,Blob],default:""},prefillOptions:{type:Object,default:()=>({})},crop:{type:Boolean,default:!0},radius:{type:[String,Number],default:0},removable:{type:Boolean,default:!1},hideChangeButton:{type:Boolean,default:!1},autoToggleAspectRatio:{type:Boolean,default:!1},toggleAspectRatio:{type:Boolean,default:!1},changeOnClick:{type:Boolean,default:!0},plain:{type:Boolean,default:!1},zIndex:{type:Number,default:1e4},alertOnError:{type:Boolean,default:!0},customStrings:{type:Object,default:()=>({})}},watch:{prefill(){this.prefill?this.preloadImage(this.prefill,this.prefillOptions):this.removeImage()}},data(){return{imageSelected:!1,previewHeight:0,previewWidth:0,draggingOver:!1,canvasWidth:0,canvasHeight:0,strings:{upload:"<p>Your device does not support file uploading.</p>",drag:"Drag an image or <br>click here to select a file",tap:"Tap here to select a photo <br>from your gallery",change:"Change Photo",aspect:"Landscape/Portrait",remove:"Remove Photo",select:"Select a Photo",selected:"<p>Photo successfully selected!</p>",fileSize:"The file size exceeds the limit",fileType:"This file type is not supported."}}},mounted(){if(this.updateStrings(),this.prefill&&this.preloadImage(this.prefill,this.prefillOptions),this.$nextTick(()=>{window.addEventListener("resize",this.onResize),this.onResize()}),this.supportsPreview){this.pixelRatio=Math.round(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI);const t=this.$refs.previewCanvas;t.getContext&&(this.context=t.getContext("2d"),this.context.scale(this.pixelRatio,this.pixelRatio))}this.accept!=="image/*"&&(this.fileTypes=this.accept.split(","),this.fileTypes=this.fileTypes.map(t=>t.trim())),this.canvasWidth=this.width,this.canvasHeight=this.height,this.width!=Number.MAX_SAFE_INTEGER&&this.height!=Number.MAX_SAFE_INTEGER&&(this.previewWidth=this.width,this.previewHeight=this.height),this.$on("error",this.onError)},beforeDestroy(){window.removeEventListener("resize",this.onResize),this.$off("error",this.onError)},methods:{updateStrings(){for(let t in this.customStrings)t in this.strings&&typeof this.customStrings[t]=="string"&&(this.strings[t]=this.customStrings[t])},onClick(){if(!this.imageSelected){this.selectImage();return}this.changeOnClick&&this.selectImage(),this.$emit("click")},onResize(){this.resizeCanvas()&&this.imageObject&&this.drawImage(this.imageObject)},onDragEnter(){this.supportsDragAndDrop&&(this.draggingOver=!0)},onDragLeave(){this.supportsDragAndDrop&&(this.draggingOver=!1)},onFileDrop(t){this.onDragLeave(),this.onFileChange(t)},onFileChange(t,e){let n=t.target.files||t.dataTransfer.files;if(n.length){if(n[0].size<=0||n[0].size>this.size*1024*1024){this.$emit("error",{type:"fileSize",fileSize:n[0].size,fileType:n[0].type,fileName:n[0].name,message:this.strings.fileSize+" ("+this.size+"MB)"});return}if(!(n[0].name===this.fileName&&n[0].size===this.fileSize&&this.fileModified===n[0].lastModified)){if(this.file=n[0],this.fileName=n[0].name,this.fileSize=n[0].size,this.fileModified=n[0].lastModified,this.fileType=n[0].type,this.accept==="image/*"){if(n[0].type.substr(0,6)!=="image/")return}else if(this.fileTypes.indexOf(n[0].type)===-1){this.$emit("error",{type:"fileType",fileSize:n[0].size,fileType:n[0].type,fileName:n[0].name,message:this.strings.fileType});return}this.imageSelected=!0,this.image="",this.supportsPreview?this.loadImage(n[0],e||!1):e?this.$emit("prefill"):this.$emit("change",this.image)}}},onError(t){this.alertOnError&&alert(t.message)},loadImage(t,e){this.getEXIFOrientation(t,n=>{this.setOrientation(n);let r=new FileReader;r.onload=i=>{this.image=i.target.result,e?this.$emit("prefill"):this.$emit("change",this.image),this.imageObject=new Image,this.imageObject.onload=()=>{if(this.autoToggleAspectRatio){let s=this.getOrientation(this.canvasWidth,this.canvasHeight),o=this.getOrientation(this.imageObject.width,this.imageObject.height);s!==o&&this.rotateCanvas()}this.drawImage(this.imageObject)},this.imageObject.src=this.image},r.readAsDataURL(t)})},drawImage(t){this.imageWidth=t.width,this.imageHeight=t.height,this.imageRatio=t.width/t.height;let e=0,n=0,r=this.previewWidth,i=this.previewHeight;const s=this.previewWidth/this.previewHeight;this.crop?this.imageRatio>=s?(r=i*this.imageRatio,e=(this.previewWidth-r)/2):(i=r/this.imageRatio,n=(this.previewHeight-i)/2):this.imageRatio>=s?(i=r/this.imageRatio,n=(this.previewHeight-i)/2):(r=i*this.imageRatio,e=(this.previewWidth-r)/2);const o=this.$refs.previewCanvas;o.style.background="none",o.width=this.previewWidth*this.pixelRatio,o.height=this.previewHeight*this.pixelRatio,this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,o.width,o.height),this.rotate&&typeof this.imageObject.style.imageOrientation>"u"&&(this.context.translate(e*this.pixelRatio,n*this.pixelRatio),this.context.translate(r/2*this.pixelRatio,i/2*this.pixelRatio),this.context.rotate(this.rotate),e=-r/2,n=-i/2),this.context.drawImage(t,e*this.pixelRatio,n*this.pixelRatio,r*this.pixelRatio,i*this.pixelRatio)},selectImage(){this.$refs.fileInput.click()},removeImage(){this.$refs.fileInput.value="",this.$refs.fileInput.type="",this.$refs.fileInput.type="file",this.fileName="",this.fileType="",this.fileSize=0,this.fileModified=0,this.imageSelected=!1,this.image="",this.file=null,this.imageObject=null,this.$refs.previewCanvas.style.backgroundColor="rgba(200,200,200,.25)",this.$refs.previewCanvas.width=this.previewWidth*this.pixelRatio,this.$emit("remove")},rotateImage(){this.rotateCanvas(),this.imageObject&&this.drawImage(this.imageObject);let t=this.getOrientation(this.canvasWidth,this.canvasHeight);this.$emit("aspectratiochange",t)},resizeCanvas(){let t=this.canvasWidth/this.canvasHeight,e=this.$refs.container.clientWidth;return!e||!this.toggleAspectRatio&&e===this.containerWidth?!1:(this.containerWidth=e,this.previewWidth=Math.min(this.containerWidth-this.margin*2,this.canvasWidth),this.previewHeight=this.previewWidth/t,!0)},getOrientation(t,e){let n="square";return t>e?n="landscape":t<e&&(n="portrait"),n},switchCanvasOrientation(){const t=this.canvasWidth,e=this.canvasHeight;this.canvasWidth=e,this.canvasHeight=t},rotateCanvas(){this.switchCanvasOrientation(),this.resizeCanvas()},setOrientation(t){this.rotate=!1,t===8?this.rotate=-Math.PI/2:t===6?this.rotate=Math.PI/2:t===3&&(this.rotate=-Math.PI)},getEXIFOrientation(t,e){var n=new FileReader;n.onload=r=>{var i=new DataView(r.target.result);if(i.getUint16(0,!1)!==65496)return e(-2);for(var s=i.byteLength,o=2;o<s;){var a=i.getUint16(o,!1);if(o+=2,a===65505){if(i.getUint32(o+=2,!1)!==1165519206)return e(-1);var l=i.getUint16(o+=6,!1)===18761;o+=i.getUint32(o+4,l);var u=i.getUint16(o,l);o+=2;for(var c=0;c<u;c++)if(i.getUint16(o+c*12,l)===274)return e(i.getUint16(o+c*12+8,l))}else{if((a&65280)!==65280)break;o+=i.getUint16(o,!1)}}return e(-1)},n.readAsArrayBuffer(t.slice(0,65536))},preloadImage(t,e){let n=window.File;try{new n([],"")}catch{n=class extends Blob{constructor(o,a,l={}){super(o,l),this.lastModifiedDate=new Date,this.lastModified=+this.lastModifiedDate,this.name=a}}}if(e=Object.assign({},e),typeof t=="object"){this.imageSelected=!0,this.image="",this.supportsPreview?this.loadImage(t,!0):this.$emit("prefill");return}t.indexOf("data:")===-1&&(t.indexOf("?")!==-1?t+="&_="+new Date().getTime():t+="?_="+new Date().getTime());let r=new Headers;r.append("Accept","image/*"),fetch(t,{method:"GET",mode:"cors",headers:r}).then(i=>i.blob()).then(i=>{let s={target:{files:[]}};const o=e.fileName||t.split("/").slice(-1)[0];let a=e.mediaType||"image/"+(e.fileType||o.split("?")[0].split(".").slice(-1)[0].split("?")[0]);a=a.replace("jpg","jpeg"),a=a.replace("image/svg","image/svg+xml"),a==="image/svg"&&(a="image/svg+xml"),s.target.files[0]=new n([i],o,{type:a}),this.onFileChange(s,!0)}).catch(i=>{this.$emit("error",{type:"failedPrefill",message:"Failed loading prefill image: "+i})})}},computed:{supportsUpload(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;const t=document.createElement("input");return t.type="file",!t.disabled},supportsPreview(){return window.FileReader&&!!window.CanvasRenderingContext2D},supportsDragAndDrop(){const t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&!("ontouchstart"in window||navigator.msMaxTouchPoints)},computedClasses(){const t={};return t["dragging-over"]=this.draggingOver,t},fontSize(){return Math.min(.04*this.previewWidth,21)+"px"}}},RM={ref:"container",id:"picture-input",class:"picture-input"},PM=["innerHTML"],xM={key:1},DM=["innerHTML"],LM=["innerHTML"],MM={key:2},jM={key:1},FM=["innerHTML"],BM=["name","id","accept","capture"];function UM(t,e,n,r,i,s){return Qe(),lt("div",RM,[s.supportsUpload?s.supportsPreview?(Qe(),lt("div",xM,[Vn("div",{class:"preview-container",style:ss({maxWidth:i.previewWidth+"px",height:i.previewHeight+"px",borderRadius:n.radius+"%"})},[Vn("canvas",{ref:"previewCanvas",class:Un(["picture-preview",s.computedClasses]),tabindex:"0",onDrag:e[0]||(e[0]=Xt(()=>{},["stop","prevent"])),onDragover:e[1]||(e[1]=Xt(()=>{},["stop","prevent"])),onDragstart:e[2]||(e[2]=Xt(()=>{},["stop","prevent"])),onDragend:e[3]||(e[3]=Xt(()=>{},["stop","prevent"])),onDragenter:e[4]||(e[4]=Xt((...o)=>s.onDragEnter&&s.onDragEnter(...o),["stop","prevent"])),onDragleave:e[5]||(e[5]=Xt((...o)=>s.onDragLeave&&s.onDragLeave(...o),["stop","prevent"])),onDrop:e[6]||(e[6]=Xt((...o)=>s.onFileDrop&&s.onFileDrop(...o),["stop","prevent"])),onClick:e[7]||(e[7]=Xt((...o)=>s.onClick&&s.onClick(...o),["prevent"])),onKeyup:e[8]||(e[8]=mA((...o)=>s.onClick&&s.onClick(...o),["enter"])),style:ss({height:i.previewHeight+"px",zIndex:n.zIndex+1})},null,38),!i.imageSelected&&!n.plain?(Qe(),lt("div",{key:0,class:"picture-inner",style:ss({top:-i.previewHeight+"px",marginBottom:-i.previewHeight+"px",fontSize:s.fontSize,borderRadius:n.radius+"%",zIndex:n.zIndex+2})},[s.supportsDragAndDrop?(Qe(),lt("span",{key:0,class:"picture-inner-text",innerHTML:i.strings.drag},null,8,DM)):(Qe(),lt("span",{key:1,class:"picture-inner-text",innerHTML:i.strings.tap},null,8,LM))],4)):cr("",!0)],4),i.imageSelected&&!n.hideChangeButton?(Qe(),lt("button",{key:0,onClick:e[9]||(e[9]=Xt((...o)=>s.selectImage&&s.selectImage(...o),["prevent"])),class:Un(n.buttonClass),type:"button"},Yi(i.strings.change),3)):cr("",!0),i.imageSelected&&n.removable?(Qe(),lt("button",{key:1,onClick:e[10]||(e[10]=Xt((...o)=>s.removeImage&&s.removeImage(...o),["prevent"])),class:Un(n.removeButtonClass),type:"button"},Yi(i.strings.remove),3)):cr("",!0),i.imageSelected&&n.toggleAspectRatio&&n.width!==n.height?(Qe(),lt("button",{key:2,onClick:e[11]||(e[11]=Xt((...o)=>s.rotateImage&&s.rotateImage(...o),["prevent"])),class:Un(n.aspectButtonClass),type:"button"},Yi(i.strings.aspect),3)):cr("",!0)])):(Qe(),lt("div",MM,[i.imageSelected?(Qe(),lt("div",jM,[Vn("div",{innerHTML:i.strings.selected},null,8,FM),n.hideChangeButton?cr("",!0):(Qe(),lt("button",{key:0,onClick:e[13]||(e[13]=Xt((...o)=>s.selectImage&&s.selectImage(...o),["prevent"])),class:Un(n.buttonClass),type:"button"},Yi(i.strings.change),3)),n.removable?(Qe(),lt("button",{key:1,onClick:e[14]||(e[14]=Xt((...o)=>s.removeImage&&s.removeImage(...o),["prevent"])),class:Un(n.removeButtonClass),type:"button"},Yi(i.strings.remove),3)):cr("",!0)])):(Qe(),lt("button",{key:0,onClick:e[12]||(e[12]=Xt((...o)=>s.selectImage&&s.selectImage(...o),["prevent"])),class:Un(n.buttonClass),type:"button"},Yi(i.strings.select),3))])):(Qe(),lt("div",{key:0,innerHTML:i.strings.upload},null,8,PM)),Vn("input",{ref:"fileInput",type:"file",name:n.name,id:n.id,accept:n.accept,onChange:e[15]||(e[15]=(...o)=>s.onFileChange&&s.onFileChange(...o)),capture:n.capture},null,40,BM)],512)}const qM=kd(NM,[["render",UM],["__scopeId","data-v-3abfe489"]]),Ua=bA(uM);Ua.use(Po);Ua.use(r2());Ua.component("QuillEditor",CM);Ua.component("PictureInput",qM);Ua.mount("body");export{du as A,$t as B,VM as C,fr as D,WM as E,pn as F,Bo as G,zM as H,Cn as I,GM as J,kM as K,Zn as L,Nn as M,_n as N,Dn as O,ot as P,Yf as Q,Fi as R,Ps as S,GA as T,gn as U,Rd as V,YA as W,YM as X,kd as _,ZM as a,_t as b,lt as c,fa as d,Vt as e,Vn as f,cr as g,PT as h,VE as i,ut as j,QM as k,cT as l,ss as m,Un as n,Qe as o,HE as p,XM as q,pt as r,Ul as s,Yi as t,aM as u,KM as v,HM as w,JM as x,Uv as y,SA as z};
//# sourceMappingURL=main-e0264e12.js.map
